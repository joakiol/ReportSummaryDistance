A practical Message-to-Speech strategy for dialogue systemsP.
Spyns (1), F. Deprez (1), L. Van Tichelen (1) and B.
Van Coile (1,2)(1) Lernout & Hauspie Speech Products, Sint Krispijnstraat 7, B-8900 Ieper, Belgiumtel.
: 32-57-22.88.88, fax: 32-57-20.84.89(2) E.L.I.S., University of Gent, Sint-Pietersnieuwstraat 41, B-9000 Gent, Belgiumtel.
: 32-9-264.33.95, fax: 32-9-264.35.94{ Peter.Spyns,Filip.Deprez,Luc.VanTichelen,Bert.VanCoile} @lhs.beAbst ractIn this paper, we present a Message-to-Speech system for Natural Language Gen-eration that is to be integrated in a dia-logue system.
As the system has to func-tion in a very restrictive nvironment withrespect o computational resources, a com-promise between concept based and tem-plate based generation systems had to befound.
Still, the approach aims at achiev-ing linguistic flexibility for the utterancesand attaining a natural sounding prosody.1 In t roduct ionMany of the Natural Language Generation (NLG)systems that produce flexible output, i.e.
sentenceswith variations on the syntactical and morphologi-cal levels, only aim at the production of written textand do not deal with spoken language.
By doing so,the important topic of generation of natural prosodyis not touched upon (see e.g.
(Elhadad, 1992; Re-iter et al, 1995; Dalianis, 1996; Somerset al, 1997)).On the other hand, message generating systems thatprovide speech of a natural quality (e.g.
announce-ment systems, phone banking and voice mail appli-cations) often combine fixed pieces of pre-recordedspeech.
These text and message generating systemsare either resource intensive (powerful CPU, largestorage and memory capacity, ...) or provide onlylimited flexibility, which seriously hampers their in-tegration in a dialogue system.The Message-to-Speech (MTS) system describedbelow is specifically designed to function in an envi-ronment with seriously restrained computational re-sources where it is impossible to store large amountsof pre-recorded speech.
In this context, Text-to-Speech (TTS) is an evident alternative.
However,for dialogue systems using a predefined set of mes-sage types, the use of special purpose prosody mod-els can lead to a prosodic quality that is superiorto the one generated by TTS systems, which applygeneral purpose prosody models for unrestricted text(see also (Hovy, 1995, p.161)).
Our prosody trans-plantation tool (see section 2) exploits this idea: forthe fixed parts of a message it allows to overruleprosody generated by general models, as is doneby TTS, with specific prosody copied from natu-ral speech.
Prosody by general model is only usedfor those parts of the message where flexibility isneeded.
The MTS system combines transplantedprosody with prosody by model in order to cope withpartly variable messages while still preserving natu-ral prosody (Van Coile et al, 1995).Details on the MTS system will be provided inthe third section.
It consists of two components:the MTS generation and the MTS prosodic integra-tion parts.
The former module (see section 3.1) istemplate driven (canned "text" interspersed withslots).
For a discussion of template driven sys-tems see (van Deemter et al, 1994; van Deemterand Odijk, 1997; Reiter, 1995).
The templates ac-count for the flexibility, including the linguistic vari-ation, of the messages.
The latter module (see sec-tion 3.2) specifically takes care of assimilation andthe prosodic integration of the slot values with therest of the template.
A discussion concludes thispaper (see section4).2 P rosody  Transp lantat ionThe idea behind Prosody Transplantation is thatof copying intonation and duration values from arecorded onor message (human speech) to the pho-netic transcription of the same message.
The specificEnriched Phonetic Transcription (EPT) obtained inthis manner can be fed to a TTS system whereby thenormal linguistic and prosodic modules (based ongeneral models) are by-passed (Phonetics-to-Speech- -  PTS).
Only the segmental synthesis and the syn-thesiser modules are used.An example of an EPT is provided by figure 1.The first value between square brackets is thephoneme duration (in ms), optionally followed byone or more intonation breakpoints.
Each break-point consists of a location value (in ms) relative tothe beginning of the phoneme, followed by a pitch41# T\[104\] ae\[74(0,98)1 N\[471 k\[107(10,81)1 j\[ 4(0,106)1u\[44\] f\[93(0,91)\] o [47(0,102)\] r\[29\] j [68(0,98)(30,90)\]o\[50(0,96)1 r\[71\] $\[45(0,93)\]-t\[108\] E\[70(0,102)\] n [68\]-S\[96\] $\[561 n\[106(30,83)(100,83)1 #Figure 1: textual representation f an EPT for thesentence "Thank you for your attention"value (in ST/4; reference 50 Hz).A major asset of Prosody Transplantation is thecombination of natural sounding speech with a lowbit rate for storage (less than 300 bit per second).In addition, only the prosody and not the timbre ofthe speaker is retained.
New donor messages canbe recorded by new speakers and seamlessly inte-grated in existing applications.
Specific tools havebeen developed to speed up the prosody transplanta-tion process (Van Coile et al, 1994).
Although theEPTs as such do not support linguistic variation,the combination of PTS with a template driven sys-tem provides linguistic flexibility as well as naturalprosody.3 The  Message- to -Speech  SystemIn the following sections, more details will be pro-vided about the combination of fixed and variableinformation (templates and arguments).
Once theappropriate surface form is selected (see section 3.1),the resulting EPT template with its arguments (pho-netically transcribed) is integrated on the prosodiclevel (see section 3.2).
Finally, the integrated EPTis fed into the TTS synthesis module (PTS).3.1 MTS Generat ion  Modu le3.1.1 Basic ConceptsA message represents a complete sentence and iscomposed of one or more building blocks or messageunits (MU), which constitute the input of the MTSsystem.
All MUs are prosodic units that cannot becombined in an arbitrary way to form messages: yn-tax specifies how to combine different MUs units intoa message.
The flexibility of a MU is guaranteedby the presence of slots.
By providing different ar-guments for a slot, several variants can be derivedfrom the same MU at run-time.
An entire messagecan thus be parameterised.Subsequently, the MUs are mapped into one ormore carriers.
A carrier is a template contain-ing the enriched phonetic transcription of cannedtext, transplanted from an appropriate donor mes-sage (see above), together with the prosodic infor-mation for the free slot parts (see below).MU arguments are not necessarily passed on to acarrier slot in a straightforward way: the argumentcan be deleted, adapted, or swapped.
Examples ofMUs and carriers are given in figure 2 11 Although some examples show an orthographic rep-423.1.2 Basic A lgor i thmThe MTS generation part basically tries to pro-cure a method that ensures the variability of a pieceof information and takes the related linguistic varia-tions into account (selection of the correct variant).The transformation f a MU into one or more carri-ers is guided by a two-fold mechanism:?
argument dependent carrier selection: the car-rier is selected in function of (a characteristicof) an argument.
E.g.
/a/car_ vs. / two/cars(singular vs. plural templates).
In order to se-lect the appropriate carrier, morpho-syntacticinformation about the argument must be avail-able (in a dictionary) .?
carrier dependent argument realisation: the ar-gument is realised in a different way in func-tion of the selected carrier.
E.g.
/a /  car vs./an/_automobile (vocalic onset or not for sin-gular noun).
For the argument to be realisedcorrectly, linguistic onstraints on the slot mustbe taken into account.The arguments to be filled in a slot are pho-netic transcriptions provided by a dictionary or agrapheme to phomene (G2P) conversion module.E.g., the dictionary entry for the determiner isan;ON=VO I a, NB=SG: "a" is the default; "an"is used before nouns with a vocalic onset and bothforms are singular.
It will be clear that the prosodyof a carrier (EPT with slots), although better thanplain TTS, risks to be slightly inferior to that of anentire EPT (no slot).
Therefore, a good and prac-tical compromise has to be found for the trade-offbetween storage space on the one hand and flexibil-ity and prosodic quality on the other .An example (see figure 3) gives an idea of howthe system works.
The transformation of MU 0001into carrier 3551 is straightforward (no specific con-dition).
Depending on the value of the argumentresentation, it must be stressed that a carrier is a veryconcise representation f a piece of recorded speech with-out segmental voice-specific features.
Each phoneme alsohas duration and intonation characteristics (see figure 1).ID ARG CommentMU 0001 Welcome to ...carrier 3551MU 0002 in /X/mi lecarrier 3561,%1 SG in /a/mi lecarrier 3562,%1 * in/Y/mi lesMU 0003 turn/LeftRight/"carrier 3571 left turn leftcarrier 3572 right turn rightFigure 3: .example conversion table of MUs into car-rierstype of mapping1 1 MU to 1 carrier2 1 MU to 2 carriersmessage unit (MU)welcome to the navigation systemin /num/mi le /s /3 1 MU with 1 slot to 2 turn/LeflRight/carriers without slotcarrier (orthographic representation)Welcome to the navigation system.In/a/mile_,In /num ~ 1/miles,Turn right.Turn left.Figure 2: example of mapping of message units (MU) to carriers(ARG), MU 0002 is mapped onto carrier 3561 orcarrier 3562.This is an example of argument dependent carrierselection.
Subsequently, if alternative surface formsco-exist, the restriction on the slot (see figure 4) iscompared with the characteristics of its argument.As "an" is associated with "ON=VO" (vocalic on-set), the default case "a" is selected (= carrier de.-pendent argument realisation).CARRIER : 3562 In/Distance/ miles# \[952(952,101)\] ?\[18\] I\[66\] n\[92(4,98)\]/Distance: ... ON=CO ... /m\[138(10,103)(70,96)\] Y\[224(2,93)(132,92)\]I\[173(58,82)\] z\[352\] #\[411(231,82)\]Figure 4: example of a carrier (with a morpho-logical restriction on the slot: onset is not vocalic\[ON=CO\])3.2 MTS Prosod ic  In tegrat ion  Modu leThe purpose of the prosodic integration module isto calculate appropriate prosody for all argumentsthat are to be filled out in a carrier.
In a first stepa duration is calculated for each of the phonemes inthe argument (see section 3.2.1).
In a second step,an appropriate intonation contour is calculated (seesection 3.2.2).3.2.1 Durat ion  modu leThe input of the duration module is a phonetictranscription i which primary and secondary stress,provided by the dictionary or G2P module, are in-dicated.
The duration module has access to one ormore duration models in order to produce a phonetictranscription that is enriched with a duration valuefor each phoneme.A duration model is a rule-based system calculat-ing durations, taking into account parameters suchas lexical stress, position of phonemes (word initial,word medial, word final, sentence final), length of theargument, phonetic ontext of phonemes (left/rightneighbour, consonant cluster, open/closed syllable)etc.
As speech rate can vary from one message to an-other, a slot specific speech rate coefficient, providedby the carrier, can also be taken into account.Two major strategies with respect to durationmodelling can be discriminated:?
As the most natural prosody is the one derivedfrom human speech, the possibility is offered tofeed the duration module with phonetic tran-scriptions enriched with duration informationcopied from natural speech.
When customis-ing the MTS system, an argument dictionarycontaining this information can be built off-lineby making use of the prosody transplantationtools (see section 2).
If transplanted durationsare available in the argument, they are takenover by the duration module and only modifiedin specific cases - -  e.g.
change a duration inorder to cope with a phenomenon such as finallengthening.?
For arguments without transplanted durations,a general purpose duration module is activated.It consists of a cascade of different durationmodels each having a decreasing specificity.Specific duration models exist for particular ar-guments uch as numbers or date and time in-dications.
The general purpose model is onlyused if no more specific model is available.
Spe-cial tools have been developed to speed up thecreation of general and special purpose durationmodels.3.2.2 In tonat ion  modu leThe results after duration modelling are inputto the intonation module, which produces phonetictranscriptions describing both duration and into-nation.
After assimilation has been taken care of,the resulting EPT for the argument can be insertedwithout any further action into the EPT of the car-rier.For each argument, he intonation module calcu-lates a piecewise linear intonation contour based onslot specific intonation models.
The slot specific in-formation, provided by the carrier, that can be takeninto account is among others the begin pitch, theend pitch, the declination rate and the intonationcontext (final fall, continuation rise, etc.)
of the ar-gument.4 D iscuss ionThe MTS described above is realised in the contextof a dialogue system that places a heavy burden onits hardware nvironment.
It produces high qualityspeech while morpho-syntactic variations are taken43into account.
More specifically, as the MUs and un-derlying carriers take arguments, it is possible togenerate several variants of the same basic message.?
variations on the level of a carrier slot can beparadigmatic: a message ranges over all the ele-ments belonging to a certain semantic ategory(e.g.
product name, cardinality) but the actualmessage is not known on beforehand.?
variations on the level of a carrier slot can bemerely syntagmatic: agreement of all kinds, li-aison, contraction, etcetera.?
variations on the carrier level combine both: amessage unit can be expressed by other carri-ers possibly implying other paradigmatic combi-nations and/or different syntagmatic variations(e.g X replaces Y --~ Y is substituted with X).?
variations on the level of the message units canbe semantic: new combinations of message unitslead to the creation of new messages.Also, the MUs and the underlying carriers can bere-used to compose new messages without any loss inspeech quality.
Good prosody for the carriers is ob-tained thanks to the prosody transplantation tech-nique.
For the slot arguments the same techniquecan be applied, or prosody is calculated on basis ofspecific duration and intonation models.In addition, as the language and task independentcore engine is very strictly separated from the lan-guage dependent knowledge bases, it is very easy totailor the MTS system to specific tasks.Harold Somers, Bill Black, Joakim Nivre, Torbjon Lager, Annarosa Multari, Luca Gilardoni, ,Jeremy Ellman, and Alex Rogers.
1997.
Multilin-gual generation and summarization f job adverts:the TREE project.
In Proceedings of the FifthConference on Applied Natural Language Process-ing, pages 269 - 276, Washington D.C. MorganKaufmann Publishers.B.
Van Coile, L. Van Tichelen, A. Vorstermans,J.W.
Jang, and M. Staessen.
1994.
Protran: Aprosody transplantation tool for Text-to-Speechapplications.
In Proceedings of the 1994 Interna.tional Conference on Spoken Language Processing(ICSLP-94), pages 423-426, Yokohama, Japan.B.
Van Coile, H. Riihl, L. Vogten, M. Thoone,S.
Goss, D. Delaey, E. Moons, J. Terken, J. de Pi-jper, M. Kugler, P. Kaufholz, R. Krfiger, S. Leys,and S. Willems.
1995.
Speech synthesis for thenew pan-european traffic message control systemRDS-TMC.
In Proceedings of Eurospeech 1995,pages 145-148.K.
van Deemter and J. Odijk.
1997.
Context model-ing and the generation ofspoken discourse.
SpeechCommunication, 21:101- 121.K.
van Deemter, J. Landsbergen, R. Leermakers,and J. Odijk.
1994.
Generation of spokenmonologues by means of templates.
In L. Bovesand A. Nijholt, editors, Proceedings of the EightTwente Workshop on Language Technology, pages87 - 96, Twente.Re ferencesRonald Cole, Joseph Mariani, Hans Uszkoreit, An-nie Zaenen, and Victor Zue, editors.
1995.
Surveyof the State of the Art in Human Language Tech-nology.
Cambridge University Press (in press).Hercules Dalianis.
1996.
Concise Natural LanguageGeneration from Formal Specifications.
Ph.D.thesis, The Royal Institute of Technology andStockholm University, Department of Computerand Systems Science, Stockholm, Sweden.Michael Elhadad.
1992.
Using argumentation tocontrol lexical choice: A functional unification-based approach.
Ph.D. thesis, Computer ScienceDepartment, Columbia University.Eduard Hovy.
1995.
Overview.
In Cole et al (Coleet al, 1995), pages 161 - 169.Ehud Reiter, Chris Mellish, and John Levine.
1995.Automatic generation of techical documentation.Applied Artificial Intelligence, 9(3):259-287.Ehud Reiter.
1995.
NLG vs. templates.
In Proceed-ings of the European NLG Workshop 95, pages 95- 106 .44
