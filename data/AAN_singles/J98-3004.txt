Describing Complex Charts in NaturalLanguage: A Caption Generation SystemVibhu O. Mittal*University of PittsburghGiuseppe Carenini~University of PittsburghJohanna D. Moore t~University of PittsburghSteven Roth~Carnegie Mellon UniversityGraphical presentations can be used to communicate information i  relational data sets succinctlyand effectively.
However, novel graphical presentations that represent many attributes and rela-tionships are often difficult to understand completely until explained.
Automatically generatedgraphical presentations must therefore ither be limited to generating simple, conventionalizedgraphical presentations, orrisk incomprehensibility.
A possible solution to this problem would beto extend automatic graphical presentation systems to generate xplanatory captions in naturallanguage, to enable users to understand the information expressed in the graphic.
This paperpresents a system to do so.
It uses a text planner to determine the content and structure of thecaptions based on: (1) a representation fthe structure of the graphical presentation and its map-ping to the data it depicts, (2) a framework for identi~ing the perceptual complexity of graphicalelements, and (3) the structure of the data expressed in the graphic.
The output of the planner isfurther processed regarding issues uch as ordering, aggregation, centering, generating referringexpressions, and lexical choice.
We discuss the architecture of our system and its strengths andlimitations, Our implementation is currently limited to 2-D charts and maps, but, except for lex-ical information, it is completely domain independent.
We illustrate our discussion with yqguresand generated captions about housing sales in Pittsburgh.1.
In t roduct ionThis paper describes a framework for generating natural anguage captions to accom-pany complex graphical presentations of diverse data sets.
It describes an implementedsystem that integrates two robust systems: SAGE--an intelligent graphics presentationsystem (Roth et al 1994), and a natural anguage generator, consisting of a text planner(Young and Moore 1994; Young 1997), a microplanner implementing tactical decisions,and a sentence realizer (Elhadad and Robin 1992).Graphical presentations can be an effective method for succinctly communicatinginformation about multiple, diverse data attributes and their interrelationships.
Morethan 80% of all business reports these days contain graphic presentations of data (Beat-tie and Jones 1994; Schmid 1983).
When a display includes only a small number ofdata attributes or can make use of conventionalized graphical styles (e.g., spreadsheet* Current affiliation: Just Research, 4616 Henry Street, Pittsburgh, PA 15213 and Language TechnologiesInstitute, .Carnegie Mellon University, Pittsburgh, PA 15213.
E-marl: mittal@jprc.comt LRDC and Computer Science DepartmentIntelligent Systems Program?
Robotics Institute and Computer Science Department(~) 1998 Association for Computational LinguisticsComputational Linguistics Volume 24, Number 3graphics), it is easy for a viewer to understand how to interpret it.
However, one ofthe main goals for automatic presentation systems is to allow users to see complexrelationships between different attributes and perform problem-solving tasks (e.g.,summarizing, finding correlations or groupings, and analyzing trends in data) thatinvolve many data attributes at the same time.
A number of research groups have de-veloped systems that can automatically design sophisticated presentations to supporta task--presentations that are both novel and complex (e.g., Casner 1991; Mackinlay1986; Roth et al 1994).
These graphics are often difficult to understand (Shah 1995).Clearly, such graphics can only be fully effective for supporting analysis tasks if ac-companied by explanations designed to enable users to understand how the graphicsexpress the information they contain.
Studies have shown that the presentation ofcaptions with pictures can significantly improve both recall and comprehension, com-pared to either pictures or captions alone (Nugent 1983; Large et al 1995; Hegarty andJust 1993).
This suggests that the generation of captions for statistical graphics is animportant application area in which natural anguage generation techniques can makea significant contribution.In our system, the graphical displays are designed by an automatic presentationcomponent, SAGE (Roth et al 1994), and are often complex for several reasons.
First,they typically display many data attributes at once.
The mapping of many differentdata attributes to multiple graphical objects in a single display can be difficult todetermine from the graphics alone.
Second, integrating multiple data attributes in adisplay requires designing raphics that are unfamiliar to users accustomed tospread-sheet graphics that create simple displays of individual data attributes.
While theseintegrated isplays can be very useful once they are explained, it is often difficult tounderstand them completely without accompanying explanations.
Finally, the natureof the data with which we are concerned is inherently abstract and does not have anobvious or natural visual representation.
Unlike depictions of real world objects or pro-cesses (e.g., radios \[Feiner and McKeown 1991\], coffee makers \[Wahlster et al 1993\],network diagrams \[Marks 1991\]) and visualizations of scientific data (e.g., weather,medical images), visualizations of abstract information lack an obvious physical ana-logue.As an example of the type of data we are concerned with, consider the graphicshown in Figure 1.
This is a SAGE-generated version of the famous graphic drawn byMinard in 1861 depicting Napoleon's march of 1812 (Roth et al 1994).
1The graphicrelates seven different variables: position (latitude and longitude), size, direction ofmovement, emperature, and dates and locations of battles.
Unless one has seen thisgraphic (or a very similar one) before, it can be very difficult to understand.
Indeed,Minard accompanied the original graphic with a paragraph of text, the first half ofwhich is about how the graphic expresses the information it contains.
2Consider how the following human-generated caption for the graphic in Figure 1explains the picture and the underlying data: 3This map shows march segments and battles from Napoleon's 1812 campaign.The map shows the relation between the geographic locations, temperature andnumber of troops for each segment.
Each line shows the start and end locationsfor the march segment.
Its color shows the temperature, and the thickness howsthe number of troops.
The temperature was about 100 degrees for the initialsegments in the west (the wide, dark red lines on the left), about 60 degrees in1 The original graphic an be found on page 41 in Tufte (1983).2 Minard's original caption, translated from French, reads:432Mittal, Moore, Carenini, and Roth Generating Chart Captionslater segments in the east (the narrower, light red lines on the right) and about-40 degrees in the last segments, also in the west (the narrowest, dark blue lineson the left).
The number of troops was 400,000 in the earliest segments, 100,000in the later segments, and 10,000 in the last segments.
The city and date of eachbattle is shown by the labels of a yellow diamond, which shows the battle'slocation.This caption can help users understand the various attributes and the underlyingrelations between them--conveyed so succinctly by the graphic.Although several projects have focused on the question of how such intelligentgraphical presentations can be automatically generated (e.g., Casner 1991; Mackinlay1986; Roth and Hefley 1993; Kerpedjiev 1992), they have not addressed the problemof generating the accompanying textual explanations.
Without his ability, automaticgraphical presentation systems will necessarily be limited to generating convention-alized graphics that do not use novel means to express complex relationships amongdata attributes, or risk generating displays that users will find difficult to fully com-prehend and utilize.In designing our framework for generating natural anguage captions we haveadapted and integrated work in natural anguage generation (NLG) by a number ofresearchers--including ourselves--in different subareas: text planning, aggregation,centering, computing referring expressions, example generation, and linearization.Given the applied nature of our work, in selecting specific NLG techniques we fol-lowed a parsimonious approach.
For each subtask we selected the simplest techniquethat was capable, in conjunction with the behavior of the other subtasks, of producingcoherent text that could express the propositions we needed to convey.The generation process starts with content selection.
For this process, we useLONCBOW, a domain-independent discourse planner originally developed as part ofa project aimed at generating tutorial explanations (Young and Moore 1994).
Usingplan operators that encode discourse strategies devised for the task of generatingcaptions, the planner determines what information should be included in the cap-tions (and consequently what should be left out), and how to organize the selectedinformation.
Operator constraints analyze the structure of the graphic presentationand the perceptual complexity of the graphical display to enable the planner to se-lect and apply appropriate strategies.
The output of the text planning stage is thenfurther processed by a microplanner, a sequence of modules implementing inter- andFigurative map of the losses, expressed in men, of the army during theRussian campaign.
1812-1813Print by M. Minard.
Retired general inspector of the "Ponts et Chaussees.
"The number of men is represented by the width of the colored zones, where onemillimeter corresponds to ten thousand men; moreover, they (number of men)are written across the zones.
Red indicates men entering Russia, black indicatesmen exiting it.
The information used to fill this map would have not beenavailable without M. Thiers, de Segur, de Frezerisac, de Chambray and thejournal of Jacob, army pharmacist ince Oct. 28th.
To help the eye judge how thearmy shrank, I assumed that the regiments of Price Jeroms and Marchal Davons,that were detached in Minsk and Mobilov, and rejoined near Orscha and Wiltesk,always walked together with the army.3 Note that he original picture generated bySAGE was in color; the paper contains gray scalereproductions due to printing limitations.433Computational Linguistics Volume 24, Number 3intraclause ordering, aggregation, and referring expression computation.
The moduleperforming intraclause ordering is of special interest because it uses a novel techniquebased on centering theory.
Although we have devised such a technique specificallyfor generating captions, it is general and can be applied to any discourse structure.The other three microplanning modules use standard NLG techniques.
Ordering andaggregation are based on text genre (i.e., descriptions of information graphics) anddomain-specific (e.g., real estate sales or stock market data) heuristics.
The referringexpression module uses a well-known domain-independent algorithm that, given anintended referent, builds a description uniquely identifying it.
The referential problemsin our application did not require more sophisticated referring algorithms; there wasalso no interaction between computing the referring expressions and inter- and intra-clause ordering.
Once microplanning is complete the FUF/SURGE realization modulegenerates the actual English.
The modules of our NLG system are discussed in detailin Section 5.In addition to these NLG techniques, generating textual captions for informationgraphics requires the following knowledge sources:?
a representation f the syntax of graphical displays, that is, thestructural, spatial and other relations among graphical objects and theirproperties.
For example, the relationship between the end points of thelines in Figure 1 to positions on the map, the fact that an axis conveysthe positional values for all the objects within a chart, 4the differencebetween alternative uses of color: (i) constant color, (ii) color used todistinguish between different attributes, and (iii) color used to encodedata values?
a representation f the semantics of graphical displays, i.e., the mappingfrom data objects and their attributes to graphical ones.
For example, inFigure 1 the fact that the temperature during a march segment ismapped to the color of the corresponding graphical segment.?
a mechanism for determining which aspects of graphical displays mustbe explained based on their perceptual complexity or the complexity ofthe data attributes they express.
This mechanism ust take into accountinformation about the underlying data and the perceptual complexity ofthe way in which data attributes and relations have been mapped tographical entities.We describe these knowledge sources and the discourse strategies in the followingthree sections.2.
SAGE: A System for Automatic Graphical ExplanationsSAGE is a knowledge-based presentation system that designs graphical displays ofcombinations of diverse information (e.g., quantitative, relational, temporal, hierarchi-cal, categorical, geographic).
The inputs to SAGE include: (1) sets of data representedas tuples in a relational database, (2) a characterization f the properties of the datathat are relevant o graphic design, and (3) an optional set of design specifications,expressing a user's preferences for visualizing the data set.4 Except those that are positioned relative to other objects, as explained in Section 4.434Mittal, Moore, Carenini, and Roth Generating Chart CaptionsLat i tude  (degrees)56.0, , , , , , , , , , , ,54"~'3,0 24.0 25.0 26.0 27,0 28.0 29.0 30.0 31.0 32.0 33.0 34.0 35.0 36.0 37.0 38.0Long i tude  ( degrees  )Figure 1A SAGE-generated version of the well-known Minard graphic.SAGE'S output consists of one or more coordinated sets of 2-D information graphicsthat use a variety of graphical lechniques to integrate multiple data attributes in asingle display.
SAtE integrates multiple attributes in three ways:?
by representing them as different properties of the same set of graphicalobjects.
For example, both the left and the right edges of the bars in theleft most chart in Figure 2 are used to map attributes (asking-price andselling-price respectively)?
by assembling multiple graphical objects into groups that function asunits to express data.
For example, the interval bar and the mark in theleft most chart in Figure 2 are used to show different types ofprice-related attributes: asking-price, selling-price, andthe agency-estimate.?
by aligning multiple charts and tables together with respect o acommon axis.
For example, the three charts in Figure 2 are aligned onthe Y-axis, which indicates the house.Creating a graphic that integrates data in this way is partly an encoding processin which the values of data attributes are converted into graphical values of propertiesof objects (e.g., color, shape, and spatial position of polygons).
Interpreting the infor-mation in a graphic is a decoding process, where people must translate visual symbolsback into data values.
SAGE creates graphics that enable people to efficiently performinformation-seeking tasks (e.g., searching for clusters of data values that are differentfrom the rest and looking up other facts to understand what makes them different).In designing raphics, however, SAGE only considers how effectively attributes can bemapped to graphical properties to support a task.
For example, a requirement to beable to search for particular values by name might result in the relevant attribute beingarranged along an axis in lexicographic order; on the other hand, if it is important tofind the maximum and minimum values in a set, SAGE might order these values interms of magnitude.
SAGE, like other automated presentation systems (Casner 1991;Mackinlay 1986), does not take into account perceptual complexities associated withthe resulting raphic.
For instance, SAGE does not explicitly reason about the difficul-ties users may have in translating bicolor saturation scales to exact numerical values, s5 The Minard Graphic, shown in Figure 1, uses the bicolor saturation technique tomap temperaturevalues to the march segments shown in the map.435Computational Linguistics Volume 24, Number 3SAGE can also design complex presentations that have overlapping objects, or use(:luster composition to define a novel combination or grouping of graphical objectsin the presentation.
This can make understanding some of the graphics that SAGEgenerates quite difficult.
Fortunately, the picture representation used in SAGE containsa complete declarative representation f the content and structure of the graphic in aform that can be used for reasoning by other components.
Thus, this representationcan be used to reason about possible sources of user confusion arising from mappingsthat are either complex or ambiguous to the user.SAGE'S representation serves three functions in explanation generation.
First, ithelps define what a viewer must understand about a graphic in order to obtain usefulinformation from it.
It does this by defining the elements of a graphic and the waythey combine to express facts (i.e., how they map to data).
Second, the representationdescribes the structure of both the graphical presentation and the data it presents, sothat they can be explained coherently.
Finally, the representation helps derive judg-ments of complexity for specifying raphical elements needing text explanation.
Tounderstand these three functions, we briefly review the representation.Graphemes are the basic building blocks for constructing pictures.
Marks, text,lines, and bars are some of the different grapheme classes available in SAGE.
Eachgrapheme type consists of a definition of the parameters that control the appearanceof all graphemes of that type; different grapheme subtypes can be created by varyingspecific parameters.
Individual graphemes can be generated by providing appropriatevalues for all the input parameters.
For instance, individual marks can be generatedby providing values for the parameters: x-coordinate, y-coordinate, shape, size, and colorto an instance of a mark class encoder; individual ine segments can be generated byproviding values for the coordinates xl, yl, x2, and y2, thickness; and color to the lineclass encoder.Symbol classes are used to organize graphemes into structures that express factsin the data set.
A labelled-mark, an interval bar, and a bar with an attached labelare some of the more familiar symbol classes available in SAGE.
Each symbol classconsists of a definition of the spatial relationship among a set of graphemes and thecorrespondence b tween the parameters of this set and attributes types in a data set.A labelled-mark, for instance, would be defined as a combination of a mark and atext label and the spatial relationship between them.
Consider the labelled-marks inthe chart shown in Figure 3.
The spatial position of the label is dependent on theposition of the mark: it is offset slightly to the right and above the mark.
Symbolclasses in SAGE can be either predefined (some of the more common ones, such asa labelled-mark have already been defined), or created by the system based on rulesabout combining different graphemes into clusters.Encoders are used to relate specific data values and graphical values to each other.Horizontal/vertical xes, color keys, size keys, and shape keys are some of the differentencoders available in SAGE.
Each encoder class consists of a definition of the relationbetween a family of data set attributes and a particular graphical type.
SAGE can thenuse this information to map data values to graphical values in designing a picture,and provide a frame of reference (e.g., axes, keys, etc.)
that can be used to visuallyinterpret specific values in the picture.
For instance, a color encoder could map datavalues "less than 5" to the graphical value "blue" and others to "red."
A schematic ofthe encoders used in the chart shown in Figure 3 is shown in Figure 4.In addition to this knowledge about graphemes, symbols, and encoders, SAGEuses knowledge of the characteristics of data relevant o graphic design (Roth andMattis 1990; Roth and Hefley 1993), including knowledge of data types and scalesof measurement (e.g., quantitative, interval, ordinal, or nominal data sets), structural436Mittal, Moore, Carenini, and Roth Generating Chart CaptionsHouseBEECHWOOD-ii74BEECHWOOD-1950BEECHWOOD-2266BEECHWOOD-3237BOULEVARD-3931COLLEGE-637DOUGLAS-5919MOREWOOD-508PENHAM-6828SHADY-1205SHADY-263SHADY-2908WALNUT-6343WELFER-1027WIGHTMAN-1236WILKINS-5735WOODWELL-6663$0K?3Dm\ [mSq3qQC~m~34?Z3m?1348$80K $160K $240KHouse  Price$320K 7-Feb 5-MayE) ?l I ?\[\] :i :i:':"',, i ?\[\] ?r ?i ~ l  ?r ?
?I ?
?i i ?I I ?i I ?24- Ju \ [  12 -0ct  31 -Dec  HH C21 CBDate Listing AgencyFigure 2A sample graphic generated by SAGE.HouseBEECHWOOD-ii74BEECHWOOD-1950BEECHWOOD-2266BEECHWOOD-3237BOULEVARD-3931COLLEGE-637DOUGLAS-5919MOREWOOD-508PENHAM-6828SHADY-1205SHADY-2263SHADY-2908WALNUT-6343WELFER-1027WIGHTMAN-1236WILKINS-5735WOODWELL-6663$0KDLorraine-HurwitzO S-Smith?Louise-DwyermMilt -StrahlO Judy-Armitage?
J i l l -Bo lner?Sus ie-S i lversmithListing Agency?
HANNaCENTURY-21COLDWELL~Briana-Nassi f?Nata l ie -K le in?Sus ie-S i lversmith?Gayle-Pol lock~Dee-Yurkov ich?Mar ian-Wi leOVance-Hetr ick?Lorraine-Hurwitz?S-Smithi i !$80K $160K $240KNeighborhoodO POINT-BREEZEO SHADYSIDEO SQUIRREL-HILL!$320KHouse PriceFigure 3A graphic generated by SAGE to illustrate the use of encoders.relationships among data (e.g., the relation between the endpoints of ranges or betweenthe two coordinates of a 2-D geographic location), and the functional dependenciesamong attributes in database relations (e.g., one:one, one:many, many:many).
As wewill show later, the latter is an important factor in selecting a high-level discoursestrategy for generating explanatory captions.Finall3?
SAGE has a library of graphical techniques, knowledge of the appropri-ateness of the techniques for different data and tasks, and design knowledge for as-437Computational Linguistics Volume 24, Number 3sembling these techniques into composites that can integrate information in a singledisplay.
SAGE uses this graphic design knowledge together with the data characteri-zation knowledge to generate displays of information.To summarize, the portion of sign's knowledge base that is most relevant forgenerating explanatory captions is its graphical syntax and semantics.
The syntaxincludes a definition of the graphical constituents hat convey information: spaces(e.g., charts, maps, tables), graphemes (e.g., labels, marks, bars), their properties (e.g.,color, shape), and encoders--the frames of reference that enable their properties to beinterpreted/translated back to data values (e.g., axes, graphical keys).
The syntax alsodefines the ways in which graphemes can be combined to form symbols---compositesthat integrate multiple data attributes (e.g., a label attached to a mark).
The syntac-tic structure of a graphical display, like the linguistic structure of text, can provideguidance for creating structurally coherent explanations.The representation f the semantics of graphics conveys the way data is mappedto the syntactic elements of displays.
It also provides guidance for organizing explana-tory captions by grouping raphical elements that express data attributes that form acoherent group.
The data characterization provides knowledge of the structure of thedata and therefore also influences the structure of the explanation.3.
Discourse Strategies for Generating CaptionsExplanations about informational graphics can be classified into at least three cate-gories based on the structural properties of the picture, the structure of the underly-ing data attributes, and their mapping to spaces and graphemes.
These explanationstrategies reflect he overall structure of the graphic presentation: whether the spacesare aligned along a common axis, and around the functionally independent a tribute(FIA).
An attribute is functionally independent if it uniquely determines the values ofall other attributes.
For example, in one of our current data sets about house sales, thehouse's treet address has been specified as the FIA; it uniquely determines a king-price,selling-price, and the other attributes in the database.
In contrast, he listing agency doesnot uniquely determine any of the other attributes in the house-sales relation.In addition to the factors mentioned above---used to select he overarching dis-course strategies--the system makes use of additional information about the symbolsand their mappings used in the display to select and organize information to be pre-sented in the caption.
For instance, the system uses graphical information to determinethe order in which information is presented.
This reasoning can occur at various levelsof the picture representation: at the space level (all objects in a space are describedbefore objects in another space), at the grapheme cluster level (all objects in a clus-ter are described together), and at the encoder level (all objects that map the sameattribute type are described together).
SAGE'S representation f the graphical displaythus provides additional information that can be considered when text explanationsare generated.The process of generating natural language xplanations can be divided into threeconceptual stages: (i) select a discourse strategy to provide the overall organization ofthe explanation based on the structural properties of the graphical presentation, therelations expressed in the data set, and the data-to-grapheme appings; (ii) withineach space of the presentation, use the complexity metric to determine the amount ofdetail to be included in the explanation; and (iii) reason about he tactical decisions insentence planning.In our current application, content selection mainly consists of determining thecomplex or ambiguous aspects of a graphic presentation.
I  general, knowledge-based438Mittal, Moore, Carenini, and Roth Generating Chart CaptionsData Set  Attr ibutes Encoderscolorr 2.?letterir- - - - -S .
-color ilistin p .... price eas~iimnaCl market sans add .... gen~y!
selling ..... g I_,~ibo, d .
.
.
.
.
agent 1 g laCk ~ ' ~ ' ~GraphemesMARK SET.,x y shape size colorJ"EXTSE'y lettering font color.Jlabelled-mark symbol classFigure 4Encoders used in mapping attributes to a labelled-mark in the chart shown in Figure 3.systems cannot afford to generate a paraphrase of the entire knowledge base.
As illus-trated by Figure 5, an explanation that includes all the facts in the underlying picturerepresentation or data set for even a simple graphic in SAtE would be extremelyverbose.
Most of the facts expressed in such a caption would be both obvious andunnecessary for the average user.
Studies have shown approximately three-fourths ofthe time spent by users in interpreting a graphic is used in understanding the data-to-grapheme mappings (Shah 1995; Cleveland and McGill 1987).
Therefore, our initialgoal was to generate captions describing only those mappings that might be eithercomplex or ambiguous for the average user.
The system can currently analyze a pic-ture representation for five different ypes of complexities and ambiguities; these arediscussed in greater detail in the following section (Section 4).
This section discussesthe three strategies used by the system to structure the content during text planning.The sentence planning phase is discussed in Section 5, where the individual compo-nents implementing the tactical decisions in the microplanner are described in detail.3.1 Strategy 1: Graphic Organized Around the Functionally Independent AttributeAs mentioned earlier, the three strategies used by the caption generator depend uponboth the structure of the graphic presentation and the relations in the data set pre-sented in the graphic.
The first strategy can be applied when the data set contains afunctionally independent attribute (FIA) that is used as an organizing device or "an-chor" for the entire graphic.
This occurs either when the graphic has only one spaceand the FIA is mapped to one of the axes, or when there are multiple spaces and theFIA is mapped to the axis of alignment.439Computational Linguistics Volume 24, Number 3These three charts show information about houses from data set PGH-23.
Each chart has two axes.
The Y-axis identifies the houses in thethree charts.
The data set countains 17 items.
The X-axis in the firstchart indicates house prices.
The origin is at zero and there are 4 tickson the axis, with the maximum value being $320,000.
The differencebetween each tick is $80,000.
The values mapped to the axis range from$55,000 to $310,000.
The left edge of the bar shows the selling price ofa house whereas the right edge of the bar shows the asking price ofa house.
Selling prices shown range from $55,000 to $304,000.
Askingprices range from $61,000 to $310,000.
The horizontal position of thesquare mark shows the agency estimate.
These range from $55,000 to$305,000.
For example ...Figure 5A fragment of one possible verbose caption for the graphic in Figure 6.In such cases, the strategy attempts to reinforce the organizing role of the func-tionally independent attribute.
The explanation strategy identifies the anchor and theindependent attribute first.
Then, it describes each space in the picture relative to theanchor.
Domain attributes mapped in the graphic are also mentioned in the context ofthe FIA and the type of relationship defined between them (one:one or one:many).
TwoSAGE-generated graphics and the associated explanations that illustrate this organizingprinciple are shown in Figures 6 and 7.
These two figures illustrate the importance ofa caption generator in this application.
Both figures present he same data set abouthouse sales.
However, the presentations generated by SAGE are different, make use ofdifferent mappings, and give rise to different perceptual complexities.
Consequently,the content of the captions generated is also different.
However, in both the captions,the overall discourse strategy is the same: to emphasize the aligning Y-axis, the func-tionally independent attribute--the house-address--and structure the description of theother attributes in terms of the FIA.3.2 Strategy 2: Single Space Organized Around Dependent AttributesIn cases where the graphic is organized around dependent attributes, the explanationcannot be structured around any of them.
This is because the attribute may be definedin either one:many or many:many relationships in the dataset and cannot thereforebe used as an identifier.
This is the case in Figures 8 and 9.
In these two figures, theattributes that are mapped to the axes of the charts are dependent attributes uch asdays-on-market, number-of-rooms, and lot-size.
Neither of these can be used to refer toother attributes unambiguously.
Thus, the discourse strategy cannot be the same asin the case where an FIA is mapped along one of the axes.
Instead the explanationemphasizes the relation between the dependent attribute(s) that serve as organizer(s).There are two strategies depending on whether or not the figure consists of multiplespaces.
If there is only a single space in the graphic, the explanation emphasizes the re-lation between the attributes encoded against he two axes.
A SAGE-generated graphicand the associated explanation that illustrates this organizing principle is shown inFigure 8.
The caption generated for the figure illustrates how the strategy emphasizesthe relationship between the attributes mapped along the axes.
Figure 8 shows therelationship between the variation in house prices and the number of days a house ison the market in the data set.440Mittal, Moore, Carenini, and Roth Generating Chart CaptionsHouseBEEC~D~I i74BEECHW~D-1950BEECHWOOD-2266~EECHWOOD-3237BOULEVARD-3931COLLEGE-637DOUGLAS-5919MO~WOOD-508PENH~-6828S~DY-1205SHADY-263SHADY-2908WALNUT-6343WELFER-1027WIGHTMAN-1236WILKINS-5735WOODWELL-6663mDm~3qIiC3D4w~3G8C3iOlCZ3i |DCUi3C~3I .. IU3)C3i i$0K $80K $160K $240K $320K 7-Feb 5-May 24-JulHouse  Pr i ce  DateNeighborhoodImm ~ IPT -B~EZEISHAD?SIDE~SQ~L HL, , ~12-Oct 31-Dec HH C21 CBListing AgencyThese three charts show information about houses from data set PGH-23.
The Y-axis identifiesthe houses in the three charts.
In the first chart, house prices are shown by the X-axis.
The house'sselling price is shown by the left edge of a bar, whereas the asking price is shown by the rightedge.
The horizontal position of the mark shows the agency estimate.
For example, as shown inthe highlighted tuple, the asking price of 3237 Beechwood is$82K, its selling price is $75K, andthe agency estimate is$81K.
In the second chart, the house's date on the market is shown by theleft edge of a bar, whereas date sold is shown by the right edge.
Color indicates the neighborhood.The third chart shows the listing agency.Figure 6Graphic with caption generated using strategy 1.3.3 Strategy 3: Multiple Spaces Aligned along an Axis with Dependent AttributesThe second strategy discussed above is only applicable if there is a single space inthe presentation.
However, SAGE is capable of designing presentations with multiplespaces that are aligned along dependent attributes in the data set.
In such cases, theexplanation generator cannot describe all the concepts in the presentation using strat-egy 2.
This is because if one of the spaces in the presentation happens to have theFIA mapped to its non-aligned axis, a description such as "this space shows the (one:one)relationship between the {FIA/ and (attribute-2 I" would not be natural.
In such cases, itis more natural to use strategy 1 to describe the mappings in that space.
Therefore,strategy 3 allows the system to organize the captionf0r each space accordingly, depend-ing upon whether the FIA is mapped along its nonaligned axis.
Figure 9 shows such agraphic and the corresponding caption.
The two charts in Figure 9 are aligned alongthe X-axis, which is used to encode house-price.
In generating the captions for the twocharts, the system describes each one independently, using either strategy 1 or 2, asappropriate.
It describes the top one first (following the structure of the graphic) andthen the bottom one.
Each of them, in this case, is described using strategy 2 becausethey both have dependent attributes mapped along the axes.4.
Graphical Complexity: The Need for ClarificationIn the previous ection, we discussed three strategies used to organize the informationto be presented.
As mentioned earlier, it is important o select information aboutmappings based on either complexity or ambiguity if the caption is to be both succinctand informative.
We have identified five types of graphical complexities, described441Computat ional  Linguist ics Vo lume 24, Number  3Agency~Hannam Century-21\[~\]Coldwell$124Ei$199KI,$175K$175K$61~$80K~$65K$76K\[ I$66K$225~$189KHouseBEECHWOOD-ii74BEECHWOOD-1950BEECHWOOD-2266BEECHWOOD-3237BOULEVARD-3931COLLEGE-637DOUGLAS-5919MOREWOOD-508PENHAM-6828SHADY-1205SHADY-263SHADY-2908WALNUT-6343WELFER-1027WIGHTMAN-1236WILKINS-5735WOODWELL-666314-Feb-89I5-May-89 24-Jui-89House Price I$290K~$276K $285K$165K $163K$198K~$196K $195K$80K$85K~$76K $82K$41K $55K$115Km$110K $I12KI$184K $182K$269KI I$245K $261E$192KI I$174K $190K$73K$99K~$73K $80KI$I03K $I03K$55K~$52K $54K$177K $176K$153K $165K$182K $182KI12-Oct-89 31-Dec-89DateThis chart and table show information about house sales from data set PGH-23.
The Y-axisidentifies the houses in the two spaces.
In the chart, dates are shown along the X-axis.
The house'sdate on the market is shown by the left edge of a bar, whereas the date sold is shown by the rightedge.
Color indicates the listing agency.
The label to the left of a bar indicates the asking price,whereas the label to the right indicates the selling price.
The table shows the agency estimate.Figure 7Capt ion for an alternative presentat ion of the dataset used in Figure 6.below, that can make it difficult for a user to understand complex data-to-graphememappings.
64.1 Encoder ComplexityTo read data values shown in a picture, users must understand the encoders usedin designing the picture.
Encoders allow the user to map between graphical valuesand attribute values.
Two examples of encoders are the axes (which allow users tomap between positional values in the picture and data values along the axes), andgraphical keys (these can illustrate mappings between variables such as size and shapeand attribute values).
Complexities can arise either (i) when an encoder is complex,or (ii) when an encoder mapping uses a scale that is complex.Consider for instance, Figure 10.
Among the encoders used in this picture are theX and Y axes, which map positional information to house prices and house addresses,respectively.
In the chart shown here, the X-axis does not have a zero origin (presum-ably in order to make the differences between the data items clearer by having morescreen real estate to display a smaller range of data values).
Because of this translationof the origin, it is no longer possible to conclude in this chart that a bar twice as longas another bar encodes a value twice as large (for instance, bars representing housesWALNUT-6343 and VERMONT-637 in Figure 10).
Both axis translation and truncation--to compress empty regions in quantitative data----can lead to false inferences.
Similardecoding problems can occur with other encoding techniques as well, as when a quan-6 It is clear that explicitly reasoning about individual users and maintaining a record of user capabilitieswould result in better individualized descriptions than using a default user model, as is done here.Our system actually makes use of simple user models but we will not discuss this issue here.442Mittal, Moore, Carenini, and Roth Generating Chart CaptionsDays  on Market240-180 ?120.60.6123UO- - -~NeighborhoodN HANNAN CENTURY-21\ [~COLDWELLI 4) iU23\[D U3i N  C\] El3l I i l$0K $90K $180K $270K $360KHouse  Pr i ceThis chart shows information about house sales from data set PGH-23.
It emphasizes the rela-tionship between house prices and the number of days on the market.
The X-axis shows the houseprices, whereas the Y-axis shows the house's number of days on the market.
The house's listingagency is indicated by color.
The selling price is shown by the left edge of the bar, whereas theasking price is shown by the right edge.
The position of the mark shows the agency estimate.Figure 8Graphic with caption generated using strategy 2.titative attribute is mapped to the area of a circle, or nonlinear scales are used alongaxes.A more complex example of encoding technique complexity can be seen in Fig-ure 1.
Saturation and color are combined in a single encoding technique to expresstemperature.
Dark red indicates 100 degrees and dark blue indicates -40 degrees.
Asthe color gets paler (less saturated) it indicates a less extreme temperature.
For exam-ple, pale red (pink) indicates 65 degrees, while pale blue indicates -5 degrees.
Whiteindicates a transition point.
7 Thus both the frame of reference (the color saturationkey) and the technique are potentially complex here.
Figure 1 also illustrates rangecomplexity: the user must determine what the transition point is (whether it is thecenter of the scale, or some special value, such as 32 degrees F).
The graphic is notexplicit about whether the two ranges on both sides of this special transition point arebalanced.4.2 Grapheme ComplexityAlthough the encoder (e.g., positional encoding on an axis) and the mapping (e.g., thescale used along file axis) may both be simple, a grapheme that uses that encoder andmapping may still be difficult for users to interpret.
This may occur for a variety ofreasons ranging from too many mappings to problems in identifying the mappings.7 Not only is the encoding technique complex, but the user must understand the conventions u ed--blueto the cooler side of the scale, red to the warmer.443Computational Linguistics Volume 24, Number 3Number of Rooms10?
?
?
?
?
?
?
?
m ?
?
?
?
?O  ?Lot Size16000 l12000 -8000400001$0K?
% o o %  ,~ ?~8 o ?
?
?I I I I$120K $240K $360K $480KHouse PriceThese charts show information about house sales from data set PGH-23.
In the two charts, theX-axis shows the selling prices.
The top chart emphasizes the relationship between the numberof rooms and the selling price.
The bottom chart emphasizes the relationship between the lot sizeand the selling price.Figure 9Graphic with caption generated using strategy 3.Complexities of this type can arise from:?
multiple grapheme properties: In some cases, the presentations caninclude graphemes that have a large number of geometric propertiesused in mapping data attributes.
Consider, for instance, Figure 11.
Whilethe encoders in the figure are relatively straightforward, the fact thatfour different mappings are used here--x-position, y-position, shape, andcolor--can hinder comprehension.?
unclear geometric properties: Circular marks and horizontal bars areusually familiar to most readers and SAGE chooses them wheneverpossible.
However, in some cases the system may have to use graphemesthat are not as common.
In such cases, the reader has to not onlyunderstand the encoder and the mapping technique, but also understandwhich property of the grapheme is being used in each encoding.Consider, for instance, if a triangular mark is used in a plot chart: inorder to interpret its positional property, it is essential to know which ofits three vertices (or the center) is used in the mapping.?
semantic properties: The third type of grapheme complexity occurs ingraphemes that have subcomponents.
For instance if an icon of a truckwere to be used as a grapheme, and different subcomponents were usedin the mappings (e.g., speed of the truck to the wheel size, cargo type totank color), the reader must understand not only the various data tographeme mappings, but also the relationship between the varioussubcomponents.444Mittal, Moore, Carenini, and Roth Generating Chart CaptionsHouseBEECH-3237 ~MOREWOOD-508 L~PENHAM-6828 IVERMONT-637WALNUT-6343WOODWELL-6663 ~I$60KI I I I$120K $180K $240K $300KHouse PriceFigure 10Comprehension can be hindered by encoding technique complexities (e.g., a truncated X-axis.
)4.3 Ambiguous Mapping ComplexityA user's ability to identify the mapping of even simple techniques can be hinderedwhen dissimilar graphemes (or dissimilar properties of a grapheme) are used to mapto similar attribute types.
Consider for instance, the charts in Figures 12 and 13.
Theleft and right edges of the bar in Figure 12 refer to the selling-price and asking-price ofa house in the domain.
However, the X-axis represents prices in general, and there isno way to distinguish between the two from the figure itself.
Similarly, in Figure 13,the two text labels refer to two different prices, but the two attributes cannot bedistinguished from one another solely from the figure, s4.4 Composition ComplexityWhen multiple graphemes occur in a space, they can be confusing at first until theirrelationships to each other are clarified.
Compositions can result in clusters of twotypes:?
Cooperative Graphemes: For example, consider the chart shown inFigure 14.
The mark and label graphemes form an aggregate that mustbe considered together.
In this case, since the label conveying the realestate agency is slightly offset from the position on the X and Y axes, itcannot be interpreted as being related to a particular house and a date ofsale on its own.
Grapheme composition results in multiple graphemesbeing displayed as a spatially grouped conceptual unit--these need to beunderstood as such and interpreted accordingly.?
Interfering Graphemes: Unfortunately, grapheme composition does notalways result in a cluster where the graphemes are distinct and8 In the housing domain, it may be assumed that asking-price is either greater or equal to selling-price, butin fact, this is not always the case.
Buyers sometimes get into bidding wars that cause the selling priceto become greater than the asking price.445Computational Linguistics Volume 24, Number 3HouseBEECHWOOD-ii74BEECHWOOD-1950BEECHWOOD-2266BEECHWOOD-3237BOULEVARD-3931COLLEGE-637DOUGLAS-5919MOREWOOD-508PENHAM-6828SHADY-1205SHADY-2263SHADY-2908WALNUT-6343WELFER-1027WIGHTMAN-1236WILKINS-5735WOODWELL-6663$0K?\[\]\[\]A\[\]\[\]\[\]\[\]\[\]AAA\[\]Neighborhood?
POINT-BREEZEQ SHADYSIDEO SQUIRREL-HILLListing Agency?
CENTURY-21COLDWELL\[\]\[\]\[\]$80K $1 OK $240K $320KRouse Pr i ceFigure 11Comprehension difficulties can result from complex graphemes with multiple properties beingused in the encoding.non-occluding.
Consider, for instance, the chart shown in Figure 8.
Themark indicating the agency estimate of the selling price often overlapswith the interval bar showing the actual asking and selling prices.
Insome cases, the asking and selling prices are so close that the markindicating the agency estimate actually occludes the interval bar.
Clusterssuch as this can hinder interpretation and it is important that suchmappings be clarified.4.5 Alignment ComplexityAs illustrated in Figures 6, 7, and 9, alignment of multiple charts and/or tables can bea useful technique for supporting comparisons, rapid lookups for many attributes ofthe same object, and for maintaining consistent scales.
Whenever an alignment occurs,all but one of the charts become separated from the aligning axis labels and the relationbetween the aligned axis and the rest of the charts may not be clear.The complexity assessment module in the system is capable of identifying thegraphemes in the display that are complex for any of the five reasons described inthis section.
It annotates the picture representation generated by SAGE to indicate thegraphemes and their types of complexity.
The result of the complexity assessmentfor the Minard graphic--Figure 1--is shown in Figure 15.
As discussed earlier, forinstance, the mapping between the attribute temperature and the color of the line iscomplex for two reasons: (i) encoding complexity, because of the use of color andsaturation, and (ii) range complexity, because of the unequal distributions of warmand cold temperatures.
Figure 16 gives the complexity assignment for the graphic446Mittal, Moore, Carenini, and Roth Generating Chart CaptionsHouseBEECHWOOD-Ii74BEECHWOOD-1950BEECHWOOD-2266BEECHWOOD-3237BOULEVARD-3931COLLEGE-637DOUGLAS-5919MOREWOOD-508PENHAM-6828SHADY-1205SHADY-2263SHADY-2908WALNUT-6343WELFER-1027WIGHTMAN-1236WILKINS-5735WOODWELL-6663$0K\[\]I IC3IC3DII I\[\]I i$80K $160KHouse  Pr i ce\[113I I!$240K!$320KFigure 12Complexities can arise from ambiguous mappings (a).HouseBEECHWOOD-ii74BEECHWOOD-2266BEELER-3931DOUGLAS-5919PENHAM-6828SHADY-2263SQ-HILL-1405WELFER-1027WILKINS-5735Oct-89185K~i63KIiOK~i06K265K~255K95K\[\]89Kii2K\[~i00K132K\[\]i21K225Ko219K150K\[~i38K350Ko330KI i i iNov-89 Dec-89 Jan-90 Feb-90Sale DateFigure 13Complexities can arise from ambiguous mappings (b).shown in Figure 6.
In this case, the mapping between the attribute asking-price andthe bar is complex for three reasons: (i) grapheme complexity, since the interval baris a complex grapheme; (ii) ambiguous mapping, since from the graphic, it is notpossible to determine whether the attribute is mapped to the left edge or the rightedge of the bar; and (iii) composition complexity, since the bar and the mark can447Computational Linguistics Volume 24, Number 3HouseBEECH-3237MOREWOOD-508PENHAM-6828VERMONT-637WALNUT-6343WOODWELL-666320-Oct-89HannaColdwel lColdwel lCentury-21I I Ii -Nov-89 13-Nov-89 25-Nov-89DateColdwel lHannaI7-Dec-89'Figure 14Presentations can have clusters of cooperative graphemes.Data attributetemperaturetroop-sizestart-positionstop-positionbattle-citybattle-datebattle-locationGraphical Elementgrapheme, propertygrapheme, propertygrapheme, propertygrapheme, propertygrapheme, propertygrapheme, propertygraphemeComplexity Typeencoding complexityrange complexitygrapheme complexitycompositionn complexity (i)grapheme complexitycomposition complexity (i)grapheme complexitycomposition complexity (i)composition complexity (c)ambiguous mappingcomposition complexity (c)ambiguous mappingcomposition complexity (c)Figure 15Result of the complexity assessment module for the "Minard Graphic" in Figure 1 (i and c areused to indicate interfering and cooperating graphemes respectively).overlap and occlude ach other (indicated by i for "interfering").
The annotated picturerepresentation can then be used as one of the knowledge sources in the NLG systemto select and structure information appropriately in generating the captions.5.
Generating Explanatory CaptionsA high-level overview of the system divided into functional modules is shown inFigure 17.
A brief description of each module is given below.
Detailed descriptionsfollow later in the section.448Mittal, Moore, Carenini, and Roth Generating Chart CaptionsData attribute Graphical Element Complexity Typehouse axisasking-priceselling-priceagency-estimatedate-on-marketdate-soldlisting-agencygrapheme, propertygrapheme, propertygraphemegrapheme, propertygrapheme, propertygraphemealignment complexitygrapheme complexityambiguous mappingcomposition complexity (i)grapheme complexityambiguous mappingcomposition complexity (i)composition complexity (i)grapheme complexityambiguous mappinggrapheme complexityambiguous mappingFigure 16Result of the complexity assessment module for Figure 6.Text Planning Module.
The text planner takes as input the goal to generate a caption, thepicture representation generated by SAGE (annotated by the complexity module), andgenerates a partially ordered text plan.
The leaves of the text plan represent speechacts about propositions that need to be conveyed.Ordering Module.
The ordering module takes a partially ordered text plan and imposesa total order on the speech acts.
This may be based on (i) domain-specific knowledgeabout orderings (for instance, knowledge about temporal order of events), or in theabsence of this, (ii) knowledge about graphics (e.g., the left edge of a bar is discussedbefore the right edge of a bar).Aggregation Module.
The output of the ordering module is passed to an aggregationmodule that can combine multiple propositions into fewer, more complex ones.
Forinstance, the module may combine some propositions regarding a grapheme into onecomplex proposition for more natural output.Centering Module.
Once clauses are ordered and aggregated, coherence ofthe generatedtext can be further improved by selecting appropriate orderings between argumentsof each clause.
For this task, we have developed a selection strategy based on thecentering model.Referring Expression Module.
The referring expression module analyzes the picture rep-resentation and uses the discourse plan to determine appropriate r ferring expressionsfor the concepts in the speech acts.Lexical Choice and Realization Modules.
This lexical choice module picks lexical itemsand transforms the speech acts to functional descriptors (FDs) to be processed byFUF/SURGE (Elhadad and Robin 1992; Elhadad 1992), the realization module used togenerate the English text.5.1 Text Planning ModuleThe planner constructs text plans from its library of discourse action descriptions.The representation f communicative action is separated into two types of operators:449Computational Linguistics Volume 24, Number 3action operators and decomposition operators.
Action operators capture the conditions(preconditions and constraints) under which an action can be executed, and the effectsthe action achieves if executed under the appropriate conditions.
Preconditions specifyconditions that the agent should plan to achieve (e.g., the hearer knows a certain term),while constraints specify conditions that the agent should not attempt to plan to change(e.g., facts and rules about the domain).
Effects describe the changes that a discourseaction is intended to have on the hearer's mental state.
If an action is composite, theremust be at least one decomposition operator indicating how to break the action downinto more primitive steps.
Each decomposition operator provides apartial specificationfor a subplan that can achieve the action's effects, provided the preconditions are trueat the time the steps in the decomposition are executed.As an example of how action and decomposition operators are used to encode dis-course actions, consider the two operators in Figure 18.
These two operators describethe discourse action describe-space-mappings, whose only effect is achieving the statein which the reader knows all the data-to-grapheme appings hown.
The first oper-ator is an action operator and it indicates that descr ibe -space-mapp ings  can  be used toachieve the state where the reader knows about the mappings.
The second operatorin Figure 18 is one of the decomposition operators for the descr ibe -space-mapp ingsaction.
The decomposition of a nonprimitive action can be expressed either in termsof subactions (:steps slot), or in terms of subgoals of one action's effect ( : rewr i te  slot),or in terms of both.
For instance, the :rewrite slot of the decomposition i Figure 18specifies that one way to achieve describe-space-mappings's effect of having the hearerto know all the mappings in one space is to achieve the three subgoals of having thehearer to know all the interfering, cooperating, and vanilla mappings in that space.
9This example also illustrates how the graphical complexity metrics are used for con-tent selection by the text planner: just as this operator can be used to describe spacesin which all three types of graphemes are present, there are other operators that dealspecifically with encoder complexities, compositional complexities, etc.As illustrated by the second operator in Figure 18, decomposition operators mayalso have constraints, which indicate the conditions under which the decompositionmay be applied.
Such constraints often specify the type of information eeded forparticular communicative strategies, and satisfying them causes the planner to findcontent to be included in explanations.
For example, the constraints of the second oper-ator not only check that a single space is being described, but also find the graphemesof the three types used in the explanation, and the anchor mapping in this space.
Whenthe planner attempts to use a decomposition operator, it must try to satisfy all of itsconstraints.
If a constraint contains no unbound variables, it is simply checked againstthe knowledge source to which it refers.
However, if the constraint contains free vari-ables (e.g., ?int-graphs in the second operator), the system must search its knowledgebases for acceptable bindings for these variables.
In this way, satisfying constraintsdirects the planner to select appropriate content o include in explanations.
In the caseof the operator shown in Figure 18, the two preconditions that must be satisfied are(i) that the reader must be able to recognize the space (i.e., know which space is beingdiscussed, and the data set being visualized), and (ii) know what the anchor mappingin the space is (if any).
Anchor mappings refer to the mapping between a functionallyindependent attribute (FIA)---usually the key in the database schema--and the axis itis mapped to.
Thus, action and decomposition operators pecify how information canbe combined in a discourse to achieve ffects on the hearer's mental state.9 Vanilla graphemes are those that are neither interfering nor cooperating.450Mittal, Moore, Carenini, and Roth Generating Chart CaptionsInpu~cDataData CharacterizationPlan OperatorLibraryI f I Graphic ~L SAGE j j~KNN~ \[ Presentation|pictore \ , represe~,on~ Complexity ~\[ Metric Module \] I suggestions f r ~_ J \] picture modification~.. f ~ / to highlight examples--| Text P lann ing~ _~ ExampleI ~ ~_  Module rig--------generation ModuS)Ordering ~ \[ Optional Domain Specific Ordering Module 7 I Strategiesspeech acts orderedAggregation)Module~ speech acts aggregated( ) ModuleI iscourse plan annotated with centering formation( Referring ~Expression ModuleI onceptual descriptions in plan leaves replaced byreferring expressionsLexical Choic/Module ~1I FDsFUF/SURGE)~ English sentencesThese two charts show information about  ...picture presentation annotated with complexity assignmentsFigure 17System architecture: A functional-block diagram.451Computational Linguistics Volume 24, Number 3(define (action describe- space-mappings ):description "describe all mappings in a:parameters (?space):primitive nil:effect ( (know-all-mappings ?space) ) )space"(define (decomposition describe-space-mappings ):descnption "Describe mappings : +C+I+V":constraints ( (space-p ?space)(single-space?
?space)(get-interfering-graphemes ?space ?int-graphs)(get-cooperating-graphemes ?space ?coop-graphs)(get-vanilla-graphemes ?space ?vanilla-graphs)(get-anchor ?space ?anchor-axis ?anchor-domain)):preconditions ((recognize-space ?space)(know-mapping ?space ?anchor-axis ?anchor-domain)):steps ((begin (start ?space))(end (finish ?space))):rew~tes (((know-all-mappings ?space)((forall ?ig in ?int-graphs(know-all-interfering-mappings ?ig ?space))(forall ?cg in ?coop-graphs(know-all-cooperating-mappings ?cg ?space))(forall ?vg in ?vanilla-graphs(know-all-vanilla-mappings ?vg ?space))))))Figure 18Sample plan operators.5.1.1 Generating Discourse Plans.
Planning begins when a set of communicative goalsare posted to the text planner.
The system generates a plan by iterating through a loopthat refines the current plan (either decompositionally or causally), checking the planafter each refinement to ensure that it has not introduced any errors.
Decompositionalrefinement selects a composite action and creates a subplan for that action by addinginstances of the steps listed in the decomposition perator to the current plan.
Causalrefinement selects an unsatisfied precondition of a step in the plan and adds a causallink to establish the needed condition.
This is done either by finding a step already inthe plan that achieves the appropriate effect, or by using an action operator to createa new step that achieves the needed condition as one of its effects.
For a completedefinition of the algorithm, its computational properties, and its utility for discourseplanning, see Young, Pollack, and Moore (1994), and Young and Moore (1994).In the remainder of the section, we present the modules that follow the text plan-ning process and implement tactical decisions.
To clarify the discussion, we describehow each module contributes to the generation of clauses (3) to (5) in the samplecaption shown in Figure 19.5.2 Ordering ModuleThe steps in a completed text plan are partially ordered, and thus further processingmust be performed in order to generate a caption.
The order of execution of stepsin the plan may either be explicitly specified by the operator writer or may haveconstraints imposed on it by causal inks.
For instance, in the plan operator shownin Figure 18, all the steps corresponding to the goal recognize-space will be orderedbefore the steps corresponding to the goal know-all-mappings because recognize-spaceis a precondition.
However, most steps in the plan are not explicitly ordered and452Mittal, Moore, Carenini, and Roth Generating Chart CaptionsSample caption(1) This chart presents information about house sales from data-set TS-2480.
(2) The y-axis shows the houses.
(3) The house's elling price is shown by the left edge of the bar(4) whereas the asking price is shown by the right edge.
(5) The horizontal position of the mark shows the agency estimate.Figure 19A representative caption used to illustrate our discussions.do not have causal inks between them dictating the ordering.
The ordering moduletakes as input the discourse plan, with links specifying the ordering relations betweensubtrees, and orders the leaf nodes--the speech acts--based on a set of heuristics.
Inour application, for instance, unless otherwise indicated, the system will describe theleft edge of the bar before the right edge} ?The ordering module sorts first on the basis of the space ordering.
This is basedon the assumption that in the absence of any other discourse strategy (such as theneed to emphasize or compare properties of a concept across multiple spaces), thereader will browse the spaces from left to right.
After the plan steps have been sortedon a space-by-space basis, the module sorts plan steps on the basis of their graphicalmappings, using the following ordering heuristics:position > color > shape > size > text > othersFinally, within each resulting subset, the module orders steps by grapheme type usingthe following ordering:line set > bar set > mark set > text set > othersThe strategy of ordering first by graphical mapping and then by grapheme type isbased on our analysis of hand-generated captions.
We found that most captions tendedto be structured along the mappings rather than along the graphemes.Let us now examine how the system's ordering rules determine the orderingamong clauses 3-5 of the sample caption shown in Figure 19.
First, clauses 3-5 aregrouped together because they are all mappings to position.
Second, clauses 3-4 pre-cede clause 5 because bar set must precede mark set.
Finall.~ clause 3 precedes clause4, because of the conventional preference for left-to-right ordering between edges offloating bars.So far, we have examined the ordering strategy that the system will follow bydefault.
However, the ordering module can also take an optional input, a functionalspecification, which can be used to determine plan step orderings that do not con-form with the default ordering.
Using this optional specification, the system can takeadvantage of domain knowledge, such as temporal sequencing, which can play animportant role in discourse sequence.
For instance, in general it may be preferable tostate the mappings of the left and right edges of a bar in that order.
However, if theleft edge of a bar indicates elling-price and the right edge indicates asking-price, andthe usual temporal ordering between the events uggests that one discuss the asking10 This is conventional forlanguages that are written from left to right, and may be different inotherlanguages that are written from right o left.453Computational Linguistics Volume 24, Number 3price of a house before the selling price, this would lead to mentioning the right edgebefore the left edge, contrary to the default ordering.5.3 Aggregation ModuleOnce the speech acts are ordered, they are passed to the aggregation module.
In thegeneral case, aggregation i  natural anguage is a very difficult problem (Dalianis1996; Shaw 1995; Huang and Fiedler 1996).
Fortunately, our generation task requiresa type of aggregation that is relatively straightforward.
Our aggregation strategy onlyconjoins pairs of contiguous propositions about the same grapheme type in the samespace.
The module checks for grapheme types rather than specific graphemes to covercircumstances where, for instance, a chart may have a number of grey and black bars(which are different graphemes of the same type).
This enables the system to generatetext of the form "The grey bars indicate the selling price of the house, whereas the black barsindicate the asking price.
"When two propositions are combinable, namely they are about he same graphemetype in the same space, the system checks to see ff the two properties being discussedare contrastive in some way.
For instance, whether the two properties under consider-ation are the opposite edges of a bar, or are the X and Y axes, etc.
If so, the systempicks a contrastive cue phrase (e.g., whereas) to merge the clauses resulting from thetwo propositions, otherwise the system picks the cue phrase and.Let us now briefly examine how aggregation affected clauses 3-5 of the samplecaption in Figure 19.
Clauses 3-4 were conjoined because they are about the samegrapheme type, a horizontal bar, in the same space.
Moreover, the module placed awhereas cue phrase between the two clauses, because the opposite dges of a bar areconsidered contrastive properties.5.4 Centering ModuleOnce clauses are ordered and aggregated, coherence of the generated text can be fur-ther improved by selecting appropriate orderings between arguments of each clause.For this task, we have developed a selection strategy based on the centering model.Focus (e.g., Sidner 1979; Grosz 1977) and centering (e.g., Grosz, Joshi, and Weinstein1995) models are attempts at explaining linguistic and atttentional factors that con-tribute to local coherence among utterances.
Although focus and centering modelswere originally developed as foundations for understanding systems, they have fre-quently been proposed as effective knowledge sources for NLG systems.
In particular,for generating referring expressions (including pronominalization) (see Dale \[1992\], Ap-pelt \[1985\], and Maybury \[1991\]), for deciding when to combine clauses (subordinationand aggregation) (see Derr and McKeown \[1984\]), and finally for choosing appropri-ate inter/intraclause orderings, namely, ordering between clauses and between theirarguments ( ee Maybury \[1991\], Hovy and McCoy \[1989\], and McKeown \[1985\]).Details on centering theory and its relation to discourse structure can be found inGrosz, Joshi, and Weinstein (1995), Walker (1993), Walker, Iida, and Cote (1994), Groszand Sidner (1993), and Gordon, Grosz, and Gilliom (1993); for lack of space in thispaper, we only provide a minimal introduction to the basic terminology of centeringtheory.Centers are semantic objects (not words, phrases, or syntactic forms) that linkan utterance to other utterances in the same discourse segment.
Centering theoryprovides definitions for three different centers, and for four possible center transitionsbetween two adjacent utterances.
It also states two fundamental constraints on centermovement and realization.454Mittal, Moore, Carenini, and Roth Generating Chart CaptionsTable 1Center transitior~s.Cb(U~) = Cb(U~_i) Cb(Ui) ~4 Cb(U~_,)Cb(Ui) = Cp(Ui)Cb(U~) 74 Cp(Ui)Continue Smooth-ShiftRetain Rough-ShiftBasic Center  Def in i t ions  11?
Cf(U): The set of forward-looking centers, which contains all the entitiesthat can link the current utterance to the following one.
It is notconstrained by features of previous utterances.
Elements of Cf(U) areordered; the major determinant of the ranking on the Cf(U) isgrammatical role with subject > object > others.
12?
Cp(U): Highest ranking element of Cf(U)?
Cb(U): The backward-looking center (unique) is the highest rankingCf(Ui_l) realized in the current utterance Ui.
Cb(U) is a discourseconstruct, therefore the same utterance in different discourse segmentsmay have a different Cb.Center Transitions.
The four possible center transitions across pairs of utterances areshown in Table 1.The central tenet in centering theory is that discourse coherence of a text spanincreases (and a reader's cognitive load decreases) proportionately to the extent hatdiscourse within the span follows two fundamental centering constraints (Grosz, Joshi,and Weinstein 1995).
These are:Constra int  on real izat ion:  If any element in the set of forward-lookingcenters of an utterance (Ui) is realized by a pronoun in the followingutterance (Ui+i), then the backward-looking center of the followingutterance (Ui+l) must also be realized by a pronoun.Constra int  on  movement :  (i.e., centering transitions) Sequences ofCONTINUATIONS are preferred over sequences of RETAININGS; andsequences of RETAININGS are preferred over sequences of SHIFTINGS (andconsequently, smooth shifts are preferred over rough shifts).Grosz and her colleagues suggest that a competent generation system should applythe constraint on movement by planning ahead in an attempt to minimize the numberof SHIFTS in a locally coherent discourse segment (Grosz, Joshi, and Weinstein 1995).Our centering-based strategy implements this suggestion by selecting intraclauseorderings that enforce centering transitions consistent with a given discourse struc-ture.
The strategy is general and can be applied to any discourse structure, but to beeffectively applied to the generation of captions, some assumptions not supported in11 The following functions Cf(U), Cp(U), and Cb(U) apply to a particular utterance U and a particulardiscourse segment DS.
As in Grosz, Joshi, and Weinstein (1995), we assume DS fixed and we drop it asan argument.
Whenever the utterance argument U is not critical we drop it too.12 Other factors influence the ranking of Cf(U) elements.
The effects of word ordering, clausalsubordination, and lexical semantics are currently under investigation by other esearchers.455Computational Linguistics Volume 24, Number 3HouseBEECHWOOD-i I74BEECHWOOD-1950BEECHWOOD-2266BEECHWOOD-3237BOULEVARD-3931COLLEGE-637DOUGLAS-5919MOREWOOD-508PENHAM-6828SHADY-1205SHADY-2263SHADY-2908SQ-HILL-1405 I ~ :  - ~ ~*~,WALNUT- 6343WELFER-1027WIGH~MAN- 1236 ~ 'IWILKINS-5735 L~WOODWELL-6663 \[~ ~; '~ - ~ ,~  .... i, ,$0K $110K $220KHouSe Pr i cei i$330K $440KThis chart presents information about house sales from data-set TS-1742.
The Y-axis indicates the houses.
The dark gray bar shows the house's elling price whereasthe black bar shows the asking price.Figure 20The referring expression module uses color in this case to distinguish between the two typesof bars and the attributes mapped to them.terms of centering theory must be made.
The problem is that the NPs generated in thecaptions are often possessive and have complex syntactic structures (e.g., the sellingprice of the house, the mark's horizontal position) and centering theory is not yet clear onthe determination of centers in complex syntactic structures such as possessives andsubordinate clauses (Grosz and Sidner 1993).
To accommodate this problem we madetwo assumptions.
First, given possessives of the form "property of grapheme/entity",either the grapheme or the entity is the center, not their properties.
Second, even whenonly a property (e.g., selling-price, right edge) is mentioned, the corresponding entityor grapheme is the center.Our centering strategy processes the ordered speech acts sequentially and assumesthat text spans describing the mappings from properties of a grapheme to properties ofan entity are locally coherent discourse segments.
The strategy enforces the constrainton movement within each of these discourse segments by preferring a CONTINUATIONor a SMOOTH-SHIFT transition to a RETAIN or a ROUGH-SHIFT transition, respectively.This is done by keeping the highest-ranking forward-looking center of the first clauseof the segment (which is either an entity or a grapheme), as the Cp(Ui) of all thefollowing clauses in the same segment.
In this way, in all such clauses the Cb(Ui) andthe Cp(Ui) will be the same and, according to Table 1, this corresponds to forcing456Mittal, Moore, Carenini, and Roth Generating Chart Captionseither CONTINUATIONS or SMOOTH-SHIFTS.Furthermore, the strategy applies an additional constraint on movement: betweensegments dealing with different graphemes, the strategy explicitly marks the segmentboundaries by preferring ROUGH-SHIFT over SMOOTH-SHIFT and RETAIN over CONTIN-UATION.
This case is not mentioned in Grosz, Joshi, and Weinstein (1995).
However,since the system maintains local coherence in a segment by minimizing ROUGH-SHIFTSand RETAINS, it seems intuitive to prefer ROUGH-SHIFTS and RETAINS to emphasize thechange at segment boundaries (i.e., the boundaries between such segments should bemaximally incoherent).
Thus, in the caption generation application, when a text spandescribing the mapping for a grapheme (a discourse segment) is followed by a descrip-tion of a mapping for a different grapheme (another discourse segment), the centeringstrategy will try to force either a ROUGH-SHIFT or RETAIN to mark the segment bound-ary.
This is done by moving the Cb(Ui) of the clause following the boundary out ofthe clause front position.
That is, if the grapheme is the Cb(Ui), the domain entity isplaced in front of the clause, and vice versa in the other case.For example, consider the effect of the centering strategy on clauses 3--5 of thesample caption shown in Figure 19.
Since clauses 3 and 4 are about mappings fromproperties of the same grapheme--a horizontal bar they are assumed to belong tothe same discourse segment.
Therefore, the system keeps the Cp of clause 4 equalto the Cp of clause 3 by placing the possessive the house's asking price in front of theclause.
In contrast, since clauses 4 and 5 are about mappings from properties of dif-ferent graphemes, a RETAIN centering transition (as opposed to a CONTINUATION) wasenforced by moving the possessive corresponding to the Cb, the house's agency estimate,out of the front position.
Once intraclause orderings are determined by the centeringstrateg35 the annotated speech acts are passed to the referring expression module.5.5 Referring Expression ModuleThe referring expression module is largely based on the algorithm for incrementalinterpretation described in Dale and Reiter (1995).
The incremental interpretation al-gorithm can generate appropriate referring expressions by incrementally constructinga set of attributes that uniquely identify the desired referent.
These identifying at-tributes are selected based on a domain-specific default ordering.
In our case, the onlyreferential problem is identifying the graphemes, and often the type of the grapheme(e.g., "bar") is sufficient o do so.
13 However, sometimes, a graphic may contain mul-tiple graphemes of the same type.
In such cases, the system must utilize additionalperceptual properties (e.g., color, saturation, size, shape) to build an appropriate re-ferring expression.
For example, the referring expressions for the bars in the captionfor the chart shown in Figure 20 use color as an additional identifying attribute.Since our system generates multisentential captions, the referring expression mod-ule takes into account what is in focus at a given point in the discourse in order togenerate concise and natural expressions.
The referring expression module considersin focus all of the forward-looking centers (i.e., Cf) computed by the centering mod-ule, and simply removes identifying attributes if they are in the Cf at that point in thediscourse.
This strategy results in the more concise rephrasing:(3) The house's selling price is shown by the left edge of the bar (4) whereas the asking priceis shown by the right edge.
The horizontal position of the mark shows the agency estimate.13 For instance, we do not have to worry about issues uch as implicatures conveyed by lexical choices orthe use of non-basic-level classes, ince the set of objects and the available ways of referring to them inour context isso limited.457Computational Linguistics Volume 24, Number 3There are other forms of referring expression reduction due to discourse contextthat require amore sophisticated treatment.
Hand-written captions often radically sim-plify descriptions toexpress facts such as: "the third chart shows the neighborhood.
"However, the system-generated caption would express the underlying proposition,based on the data to grapheme mappings, as: "the position of the mark in the third chartshows the neighborhood."
The sequence of reductions shown below could achievethe more natural effect by repeatedly reasoning about he picture and the informationbeing conveyed by each statement.the position of the mark in the third chart shows the neighborhood (1)the mark in the third chart shows the neighborhood (2)the third chart shows the neighborhood (3)The system would need to realize that position was the only attribute of the markbeing used for a mapping, and position is always clear in a graph and need not ex-plicitly be mentioned; thus resulting in statement (2).
However, since the mark is theonly grapheme used in the graph, the system could leave off mentioning the mark aswell, thus resulting in statement (3).
There are two ways of dealing with this issue:(i) The system could apply iterative refinements of the referring expressions generatedby the planner, as done in the local brevity algorithm (Reiter 1990).
However, thissingle case would have substantially increased the computational cost of generatingreferring expressions in all cases, without significantly improving any of the other(perfectly appropriate) referring expressions generated by the module.
(ii) The sys-tem could recognize this specific situation at a higher level and process the speechacts appropriately to avoid this situation completely.
Thus, rather than consideringthis situation as a problem of generating an appropriate expression for the conceptposition of the mark in the third chart, we have chosen to push this problem up to theplanner level during content selection.
Consequently, there are operators that lookspecifically for situations such as this--single grapheme in a space, mapping a singleproperty--that re selected by the planner in such situations.
While this does tend tomuddy the distinction between the "high-level" planner and the "lower-level" tacticalprocessing--because the planner is now forced to deal with this one situation regard-ing referring expressions that should arguably be dealt with more properly by thereferring expression module---it does enable the system to generate appropriate xtswith a simpler, more efficient approach in this application.It should be noted that there is one additional type of referring expression thatour system is capable of generating.
This happens in situations when the graphicbeing explained is considered complex enough to require an example.
In such cases,the system attempts o highlight he grapheme corresponding to the tuple being usedin the example.
There are a number of ways in which the relevant grapheme canbe highlighted--with arrow, a circle surrounding the grapheme, a change in color,or another graphical annotation--and a corresponding umber of ways in which thecaption can then refer to the grapheme.
This is similar to the approaches used forgenerating cross-modal references discussed in the context of the COMET (McKeownet al 1992) and wIP (Andr6 and Rist 1994) projects.
This will be illustrated in the nextsubsection, which discusses the generation of examples.5.6 Example Generation ModuleIf the text planner encounters particularly complex data-to-grapheme appings, itcan attempt to present an example to clarify the problematic mappings.
Our currentimplementation is designed to trigger the example generation process in the case of in-terfering rapheme clusters where occlusion can hinder interpretation.
Plan operators458Mittal, Moore, Carenini, and Roth Generating Chart Captions(described in Section 5.1) contain constraints that check for the appropriate conditionsand establish goals for the generation of an example in the caption.
In response, theexample generation module selects a grapheme shown in the picture, finds the datavalues associated with the individual grapheme, and constructs an example that canbe used by the text planner.
Additionally, the example generator also posts a requestto SAtE to highlight the relevant instance in the picture.
If the highlighting requestsucceeds, the example generator annotates the example with this information and theresulting caption mentions the highlighted grapheme.
Currentl~ this is the only case inwhich the caption generation mechanism can influence the graphic design.
A captionfragment hat includes an example is shown below:For example, as shown in the highlighted tuple, 3237 Beechwood Boulevard's asking price is79900 dollars and its selling price is 65000 dollars.
Its agency estimate is 79781.625dollars.
Its neighborhood is Squirrel Hill.There are a number of issues relevant o the generation of captions that integrateexamples and text (Mittal and Paris 1992, 1993).
We will not discuss them here indetail because the context in which our current system generates explanations i veryrestricted (as compared to the general case of expository text in which examples aretraditionally used when novel or abstract concepts are being introduced).
The maindifference between generating examples for purely textual descriptions and our currentapplication is in the selection of values used for illustration: one of the constraints inour current situation is the ability of the reader to identify the grapheme in question.Rather than use a strategy that finds and uses either extreme, limiting values, or moreprototypical values, the current application requires the selection of a grapheme thatis easy to identify and that facilitates the interpretation of values mapped to it.
Toenable this, the system must be able to reason about individual graphemes as well asthe picture as a whole: which graphemes are not crowded by other graphemes, arenot too small thin or otherwise unconventional to make interpretation difficult, havedata values mapped to them that can be discussed in the caption 14, etc.6.
System Implementation and Evaluation: A DiscussionIn general it is essential to empirically evaluate theories and systems that purportedlyimplement them.
Not only do evaluations help others understand the strengths andlimitations of various hypotheses and systems, but they also facilitate comparisonsbetween competing claims in many cases.
However, NLG evaluations are considereddifficult (Hovy and Meteer 1990).
NLG systems can be evaluated at many differentlevels, some which are orthogonal to each other.
Our case is no exception.
There areat least three different, and equally important questions that one could investigatefurther:validity of the complexity metric: This is perhaps the most criticalaspect, since without a valid complexity metric, the system would not beable to generate reasonable captions irrespective of how well any/all ofthe other components performed.
The only way to corroborate thecomplexity metrics we discussed here would be through rigorous userexperiments; fortunatel~ a recent dissertation on graph comprehension14 This situation often occurs in maps, when certain tuples are better for examples because they're closeto landmarks that can be used to identify them.459Computational Linguistics Volume 24, Number 3(Shah 1995) looked at some of the factors in our complexity metrics andfound that many of the factors used were indeed correlated with theincreased times required to interpret graphs and charts.?
validity of the discourse strategies: The paper discussed three discoursestrategies for structuring information presented in the captions.
There areat least two ways to evaluate a set of strategies used: (1) We couldperform a corpus analysis on a different set of charts and captions thanthose used to initially infer the strategies, in an effort to see how wellthey fit the test set: this is the usual approach in machine learning, wherethe learning and test sets are kept separate for precisely this reason.
Thiswould require significant resources to find and code charts and theircaptions for both the data displayed and the discourse strategies used,but it would help determine whether the set of discourse strategies wehad come up with was both consistent and complete.
(2) Another way toevaluate the discourse strategies would be to conduct usercomprehension tests with various charts and captions generated usingdifferent strategies at random: while this would be less efficient attesting the set of strategies for completeness, it would allow us tovalidate that a particular strategy (from our set of three) was best suitedfor particular types of charts.?
utility of the captions generated: This is really the "value-added" test:are the captions and the graphics together better than the graphics alonefor some purpose?
If so, the value of generating the captions would beconfirmed.
We conducted an informal, subjective valuation of thesystem over a period of two years.
Whenever users interacted with SAGEand were unable to understand a graphic, we suggested that theygenerate a caption.
Later on, we requested feedback on their experience:whether the captions were useful or not, and if they would have liked tosee something different.
We can categorically state that the captionsclearly help in understanding the graphic being presented.
The need fornatural anguage xplanations seems to arise every time a novel,complex graphic is generated--something that happens quite frequentlywith SAGE.A large part of the work we have discussed in this paper is system-independentand applicable to any automatic graphic design system.
Perhaps the most surpris-ing aspect about our current implementation is how far one can get with such asimple architecture.
We made certain simplifying decisions initially in order to geta prototype implemented.
Surprisingly few of these simplifying assumptions wereproblematic down the line.
An example of this is our pipelined architecture.
MostNLG researchers agree that the various modules in a NLG system need to be stronglyinterconnected with bidirectional communication and control and use shared datastructures.
We started off by using a pipelined architecture and were surprised to findthat the simplifications eemed to be problematic in only one situation (which wewere able to get around by planning appropriately).
There are several advantages ofa pipelined approach as in our case: not only is it easy to design, implement, and testeach module independently, it also becomes easy to extend the functionality of anyindividual module without significantly affecting the others.
While such a simplifiedarchitecture will certainly not suffice for all generation tasks, this is a strong argumentfor trying this minimal approach to see where it falls short and why.460Mittal, Moore, Carenini, and Roth Generating Chart CaptionsOver the last two years, this system has been used to generate captions for severalhundred figures in different domains (housing-sales, Napoleon's march of 1812, logis-tics transportation, scheduling, etc.).
Porting the system from one domain to anotherusually requires only specifying the lexicon for the new domain (e.g., battle, troops,etc.).
The fact that the captions generated in each of these---quite different--domainsare deemed useful and natural by users is testimony to the effectiveness of the captiongeneration mechanism currently in place.It should be noted that there are two shortcomings in the system that will beaddressed in future work: (1) the caption generation system, as described here, cannot,in general, modify the graphics designed by SAGE.
There are several cases where thiscapability would be extremely useful, but the caption generation system describedhere was designed to work after SAGE had designed and rendered the graphic.
Thereis one specialized case where coordination currently occurs, which is when the captiongenerator presents an example.
In that case, the caption generator can request that thegraphemes corresponding to the tuple values used in the example be highlighted in thepicture; (2) the system does not, as yet, analyze the data set for interesting patterns orclusters of data points.
To do this, the system will need a clustering analysis modulethat can be used by the caption generator.
As a result, the system cannot generatecaptions of the sort "this chart shows that sales were flat throughout 1995, but rose sharply in1996."7.
Related WorkMost previous efforts in generating intelligent multimedia presentations have focusedon coordinating natural language and graphical depictions of real world devices (e.g.,military radios \[Feiner and McKeown 1991\] and coffee makers \[Wahlster t al.
1993\])for generating instructions about their repair or proper use.
These projects tackledimportant problems such as apportioning content o media and generating cross-references between them.
Research as also focused on issues regarding the generationof coordinated presentations in applications where the graphics are familiar, or possessan obvious mapping between the data set and a graphical image (e.g., weather maps\[Kerpedjiev 1992\] and network diagrams \[Marks and Reiter 1990\]).Our work differs from these projects in two ways.
The first difference concernsthe type of data that our system deals with.
Unlike the presentations generated bythe systems mentioned above, presentations generated by SAGE are usually based onabstract or relational information (e.g., census reports, logistics data, hospital admin-istration data, real estate sales data), lacking any obvious graphical depiction.
Second,although our long term goal is to generate coordinated multimedia explanations usinginformational graphics and natural anguage, our focus in this paper was on generat-ing effective natural language xplanations about he graphical presentations.
In orderto do this, the system had to explicitly reason about the perceptual complexity of thepresentation.
Generating such captions is an important component of constructingmultimedia explanations involving integrative graphical displays.The POSTGRAPttE system (Fasciano 1996; Fasciano and Lapalme 1996) is the clos-est related research effort.
As in our work, PoSTGRAPI-IE generates statistical graphicsand accompanying captions.
However, the issues considered in our work differ fromthose in POSTGRAPI-IE in several ways and both the text and the graphics generatedby PosTGRAPHE emphasize aspects orthogonal to the ones considered in our project.For instance, PoSTGRAPI-IE can take as input a list of aspects that should be con-veyed by the presentation.
(These goals are represented in the system as a predefinedset of templates, uch as, "show the evolution of <attribute-name-I} with respect o461Computational Linguistics Volume 24, Number 3(attribute-name-2).")
This information is then used by POSTGRAPHE not only to gen-erate an appropriate type of diagram (e.g., a line chart), but also to generate a captionthat explicitly captures the specific aspects of interest, such as: "The profits were attheir highest in 1975 and lowest in 1974, with about half their 1975 value."
This is incontrast to our system, which does not reason about trends or relationships betweendifferent data points shown in the graphic.
Instead, our work has focused on describingcomplex data-to-grapheme appings and deriving metrics for perceptual complexity.This is due, in part, to the nature of the graphical presentations that the two systemscan design.
SAGE, for instance, is capable of designing novel graphical presentationsfor very complex data sets, using techniques such as multiple grapheme compositionand space alignment to facilitate cross-attribute comparisons.
The range of graphicalcapabilities in PoSTGRAPHE is more limited.
Combined with the fact that the graphicsare generated in response to an explicit user goal, user comprehension problems inPOSTGRAPHE are less likely than in our system.
Perhaps in light of this, PoSTGRAPHEdoes not need to explicitly analyze its graphic presentations for potential ambiguitiesor perceptual complexities, and the captions accompanying the graphic do not takethese factors into account.However, our current implementation, described in the paper, should not beconfused with our long term research agenda; it was designed as a framework toevaluate more sophisticated capabilities.
These include some of the capabilities thatPOSTGRAPHE has, particularly those dealing with the generation of information abouttrends and pattems.
We plan to extend the approach used by POSTGRAPHE to takeinto account both the writer's goals and domain- and data-specific aspects.
To thisend, we are developing a language to express presentation i tentions, taking into ac-count our experiences as well as the language used in PosTGRAPHE.
Furthermore,whereas the sequence of presentation goals to be achieved are part of the input toPOSTGRAPHE, our new framework generates these dynamically by integrating a dataanalysis module with a discourse planner.
The data analysis module is being designedto identify all possible relevant aspects of the data based on the domain specificationand an analysis task.
The planner can use a variety of strategies to select and organizethese aspects into complex arguments hat can be realized as presentations combiningboth text and graphics (see Kerpedjiev et al \[1997\] for further details on our newframework).8.
Conc lus ions  and Future WorkCaptions that explain novel or creative graphics can be crucial in understanding howdata and various relations are expressed in them.
This paper presents a frameworkfor generating explanatory captions for information graphics.
The system generatescaptions based on: (1) a representation f the structure of the graphical presentationand its mapping to the data it depicts, (2) a framework for identifying the perceptualcomplexity of graphical elements, and (3) the structure of the data expressed in thegraphic.One of the strengths of our approach is that the system is able to generate surpris-ingly effective and comprehensible d scriptions in the absence of a detailed semanticmodel for the domain.
The captions hown in this document were generated usingonly the data characterization used by SAGE for designing the visual presentation andan extremely basic lexical representation.
Thus, the caption generation mechanism canbe quickly and easily transferred to another domain (the only thing required is alexicon for the new terms).
However, this is also a limitation, because under certaincircumstances, the system generates seemingly odd descriptions.
This occurs in cases462Mittal, Moore, Carenini, and Roth Generating Chart Captionswhere the underlying database representation happens to contain attribute specifica-tions that differ from the way they would normally be described in discourse.
Forinstance, if the database schema happened to relate house attributes uch as houseaddress, number of rooms, and sale price to the owner of the house, rather than thehouse itself, the system would generate statements such as "John's sale price is ... ".A secondary limitation of our implementation is that it does not generate generalgraphical annotations.
While the system can (and does) highlight specific graphemesin the presentation if so required by the planner (currently done to single out thetuple being used in an example), the system does not coordinate the generation ofgraphical keys and the captions.
This is because our speech act language does notpermit bidirectional communication between the text planner and SAGE.
The abilityto specify arbitrary graphical annotations in the speech act language would make thecurrent simple specification quite complex.
As we extend the planning framework togenerate both the text and the graphics, this will be remedied as well.There are two ways to facilitate an effective use of a graphic: (1) explaining how thegraphic expresses its data, and (2) conveying what aspects of the data are relevant tothe current user's analysis task.
In the work described in this paper, we have addressedthe first issue.
We are currently working on the second one.Appendix A: The Speech Act Specification<speech-act> ::= ((PROCESS <symbol>)(CIRCUM <circum-expr>)(AGENT <entity-expr>)(AFFECTED <entity-expr>))I((PROCESS ASCRIPTIVE)(CIRCUM <circum-expr>)(IDENTIFIED <entity-expr>)(IDENTIFIER <entity-expr>))<circum-expr> ::= :NONE I(<symbol>+) i(0NLY-0NE <symbol>) J(<position> <symbol>) l(EXAMPLE <symbol>)<entity-expr> ::= :NONEI(<symbol>+)l(0NLY-0NE <symbol>) I(:SET (<symbol>+))(:PROP <entity-expr> <entity-expr>)(RELATIONSHIP (:SET (<symbol>+))(:SET (<symbol>+))) l(DATA-SET (NAME (<symbol>))(RELATION (<symbol>))) i(<number> <symbol>)<position> ::= LEFT i RIGHT i MIDDLE f T0P I BOTTOMFigure 21The BNF for specifying speech acts in our system.463Computational Linguistics Volume 24, Number 3STEP: (SPEECH-ACT((PROCESS PRESENT)(CIRCUM :NONE) (AGENT (CHART))(AFFECTED(DATA-SET (NAME (:SET (TS-2480)))(RELATION (:SET (HOUSE-SALES-INF0))))(ANCHOR DOM-2516))))STEP: (SPEECH-ACT((PROCESS SHOW)(CIRCUM (:0NLY-0NE CHART)) (AGENT (Y-AXIS))(AFFECTED(ANCHOR (Y-AXIS) DOM-2589))))STEP: (SPEECH-ACT((PROCESS SHOW)(CIRCUM (:0NLY-0NE CHART))(GRAPHEME HORIZONTAL-INTERVAL-BAR-SET)(AGENT(:PROP (XI) (HORIZONTAL-INTERVAL-BAR-SET)))(AFFECTED(:PROP ((:SET (DOM-2512))) (DOM-2589 DOM-2516)))(ANCHOR DOM-2516)))STEP: (SPEECH-ACT((PROCESS SHOW)(CIRCUM (:0NLY-0NE CHART))(GRAPHEME HORIZONTAL-INTERVAL-BAR-SET)(AGENT(:PROP (X2) (HORIZONTAL-INTERVAL-BAR-SET)))(AFFECTED(:PR0P ((:SET (DOM-2517))) (DOM-2589 DOM-2516)))(ANCHOR DOM-2516)))STEP: (SPEECH-ACT((PROCESS SHOW)(CIRCUM (:0NLY-0NE CHART))(GRAPHEME NIL)(AGENT (MARK-SET))(AFFECTED(:PROP ((:SET (DOM-2590))) (DOM-2589 DOM-2516)))(ANCHOR DOM-2516)))This chart presents information about house sales from data-set TS-2480.
The y-axis shows thehouses.
The left edge of the bar shows the house's elling price whereas the right edge shows the?
asking price.
The mark shows the agency estimate.Figure 22Plan steps and the corresponding caption generated.
(Terms such as DOM-2516 are pointers todomain concepts and attributes in the KB.
)AcknowledgmentsThis work was conducted under theauspices of DARPA grant DAA-1593K0005.The results and opinions reported here arethose of the authors and do not necessarilyrepresent the views of DARPA or theU.S.
Government.Joe Mattis helped formulate andimplemented the SAGE graphical complexitymetric.
Other members of the SAGE projectwho participated in the design of thissystem at various points include JakeKolojejchick, Mark Derthick, StefanKerpedjiev, and Nancy Green.
Help464Mittal, Moore, Carenini, and Roth Generating Chart Captionsin preparing some of the figures for thispaper came from Donald J. Mulder.
The firstauthor would like to acknowledge help withsome questions about FUF/SURGE fromCharles Callaway.
We are grateful to fouranonymous reviewers who helpedsubstantially improve the paper.
It goeswithout saying all remaining errors aresolely our fault.ReferencesAndrg, Elisabeth and Thomas Rist.
1994.Referring to world objects with text andpictures.
In Proceedings ofCOLING-94,pages 530-534.Appelt, Douglas.
1985.
Planning EnglishSentences.
Studies in Natural LanguageProcessing.
Cambridge University Press.Beattie, Vivien and Michael John Jones.1994.
Information design andmanipulation: Financial graphs incorporate annual reports.
InformationDesign Journal, 7(3):211-226.Casner, Steven.
1991.
A task-analyticapproach to the automated design ofgraphic presentations.
ACM Transactionson Graphics, 10(2):111-151, April.Cleveland, William S, and Robert McGill.1987.
Graphical perception: The visualdecoding of quantitative information ongraphical displays of data.
Journal of theRoyal Statistical Society, 150 (Series A, Part3):192-229.Dale, Robert.
1992.
Generating ReferringExpressions.
ACL-MIT Series in NaturalLanguage Processing.
The MIT Press.Dale, Robert and Ehud Reiter.
1995.Computational interpretations of theGricean maxims in the generation ofreferring expressions.
Cognitive Science,19:233--263.Dalianis, Hercules.
1996.
Concise NaturalLanguage Generation from FormalSpecifications.
Ph.D. thesis, Royal Instituteof Technology/Stockholm University,June.Derr, Marcia A. and Kathleen R. McKeown.1984.
Using focus to generate complexand simple sentences.
In Proceedings off theTenth International Conference onComputational Linguistics, COLING,pages 319-326.Elhadad, Michael.
1992.
Using Argumentationto Control Lexical Choice: A FunctionalUnification Implementation.
Ph.D. thesis,Columbia University, New York, NY.
(TheSURGE grammar for FUF is available viaanonymous FTP at:tip: / / www.cs.columbia.edu / fuf).Elhadad, Michael and Jacques Robin.
1992.Controlling content realization withfunctional unification grammars.
InR.
Dale, E. Hovy, D. Rosner, and O. Stock,editors, Proceedings ofthe Sixth InternationalWorkshop on Natural Language Generation.Springer Verlag.Fasciano, Massimo.
1996.
Gdndration i tegrdede textes et de graphiques statistiques.
Ph.D.thesis, University of Montreal, Montreal,Canada.Fasciano, Massimo and Guy Lapalme.
1996.PostGraphe: A system for the generationof statistical graphics and text.
In DoniaScott, editor, Proceedings ofthe EighthInternational Workshop on Natural LanguageGeneration, Brighton, U.K.Feiner, Steven K. and Kathleen R.McKeown.
1991.
Automating thegeneration of coordinated multi-mediaexplanations.
Computer, 24(10):33-42,October.Gordon, Peter C., Barbara J. Grosz, andLaura A. Gilliom.
1993.
Pronouns, names,and the centering of discourse.
CognitiveScience, 17(3):311-349.Grosz, Barbara J.
1977.
The representationand use of focus in dialogueunderstanding.
Technical Report 151, SRIInternational, Menlo Park, CA.Grosz, Barbara J., Aravind K. Joshi, andScott Weinstein.
1995.
Centering: Aframework for modelling the localcoherence of discourse.
ComputationalLinguistics, 21(2):203-226.Grosz, Barbara J. and Candace Sidner.
1993.Lost intuitions and forgotten intentions.In Workshop on Centering Theory inNaturally-Occurring Discourse.Hegarty, Mary and Marcel A.
Just.
1993.Constructing mental models of machinesfrom text and diagrams.
Journal of Memory& Language, 32(6):717-742, December.Hov N E. H. and K. F. McCoy.
1989.Focusing your RST: A step towardgenerating coherent multisentential text.In Proceedings ofthe Conference oftheCognitive Science Society, Aim Arbor, MI.Hovy, Eduard and Marie Meteer, editors.1990.
Proceedings ofthe AAAI Workshop onEvaluating Natural Language Generators.AAAI, Boston, MA.Huang, Xiaorong and Armin Fiedler.
1996.Paraphrasing and aggregatingargumentative text using text structure.
InProceedings ofthe 8th International Workshopon Natural Language Generation.Kerpedjiev, Stephan.
1992.
Automaticgeneration of multimodal weather eports465Computational Linguistics Volume 24, Number 3from datasets.
In Proceedings ofthe 3rdInternational Conference on Applied NaturalLanguage Processing, pages 48-54, Trento,Italy.Kerpedjiev, Stephan, Giuseppe Carenini,Steven F. Roth, and Johanna D. Moore.1997.
Integrating planning and task-baseddesign for multimedia presentation.
IProceedings ofthe Second InternationalConference on Intelligent User Interfaces (IUI"97), pages 145-152, Orlando, FL, January.Large, Andrew, Jamshid BeheshG AlainBreuleux, and Andre Renaud.
1995.Multimedia nd comprehension: Therelationship among text, animation, andcaptions.
Journal of the American Society forInformation Science, 46(5):340-347, June.Mackinlay, Jock D. 1986.
Automating thedesign of graphical presentations ofrelational information.
ACM Transactionson Graphics, 5(2):110-141, April.Marks, Joe W. 1991.
Automating the Design ofNetwork Diagrams.
Ph.D. thesis, HarvardUniversity, Cambridge, MA.Marks, Joe W. and Ehud Reiter.
1990.Avoiding unwanted conversationalimplicatures in text and graphics.
InProceedings ofthe Eighth National Conferenceon Artificial Intelligence (AAAI-90),pages 450-456, Boston, MA.
AAAI,AAAI/MIT Press.Maybury, Mark T. 1991.
Topical' temporal,and spatial constraints on linguisticrealization.
Computational Intelligence,7-4:266-275.McKeown, Kathleen R. 1985.
Text Generation:Using Discourse Strategies and FocusConstraints to Generate Natural LanguageText.
Cambridge University Press,Cambridge.McKeown, Kathleen, Steve Feiner, JacquesRobin, Dor6e Seligmann, and MichaelTanenblatt.
1992.
Generatingcross-references for multimediaexplanation.
In Proceedings ofTenthNational Conference on Artificial Intelligence,San Jose, CA, July 12-17.Mittal, Vibhu O. and C6cile L. Paris.
1992.Generating object descriptions whichintegrate both text and examples.
InProceedings ofthe Ninth Canadian ArtificialIntelligence Conference (AI/GI/V192),pages 1-8.
Canadian Society for theComputational Studies of Intelligence(CSCSI), Morgan Kaufmann Publishers.Mittal, Vibhu O. and C6cile L. Paris.
1993.Automatic documentation generation:The interaction between text andexamples.
In Proceedings ofthe ThirteenthInternational Joint Conference on ArtificialIntelligence, pages 1158-1163, Chambery,France.
IJCAI.Nugent, Gwen C. 1983.
Deaf students'learning from captioned instruction: Therelationship between the visual andcaption display.
Journal of Special Education,17(2):227-234.Reiter, Ehud.
1990.
The computationalcomplexity of avoiding conversationalimplicatures.
In Proceedings ofthe 28thAnnual Meeting, pages 97-104.
Associationfor Computational Linguistics.Roth, Steven F. and William E. Hefley.
1993.Intelligent multimedia presentationsystems: Research and principles.
InIntelligent Multimedia Interfaces.AAAI/MIT Press, Menlo Park CA,pages 13-59.Roth, Steven F., John Kolojejchick, JoeMattis, and Jade Goldstein.
1994.Interactive graphic design usingautomatic presentation k owledge.
InProceedings ofCHI'94: Human Factors inComputing Systems, Boston, MA.ACM / SIGCHI.Roth, Steven F. and Joe Mattis.
1990.
Datacharacterization forintelligent graphicspresentation.
I  Proceedings ofthe 1990Conference on Human Factors in ComputingSystems, pages 193-200, New Orleans, LA.ACM/SIGCHI.Schmid, Calvin F. 1983.
Statistical Graphics:Design Principles and Practices.
John Wileyand Sons.Shah, Priti.
1995.
Cognitive Processes in GraphComprehension.
Ph.D. thesis, CarnegieMellon University, Pittsburgh, PA.Shaw, James.
1995.
Conciseness throughaggregation i text generation.
InProceedings ofthe 33rd Annual Meeting(Student Session), pages 329-331.Association of Computational Linguistics.Sidner, Candace L. 1979.
Towards aComputation Theory of Definite AnaphoraComprehension in English Discourse.
Ph.D.thesis, MIT, Cambridge, MA.Tufte, Edward R. 1983.
The Visual Display ofQuantitative Information.
Graphics Press,Cheshire, Conn.Wahlster, Wolfgang, Elisabeth Andr6,W.
Finkler, H. J. Profitlich, and ThomasRist.
1993.
Plan-based integration ofnatural-language and graphicsgeneration.
Artificial Intelligence,63(12):387-427, October.Walker, Marilyn A.
1993.
Initial contexts andshifting centers.
In Proceedings oftheWorkshop on Centering Theory inNaturally-Occurring Discourse, Columbus,OH.
ACL.Walker, Marilyn, Masayo Iida, and SharinCote.
1994.
Japanese discourse and the466Mittal, Moore, Carenini, and Roth Generating Chart Captionsprocess of centering.
ComputationalLinguistics, 20(2):193-232.Young, R. Michael.
1997.
The LongBowDiscourse Planner.
Available at URLhttp: / / pogo.isp.pitt.edu / young / longbow /longbow.html.Young, R. Michael and Johanna D. Moore.1994.
DPOCL: A principled approach todiscourse planning.
In Proceedings oftheSeventh International Workshop on NaturalLanguage Generation, pages 13-20,Kennebunkport, ME, July.Young, R. Michael, Martha E. Pollack, andJohanna D. Moore.
1994.
Decompositionand causality in partial-order planning.
InProceedings ofthe Second InternationalConference on AI and Planning Systems,pages 188-193, Chicago, July.467
