CONTROL STRUCTURES FOR ACTIONS IN PROCEDURAL TEXTS AND PT-CHARTYoshio MomouchiDIVISION OF INFORMATION ENGINEERINGFACULTY OF ENGINEERING, HOKKAIDO UNIVERSITYSAPPORO 060, JAPANThis paper describes a partial taxonomy ofcontrol structures for actions in proceduraltexts.
On the basis of the taxonomy, we examinenatural language expressions for control struc-tures in Japanese procedural texts and presentPT (Procedural Text) -chart which representsthe structure of a procedural text.IntroductionCookbooks, route instructions, machineassembly instructions and algorism descriptions, which are written in natural languages, andsorting programs, which are written in program-ming languages, are examples of proceduraltexts.
There are many points at which naturallanguage procedural texts and programs may beconsidered on common ground.A procedure is composed of a sequence of actionsintended to achieve a goal.
Control structuresdetermine patterns of behavior for action se-quences.
An action is something an actor doesor can do.
An action is enabled by certainstates.
An action acts on objects and causesthe change of states of objects.In programs, such concepts as objects, states,actions and control structures are definedexplicitly.
How are these concepts identifiedin natural language texts?
What expressionsrepresent these concepts?
We think it most nec-essary that we have a right understanding ofthese concepts to understand procedural texts.In Japanese procedural texts, actions are mostlyexpressed by verbs and control structures areexpressed by nouns, adverbs, auxiliary verbs,postpositional words and so on.
The primary verbis a procedure call in programs.
Other syntac-tic structures are used to embed the procedurecall information.
Control structures in naturallanguage procedural texts are more complex andricher than in programs.
The control informationis embeded within broad range of syntacticstructures.
We classify control structures intotwo groups, temporal and behavioral controlstructures, which are respectively associatedwith temporal and behavioral aspects of actionsequences, and examine Japanese language expres-sions for control structures.In programs, several proposals, e.g.
BNF nota-tion and a flowchart techniques have been madefor techniques supporting the formal descriptionof the structure or development of a program.Two trials which use BNF notation and PT-chartare made for a formal description of the struc-ture of a natural language procedural text.A procedural text.has the static (organization)structure and the dynamic (control) structure.It is highly desirable that a formal representa-tion framework of a procedural text has thepower to represent both the structures.PT-chart is a graphical representation, whichhas the power.L.A.Miller considered syntactic and seman-tic structures in English recipe texts) Heshowed that all of the action-encoding mecha-nisms are based on the concept of a procedurecall in the sense of computer programs, varioussyntactic structures are used to embed the callinformation and any procedure may be decompos-able to successively less complex procedures.He also examined types of verb qualificationsin the texts and classified cases controllingthe action into seven groups.On the basis of his studies, we consider furtherdetails of text structures, control structuresand action-encoding mechanisms in proceduraltexts, especially in Japanese.
This research isan underlying study for the semantic analysisof procedural texts.Procedural textWe chose texts of a cookbook, "Family Cook-ing" by K.Okamoto, as procedural texts.We examined texts of 69 Japanese cookings whichare a subset from "Family Cooking".
We call themData.
Examples from Data are given in Japaneseenclosed by brackets \[\] and some of them haveEnglish translations enclosed by quotation marks,,.In cookings, objects which actions act on andactors who do actions are as follows,objects: ingredients, seasonings, cookwaresactors : men and/or womenThe framework of a cooking text is roughlyconstructed by the following components in orderof the description.
(a) name (of a cooking)(b) remarks(c) ingredients: quantity, notes(d) preparations (sub) : preparation for eachingredient(e) preparations (main) : cooking, seasoning,finishing, dishing(a), (b), (c) and (d) are included in alldescriptions of 69 cookings and the contents arealmost the smne.
(e) has many different contents.But the construction of cooking, seasoning,finishing and dishing is most common.We call a unit delimitted by a period in a texta sentence.
Sentences are classified into twogroups depending on the finishing style.108(i) sentence finishing with a noun\[ raNgiri, ~koto, ~mono (noun)\](ii) sentence finishing with other words\[ yuderu (verb), ~te oku, ~te iru (verb),yoi (adjective), ~seru (auxiliary verb),nikui (suffix)\]Sentences are classified into six groups depend-ing on the contents.
(i) action sentence, which describes actions\[ika wa mizuaraisi, omote no kawa o muku\]'wash and peel the squids'(ii) state sentence, which describes states\[zeNbu de yottu ni wakareru\]'it has separated into four pieces'(iii) action-and-state sentence, which describesactions and states\[nitatte kure ba sato to miriN o kuwaeru\]'when the mixture comes to a boil, add the sugarand mirin'(iv) feeling sentence, which describes writer'sfeeling\[soko no fukai kobati ga yoi\]'one had better use the small deep dish'(v) explanation sentence, which describes anexplanation about ingredients or cookwares\[unerigusi to iu\]'it is called a winding spit'(vi) mixed sentence, which describes more thantwo of actions, states, feelings and explanations(except for (iii))Most sentences from Data are grouped into (i) or(iii).
Some examples of action-and-statesentences are given below.
States are generallyconditions for actions.
The condition is givenin parentheses after each example,\[mi ga yawarakaku nare ba hi o kesite\]'when the flesh becomes tender, turn off thefire'(start condition)\[nebari ga deru made mazeru\]'mix until it is gluteneous'(continuation termination condition)\[ne no bubuN wa eNtookei ni naru yoo ni muku\]'peel the part of the root as it'll become cylin-drical'(ongoing behavior condition)\[hitasite oku to siN ga naku nari moto no 3 baigurai ni fukuramu\]'soak it, and it'll become pithless and swellthree times larger than the origin'(result condition)( :  state description)Conditions are grouped into the following three;precondition: condition which a state satisfiesbefore an actionongoing condition: condition which a statesatisfies during an actionpostcondition: condition which a state satisfiesafter an actionIf a precondition is satisfied, an actor can doan action.
In the above examples, start conditionis a precondition, continuation termination con-dition is a postcondition, ongoing behavior con-dition is an ongoing condition and result con-dition is a postcondition.In Japanese procedural texts, language expres-sions for actors are always omitted and morethan one action is often described in onesentence.Control structuresLanguage expressions which are used toembed the action call information are thefollowing in Japanese procedural texts.
(A) verb(B) participial adjective in a noun phrase(C) constituent of a noun phrase or compoundnounIn Japanese, a participial adjective is placedin pre-nominal position.
A participial adjectiveindicates an action that should be taken placesome time prior to the cooking step in which itoccurs.
Constituent of a noun phrase or compoundnoun also indicates an action.The primary verb is an action call, in thesense of computer programs.
The mechanism tocontrol a sequence of actions is called a con-trol structure.
Many various control structuresare found in procedural texts, and so it is veryimportant to consider control structures system-atically.A partial taxonomy of control structures andJapanese expressions for them are given in thefollowing;\[I\] Temporal control structure(i) Start(a) Start time(i) Time point\[hi kara orosu magiwa ni naganegi o kuwae\]'add the spring onions just before one takesthe pot off the fire'(ii) Time interval\[siagari tikaku natta koro sisitoogarasi okuwae\]'add the green pepper about the time of finish-ing'(b) Start condition(i) Independent of preceding actions\[futoi mono w~haNgetugiri  ni suru\]'cut radishes in semicircle slices if thick'(ii) Dependent on preceding actions (I)\[siru ga fukiagare ba hi o tomeru\]'if the soup boils over, put out the fire'(iii) Dependent on preceding actions (II)\[daikoN ga yawarakani narikakeru koro gohaN okuwaeru\]'add the boiled rice about the time when theradish becomes tender'(2) Continuation(a) Continuation time interval(i) Definite time interval109\[30 puNkaN nekaseru\]' ferment  i t  for  30 minutes '(ii) Indefinite time interval\[sibaraku oku\]'let it stand for a while'(iii) Approximate time interval\[yaku 2 fuNkaN yuderu\]'boil it for about two minutes'(iv) Upper limit\[saikoo 1 jikaN kurai yuderu\]'boil it for less than one hour'(v) Lower limit\[saitei 1 jikaN wa tukekoNde oku\]'leave it pickled for more than one hour'(b) End time\[nabe ni ireru tyokuzeN made mizu ni tukekoNdeoku\]' l eave  i t  soaked in water unt i l  one puts  i t  in tothe pot'(c) Continuation condition\[katai aida niru\]'boil it while it is hard'(d) End condition\[azayakana midoriiro ni naru made sizukaniyuderu\]'boil it gently until it becomes a bright greencolor'(3) Repetition(a) Continuous repetition(i) Definite times\[kore o 2,3 kai kurikaesu\]'repea.t this two or three times'(ii) Indefinite times\[kawa ni fuooku de suukasyo and o akete oku\]'open the several holes in the face of it witha fork'(b) Intermittent repetition\[tokidoki mizu o kaenagara\]'making water afresh occasionally'(4) Selection(a) Obligatory selection\[utuwa ni moru ka, aruiwa oobati ni ikki niakete\]'fill it in a dish o__\[ empty it into a big pot ata breath'(b) Optional selection\[konomi de gomasio o furikakeru\]'sprinkle salt with parched sesame over itaccording to one's preference'(5) Sequence(a) Successive sequence\[nabe ni nidasijiru (nibaNdasi) o irete hi nikakeru\]'put the stock into the pot and put it over thefire'\[sayuu ni hiraki?
ago no bubuN o hootyoo detatakikiru\]'open it right and left and chop off the chinpart with a kitchen knife'\[itido kireini mizuaraisita noti, mizuke o fuki-tori\]'after one washes it, wipe out the moisture'(b) Sequence with time delay(i) Definite time delay\[i jikaN go ni hi ni kakeru\]'put it over the fire after one hour'(ii) Indefinite time delay\[kurogoma to sio wa betubetu ni iri, ato demazeawasu\]'parch sesame and salt separately, then latel Zmix them'(iii) Order\ [sa igo ni  yaku 20 byookaN tuyobi  ni  s i te \ ]' l as t ly ,  cook i t  over  the hot f i re  for  about 20seconds'(6) Parallel(a) Simultaneous parallel (one action)(i) Action by one actor\[goboo o kaiteNsasenagara raNgiri ni si\]'cut the burdock turning over it'(ii) Action by one actor and continued action\[gutugutu ninagara taheru\]'eat simmering it'(b) Concurrent parallel (some actions)A good example is doing actions for ingredientsin sub preparations.
Some actors can do actionsfor ingredients concurrently.There are two cases.
(i) an action is independent of another action(ii) an action is dependent on another action\[II\] Behavioral control structure(I) Ongoing condition\[sizukani arumihaku o hagasu\]'take the alminum foil off gently'( :  expression for control structureThere is not always one to one correspondencebetween a control structure and a language ex-pression.
We have examined Japanese proceduraltexts.
We have a table of relations betweencontrol structures and corresponding Japaneseexpressions.Start :koro, toki, noti, syuNkaN, magiwahi, tokoro de, toki wa, mae ni, utini, to dooji ni, no baai wa, tara,nard, kara, ha, waContinuation:kaN, kaN ijoo, kaN hodo, yaku~kaN,saitei~kaN, i tyuuya, 1 baN, made,kurai, kurai hi, sibaraku, tuzukeru,te iru, te okuRepetition :kore o ~kai kurikaesu, tugitugi to,-110SelectionSequenceParallelOngoingtokidoki, 2,3 do, mooitido, suuka-syo, zutu:ka, aruiwa, baai ni yotte wa,konomi de:te, kara, ato, ato de, ato kara,tugi ni, tuzuite, saigo ni, saisyowa, saigo wa, mazu, tadati hi, sugu,saki ni:te, kara, nagara, yoo ni, mama:sizukani, yukkuri to, yoo hi, mamaConditions (states) which must be true in orderfor the action to start and/or proceed aredescribed by several different expressions asknown from examples.There are some cases in which a condition isexpressed by a part of a noun phrase or Compoundnoun.
(I) Participial adjective in a noun phrase\[marumete oita nikudaNgo\]'a hand-rolled quenelle'\[5,6 cm nagasa ni kirisoroeta fuki\]'a butterbur cut the pieces to 5,6 cms in length'\[saki no togatta hotyoo\]'a sharp-pointed knife'(2) Constituent of a noun phrase\[yuzu no wagiri\]'a round slice of a citron'\[unagi no kabayaki\]'broiled eels'(3) Constituent of a compound noun\[ajituke-siitake\]'a seasoned mushroom'\[arai-gome\]'washed rice'\[n.et-tou\]'boiling water'(__:state description)States result by doing actions.
But the aboveexpressions about states don't always callactions.
If an expression for calling the actionto cause the state is included in the precedingcontext, the action needn't be called.
Relationsbetween the context and the action to cause thestate are grouped as follows;(i) Noun phrase, which inciudes a verb (in thecase of Japanese)(a) context has an expression for an action tocause a state\[mizu de sarasu ..... mizu ni sarasite atta udo\]'bleach in the water ..... an udo bleached in thewater'(b) context doesn't have an expression for anaction to cause a state\[aratta mame\]'washed beans'(2) Noun phrase or compound noun, which doesn'tinclude a verb(a) context has an expression for an action tocause a state\[wagiri ni site oku ..... yuzu no wagiri\]'leave it cut in round slices ..... a citron cutin round slices'(b) context doesn't have an expression for anaction to cause a state\[nure-fukiN\]'wet dishcloth'(__:action description)In (l-b) and (2-b), it is necessary to call anaction to cause a state.
(l-b) corresponds to(B) and (2-b) corresponds to (C).PT-chartWe describe a formalized framework of aprocedural text.
The fundamental style of thefollowing descriptions is borrowed from BNFnotation of Algol60.
The braces{} denote none ormore repetitions of the enclosed material.
Thebrackets\[\] denote none or one occurrence of theenclosed material.<procedural text>::=(<name>\[<declaration>\]<con-dition><action>)<action>::=\[<statement-list>\]<action body>\[<statement-list>\]<action body>::=<simple action>l<sequential act-ion>I<selective action>I<repeated action> I<parallel action><simple action>::=(<name><condition>(<act>))<sequential action>::=(<name><condition>(<action>{;<action>}))<selective action>::=(<name><condition>(<action>{,<action>}))<repeated action>::=(<name><condition>(<action>{.<action>}))<parallel action>::=(<name><condition>(<action>:<action>{:<action>}))<condition>::=(\[<temporal control>\]\[<behavioralcontrol>\]\[<modal condition>\])<temporal control>::=<sequence> <selection><repetition>I<parallel>I<start>l<continuation><behavioral control>::=<ongoing><declaration>::=(<declaration unit>{<declarationunit>})<declaration unit>::=<data declaration>l<actiondeclaration><data declaration>::=(<name><data>)<action declaration>::=(<procedural text>)On the basis of the above descriptive framework,we construct a representation framework, PT-chart.PT-chart has the power to represent both theorganization and control structures of a proce-dural text.PT-chart has a tree structure composed of nodesand edges.
A pattern is a subchart of PT-chart.Nodes are Point, Name, Condition, Declaration,Statement, Action and Data.
Edges are Line, Arrow, Sequence, Selection, Repetition and Parallel.Some important pattern types, which mainly havethe double purpose of the organization structure-111-and contro l  s t ruc ture ,  are Sequence, Se lec t ion ,Repet i t ion  and Para l le l .Nodes;-, ~-C>-:-Q-:Point node, which represents a junc-tionName node, which represents a nameCondition node, which represents aconditionDeclaration node, which representsto be-a declarationAction node, which representsactionsData node, which represents dataStatement node, which represents astatement which is mentioned at thispoint of a procedureEdges;- - :  Line edge, > : Arrow edge- -~:  Sequence edge, @ :  Se lec t ion  edge-'~--: Repetition edge, - - :  Para l le l  edgePatterns;Sequence pat tern :doing procedures 2 ,3 , .
.
.and  n in that  orderunder a cond i t ion  C1Se lec t ion  pat tern :doing one of procedures 2,3 .
.
.
.
and n undera cond i t ion  C1Para l le l  pat tern :doing a l l  procedures 2,3 .
.
.
.
and n concur-rent ly  under a cond i t ion  C1Repet i t ion  pat tern :repeat ing  procedures 2 ,3 , .
.
.and  n in thatorder under a cond i t ion  ClDec larat ion  pat tern :dec la ra t ion  of procedures and/or  data(procedures=>act ions)Name or cond i t ion  node may be omitted in  eachpat tern .ISe lect ion  pat ternPara l le l  pat ternIIRepetition pattern1Sequence pat tern  DeclarationIpattern112ChestnutRice  rice 7 cups chestnuts 32 syoyu 4 tablespoons Ingredients salt 1 teaspoons sake 2 teaspoonswater 8 cupschest_Prepa- Prepa- nutsration Prepa-ration rationAn example of PT-charti 'Rice PreparationPrepa- SeasoningrationFinishing~ s o a k  and soften i in warm water |J~ P s U t  the r i ce ,  syoyu, sa l t ,  sake Ichestnuts and water in the I pot iet the pot on the stove.
\[~---'l /boi l  the very high ~L5 ~_~lame rice over ad le t  the r ice stand113-~.DiscussionsProcedural texts of cookings are mostlycomposed of descriptions of actions that act onconcrete objects, ingredients or cookwares, anddescriptions of states of them.
So we canregard the semantics of a procedural text asstate transformation from an initial state beforea cooking to a final state after a cooking.
Thenit is related with algorithmic logics which areconsidered as logics of programs~ A way will beopen to consider logics for general proceduraltexts.
In such logics, a problem is how to incor-porate a procedure into logics.
By studies ofalgorithmic logics, three methods have beenfound.
(i) A method which regards a procedure as a logi-cal formula.
The meaning of a procedure a as alogical fomula is 'a terminates'.
Suppose thatp is a logical fomula and a is a procedure, a;pis also a logical formula.
The meaning of theformula is 'a terminates and p is true'.
(2) A method Which regards a procedure as a modaloperator.
Suppose that p is a logical formulaand a is a procedure, <a>p is also a logical for-mula.
<a> is a modal operator.
The meaning of theformula is 'if a terminates, then p is true'.
Wecan define another modal operator \[a\] as \[alp=l<~>Ip.
(3) A method which regards properties of a pro-cedure as axioms.
The axioms give the semanticsof a procedure.Researches are left to implement a computerprogram for processing natural language proce-dural texts.
Natural language procedural textsmay have many incomplete, ambiguous expressions.The program must process them using context orknowledge.
In transformation from natural languagetexts to complete, unambiguous texts which arewritten in a formal language, the program mustalso understand descriptions of objects, actions,states and control structures.
The programs forprocessing natural language algorithm descrip-tions are considered by severalresearchers.
6,7They discuss that the right understanding ofcontrol structures in natural language algorithmdescriptions is an important function to theprogram.
So the identification of control struc-tures in procedural texts is an underlying studyfor implementing the computer program.The author would like to express his thanksto Dr.E.Miyamoto and Mr.T.Maeda of Hokkaido Uni-versity, and Mr.H.Sawamura of IIAS-SIS for theirhelpful discussions and to Dr.L.A.Miller forsending papers to him.Referencesi) Miller,L.A.
:'Natural language procedures:guides for programming language design', Paperpresented at the Comp.
Prog.
Symp., Sixth cong.of IEA(1976)2)Chodorow,M.S.
and L.A.Miller:'The interpreta-tion of temporal order in coordinate conjunction', IBM Thomas J. Watson Res.
Center Res.
ReportRC6199(1976)3)Miller,L.A.
:'Naive programmer problems withspecification of transfer-of-control', Prec.
ofNCC(1975)4)Sawamura,H.
:'Algorithmic logics', InformationProcessing Vol.20, No.8, IPSJ(1979) (in Japanese)5)Ferstl,O.
:'Flowcharting by stepwise refinement', SIGPLAN Notices Vol.13, No.i(1978)6)Wile,D., R.Balzer and N.Goldman:'Automatedderivation of program control structure fromnatural language program descriptions', SIGARTNewsletter 64, ACM(1977)7)Hobbs,J.R.
:'What the nature of natural languagetells us about how to make natural-language-likeprogramming languages more natural', SIGART News-letter 64, ACM(1977)-114  ?
