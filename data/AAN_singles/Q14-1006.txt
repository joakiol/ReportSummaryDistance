From image descriptions to visual denotations:New similarity metrics for semantic inference over event descriptionsPeter Young Alice Lai Micah Hodosh Julia HockenmaierDepartment of Computer ScienceUniversity of Illinois at Urbana-Champaign{pyoung2, aylai2, mhodosh2, juliahmr}@illinois.eduAbstractWe propose to use the visual denotations oflinguistic expressions (i.e.
the set of imagesthey describe) to define novel denotationalsimilarity metrics, which we show to be atleast as beneficial as distributional similaritiesfor two tasks that require semantic inference.To compute these denotational similarities, weconstruct a denotation graph, i.e.
a subsump-tion hierarchy over constituents and their de-notations, based on a large corpus of 30K im-ages and 150K descriptive captions.1 IntroductionThe ability to draw inferences from text is a prereq-uisite for language understanding.
These inferencesare what makes it possible for even brief descrip-tions of everyday scenes to evoke rich mental im-ages.
For example, we would expect an image ofpeople shopping in a supermarket to depict aislesof produce or other goods, and we would expectmost of these people to be customers who are eitherstanding or walking around.
But such inferencesrequire a great deal of commonsense world knowl-edge.
Standard distributional approaches to lexicalsimilarity (Section 2.1) are very effective at iden-tifying which words are related to the same topic,and can provide useful features for systems that per-form semantic inferences (Mirkin et al., 2009), butare not suited to capture precise entailments betweencomplex expressions.
In this paper, we propose anovel approach for the automatic acquisition of de-notational similarities between descriptions of ev-eryday situations (Section 2).
We define the (visual)denotation of a linguistic expression as the set of im-ages it describes.
We create a corpus of images ofeveryday activities (each paired with multiple cap-tions; Section 3) to construct a large scale visual de-notation graph which associates image descriptionswith their denotations (Section 4).
The algorithmthat constructs the denotation graph uses purely syn-tactic and lexical rules to produce simpler captions(which have a larger denotation).
But since eachimage is originally associated with several captions,the graph can also capture similarities between syn-tactically and lexically unrelated descriptions.
Weapply these similarities to two different tasks (Sec-tions 6 and 7): an approximate entailment recogni-tion task for our domain, where the goal is to decidewhether the hypothesis (a brief image caption) refersto the same image as the premises (four longer cap-tions), and the recently introduced Semantic TextualSimilarity task (Agirre et al., 2012), which can beviewed as a graded (rather than binary) version ofparaphrase detection.
Both tasks require semanticinference, and our results indicate that denotationalsimilarities are at least as effective as standard ap-proaches to similarity.
Our code and data set, aswell as the denotation graph itself and the lexicalsimilarities we define over it are available for re-search purposes at http://nlp.cs.illinois.edu/Denotation.html.2 Towards Denotational Similarities2.1 Distributional SimilaritiesThe distributional hypothesis posits that linguisticexpressions that appear in similar contexts have a67Transactions of the Association for Computational Linguistics, 2 (2014) 67?78.
Action Editor: Lillian Lee.Submitted 6/2013; Revised 10/2013; Published 2/2014.
c?2014 Association for Computational Linguistics.Gray haired man in black suit and yellow tie working in a financial environment.A graying man in a suit is perplexed at a business meeting.A businessman in a yellow tie gives a frustrated look.A man in a yellow tie is rubbing the back of his neck.A man with a yellow tie looks concerned.A butcher cutting an animal to sell.A green-shirted man with a butcher?s apron uses a knife to carve out the hanging carcass of a cow.A man at work, butchering a cow.A man in a green t-shirt and long tan apron hacks apart the carcass of a cowwhile another man hoses away the blood.Two men work in a butcher shop; one cuts the meat from a butchered cow, while the other hoses the floor.Figure 1: Two images from our data set and their five captionssimilar meaning (Harris, 1954).
This has led to thedefinition of vector-based distributional similarities,which represent each word w as a vector w derivedfrom counts of w?s co-occurrence with other words.These vectors can be used directly to compute thelexical similarities of words, either via the cosineof the angle between them, or via other, more com-plex metrics (Lin, 1998).
More recently, asymmetricsimilarities have been proposed as more suitable forsemantic inference tasks such as entailment (Weedsand Weir, 2003; Szpektor and Dagan, 2008; Clarke,2009; Kotlerman et al., 2010).
Distributional wordvectors can also be used to define the compositionalsimilarity of longer strings (Mitchell and Lapata,2010).
To compute the similarity of two strings, thelexical vectors of the words in each string are firstcombined into a single vector (e.g.
by element-wiseaddition or multiplication), and then an appropriatevector similarity (e.g.
cosine) is applied to the re-sulting pair of vectors.2.2 Visual DenotationsOur approach is inspired by truth-conditional se-mantic theories in which the denotation of a declar-ative sentence is assumed to be the set of all situa-tions or possible worlds in which the sentence is true(Montague, 1974; Dowty et al., 1981; Barwise andPerry, 1980).
Restricting our attention to visuallydescriptive sentences, i.e.
non-negative, episodic(Carlson, 2005) sentences that can be used to de-scribe an image (Figure 1), we propose to instantiatethe abstract notions of possible worlds or situationswith concrete sets of images.
The interpretationfunction J?K maps sentences to their visual denota-tions JsK, which is the set of images i ?
Us ?
U ina ?universe?
of images U that s describes:JsK = {i ?
U | s is a truthful description of i} (1)Similarly, we map nouns and noun phrases to theset of images that depict the objects they describe,and verbs and verb phrases to the set of images thatdepict the events they describe.2.3 Denotation GraphsDenotations induce a partial ordering over descrip-tions: if s (e.g.
?a poodle runs on the beach?)
en-tails a description s?
(e.g.
?a dog runs?
), its denota-tion is a subset of the denotation of s?
(JsK ?
Js?K),and we say that s?
subsumes the more specific s(s?
v s).
In our domain of descriptive sentences,we can obtain more generic descriptions by simplesyntactic and lexical operations ?
?
O ?
S ?
Sthat preserve upward entailment, so that if ?
(s) =s?, JsK ?
Js?K.
We consider three types of oper-ations: the removal of optional material (e.g PPslike on the beach), the extraction of simpler con-stituents (NPs, VPs, or simple Ss), and lexical sub-stitutions of nouns by their hypernyms (poodle ?dog).
These operations are akin to the atomic ed-its of MacCartney and Manning (2008)?s NatLogsystem, and allow us to construct large subsump-tion hierarchies over image descriptions, which wecall denotation graphs.
Given a set of (upwardentailment-preserving) operations O ?
S ?
S, thedenotation graph DG = ?E, V ?
of a set of images Iand a set of strings S represents a subsumption hier-archy in which each node V = ?s, JsK?
correspondsto a string s ?
S and its denotation JsK ?
I .
Di-rected edges e = (s, s?)
?
E ?
V ?
V indicate asubsumption relation s v s?
between a more genericexpression s and its child s?.
An edge from s to s?68exists if there is an operation ?
?
O that reduces thestring s?
to s (i.e.
?(s?)
= s) and its inverse ?
?1expands the string s to s?
(i.e.
?
?1(s) = s?
).2.4 Denotational SimilaritiesGiven a denotation graph over N images, we esti-mate the denotational probability of an expression swith a denotation of size |JsK| as PJK(s) = |JsK|/N ,and the joint probability of two expressions analo-gously as PJK(s, s?)
= |JsK ?
Js?K|/N .
The condi-tional probability PJK(s | s?)
indicates how likelys is to be true when s?
holds, and yields a simpledirected denotational similarity.
The (normalized)pointwise mutual information (PMI) (Church andHanks, 1990) defines a symmetric similarity:nPMI JK(s, s?)
=log( PJK(s,s?)PJK(s)PJK(s?))?
log(PJK(s, s?
))We set PJK(s|s) = nPMI JK(s, s) = 1, and, if s ors?
are not in the denotation graph, nPMI JK(s, s?)
=PJK(s, s?)
= 0.3 Our Data SetOur data set (Figure 1) consists of 31,783 pho-tographs of everyday activities, events and scenes(all harvested from Flickr) and 158,915 captions(obtained via crowdsourcing).
It contains and ex-tends Hodosh et al.
(2013)?s corpus of 8,092 im-ages.
We followed Hodosh et al.
(2013)?s approachto collect images.
We also use their annotationguidelines, and use similar quality controls to cor-rect spelling mistakes, eliminate ungrammatical ornon-descriptive sentences.
Almost all of the im-ages that we add to those collected by Hodosh etal.
(2013) have been made available under a Cre-ative Commons license.
Each image is described in-dependently by five annotators who are not familiarwith the specific entities and circumstances depictedin them, resulting in captions such as ?Three peoplesetting up a tent?, rather than the kind of captionspeople provide for their own images (?Our trip tothe Olympic Peninsula?).
Moreover, different an-notators use different levels of specificity, from de-scribing the overall situation (performing a musicalpiece) to specific actions (bowing on a violin).
Thisvariety of descriptions associated with the same im-age is what allows us to induce denotational similari-ties between expressions that are not trivially relatedby syntactic rewrite rules.4 Constructing the Denotation GraphThe construction of the denotation graph consistsof the following steps: preprocessing and linguisticanalysis of the captions, identification of applicabletransformations, and generation of the graph itself.Preprocessing and Linguistic Analysis We usethe Linux spell checker, the OpenNLP tok-enizer, POS tagger and chunker (http://opennlp.apache.org), and the Malt parser (Nivre et al.,2006) to analyze the captions.
Since the vocabularyof our corpus differs significantly from the data thesetools are trained on, we resort to a number of heuris-tics to improve the analyses they provide.
Sincesome heuristics require us to identify different entitytypes, we developed a lexicon of the most commonentity types in our domain (people, clothing, bodilyappearance (e.g.
hair or body parts), containers ofliquids, food items and vehicles).After spell-checking, we normalize certain wordsand compounds with several spelling variations, e.g.barbecue (barbeque, BBQ), gray (grey), waterski(water ski), brown-haired (brown haired), and to-kenize the captions using the OpenNLP tokenizer.The OpenNLP POS tagger makes a number of sys-tematic errors on our corpus (e.g.
mistagging mainverbs as nouns).
Since these errors are highly sys-tematic, we are able to correct them automaticallyby applying deterministic rules (e.g.
climbs is nevera noun in our corpus, stand is a noun if it is pre-ceded by vegetable but a verb when preceded by anoun that refers to people).
These fixes apply to27,784 (17% of the 158,915 image captions).
Next,we use the OpenNLP chunker to create a shallowparse.
Fixing its (systematic) errors affects 28,587captions.
We then analyze the structure of eachNP chunk to identify heads, determiners and pre-nominal modifiers.
The head may include more thana single token if WordNet (or our hypernym lexi-con, described below) contains a corresponding en-try (e.g.
little girl).
Determiners include phrasessuch as a couple or a few.
Although we use theMalt parser (Nivre et al., 2006) to identify subject-verb-object dependencies, we have found it more ac-curate to develop deterministic heuristics and lexi-69cal rules to identify the boundaries of complex (e.g.conjoined) NPs, allowing us to treat ?a man with redshoes and a white hat?
as an NP followed by a sin-gle PP, but ?a man with red shoes and a white-hairedwoman?
as two NPs, and to transform e.g.
?stand-ing by a man and a woman?
into ?standing?
and not?standing and a woman?
when dropping the PP.Hypernym Lexicon We use our corpus and Word-Net to construct a hypernym lexicon that allows usto replace head nouns with more generic terms.
Weonly consider hypernyms that occur themselves withsufficient frequency in the original captions (replac-ing ?adult?
with ?person?, but not with ?organ-ism?).
Since the language in our corpus is veryconcrete, each noun tends to have a single sense, al-lowing us to always replace it with the same hyper-nyms.1 But since WordNet provides us with mul-tiple senses for most nouns, we first have to iden-tify which sense is used in our corpus.
To do this,we use the heuristic cross-caption coreference algo-rithm of Hodosh et al.
(2010) to identify coreferentNP chunks among the original five captions of eachimage.2 For each ambiguous head noun, we con-sider every non-singleton coreference chains it ap-pears in, and reduce its synsets to those that standin a hypernym-hyponym relation with at least oneother head noun in the chain.
Finally, we apply agreedy majority voting algorithm to iteratively nar-row down each term?s senses to a single synset thatis compatible with the largest number of coreferencechains it occurs in.Caption Normalization In order to increase therecall of the denotations we capture, we drop allpunctuation marks, and lemmatize nouns, verbs, andadjectives that end in ?-ed?
or ?-ing?
before gener-1Descriptions of people that refer to both age and gen-der (e.g.
?man?)
can have multiple distinct hypernyms(?adult?/??male?).
Because our annotators never describeyoung children or babies as ?persons?, we only allow termsthat are likely to describe adults or teenagers (including occu-pations) to be replaced by the term ?person?.
This means thatthe term ?girl?
has two senses: a female child (the default) or ayounger woman.
We distinguish the two senses in a preprocess-ing step: if the other captions of the same image do not mentionchildren, but refer to teenaged or adult women, we assign girlthe woman-sense.
Some nouns that end in -er (e.g.
?diner?,?pitcher?
also violate our monosemy assumption.2Coreference resolution has also been used for word sensedisambiguation by Preiss (2001) and Hu and Liu (2011).ating the denotation graph.
In order to distinguishbetween frequently occurring homonyms where thenoun is unrelated to the verb, we change all forms ofthe verb dress to dressed, all forms of the verb standto standing and all forms of the verb park to park-ing.
Finally, we drop sentence-initial there/here/thisis/are (as in there is a dog splashing in the water),and normalize the expressions in X and dressed (up)in X (where X is an article of clothing or a color) towear X.
We reduce plural determiners to {two, three,some}, and drop singular determiners except for no.4.1 Rule TemplatesThe denotation graph contains a directed edge froms to s?
if there is a rule ?
that reduces s?
to s, with aninverse ?
?1 that expands s to s?.
Reduction rules candrop optional material, extract simpler constituents,or perform lexical substitutions.Drop Pre-Nominal Modifiers: ?red shirt?
??shirt?
In an NP of the form ?X Y Z?, whereX and Y both modify the head Z, we only allowX and Y to be dropped separately if ?X Z?
and?Y Z?
both occur elsewhere in the corpus.
Since?white building?
and ?stone building?
occur else-where in the corpus, we generate both ?white build-ing?
and ?stone building?
from the NP ?white stonebuilding?.
But since ?ice player?
is not used,we replace ?ice hockey player?
only with ?hockeyplayer?
(which does occur) and then ?player?.Drop Other Modifiers ?run quickly?
?
?run?We drop ADVP chunks and adverbs in VP chunks.We also allow a prepositional phrase (a preposi-tion followed by a possibly conjoined NP chunk)to be dropped if the preposition is locational(?in?, ?on?, ?above?, etc.
), directional (?towards?,?through?, ?across?, etc.
), or instrumental (?by?,?for?, ?with?).
Similarly, we also allow the drop-ping of all ?wear NP?
constructions.
Since the dis-tinction between particles and prepositions is oftendifficult, we also use a predefined list of phrasalverbs that commonly occur in our corpus to identifyconstructions such as ?climb up a mountain?, whichis transformed into ?climb a mountain?
or ?walkdown a street?, which is transformed into ?walk?.Replace Nouns by Hypernyms: ?red shirt?
?
?red clothing?
We iteratively use our hypernym70GENERATEGRAPH():Q,Captions,Rules?
?for all c ?
ImageCorpus doRules(c)?
GenerateRules(sc)pushAll(Q, {c} ?
RootNodes(sc,Rules(c)))while ?empty(Q) do(c, s)?
pop(Q)Captions(s)?
Captions(s) ?
{c}if |Captions(s)| = 2 thenfor all c?
?
Captions(s) dopushAll(Q, {c?}
?
Children(s,Rules(c?
)))else if |Captions(s)| > 2 thenpushAll(Q, {c} ?
Children(s,Rules(c)))Figure 2: Generating the graphlexicon to make head nouns more generic.
We onlyallow head nouns to be replaced by their hypernymsif any age based modifiers have already been re-moved: ?toddler?
can be replaced with ?child?, butnot ?older toddler?
with ?older child?.Handle Partitive NPs: cup of tea?
?cup?, ?tea?In most partitive NP1-of-NP2 constructions (?cup oftea?, ?a team of football players?)
the correspond-ing entity can be referred to by both the first or thesecond NP.
Exceptions include the phrase ?body ofwater?, and expressions such as ?a kind/type/sortof?, which we treat similar to determiners.Handle VP1-to-VP2 Cases Depending on the firstverb, we replace VPs of the form X to Y with both Xand Y if X is a movement or posture (jump to catch,etc.).
Otherwise we distinguish between cases wecan only replace with X (wait to jump) and those wecan only replace with Y (seem to jump).Extract Simpler Constituents Any noun phraseor verb phrase can also be used as a node in thegraph and simplified further.
We use the Malt de-pendencies (and the person terms in the entity typelexicon) to identify and extract subject-verb-objectchunks which correspond to simpler sentences thatwe would otherwise not be able to obtain: from?man laugh(s) while drink(ing)?, we extract ?manlaugh?
and ?man drink?, and then further split thoseinto ?man?, ?laugh(s)?, and ?drink?.4.2 Graph GenerationThe naive approach to graph generation would be togenerate all possible strings for each caption.
How-ever, this would produce far more strings than can beprocessed in a reasonable amount of time, and mostof these strings would have uninformative denota-tions, consisting of only a single image.
To makegraph generation tractable, we use a top-down al-gorithm which generates the graph from the mostgeneric (root) nodes, and stops at nodes that have asingleton denotation (Figure 2).
We first identify theset of rules that can apply to each original caption(GenerateRules).
These rules are then used to re-duce each caption as much as possible.
The resulting(maximally generic) strings are added as root nodesto the graph (RootNodes), and added to the queueQ.
Q keeps track of all currently possible node ex-pansions.
It contains items ?c, s?, which pair the IDof an original caption and its image (c) with a string(s) that corresponds to an existing node in the graphand can be derived from c?s caption.
When ?c, s?
isprocessed, we check how many captions have gen-erated s so far (Captions(s)).
If s has more than asingle caption, we use each of the applicable rewriterules of c?s caption to create new strings s?
that cor-respond to the children of s in the graph, and pushall resulting ?c, s??
onto Q.
If c is the second captionof s, we also use all of the applicable rewrite rulesfrom the first caption c?
to create its children.A post-processing step (not shown in Figure 2)attaches each original caption to all leaf nodes of thegraph to which it can be reduced.
Finally, we obtainthe denotation of each node s from the set of imageswhose captions are in Captions(s).5 The Denotation GraphSize and Coverage On our corpus of 158,439unique captions and 31,783 images, the denotationgraph contains 1,749,097 captions, out of which230,811 describe more than a single image.
Ta-ble 1 provides the distribution of the size of deno-tations.
It is perhaps surprising that the 161 cap-tions which describe each over 1,000 images donot just consist of nouns such as person, but alsocontain simple sentences such as woman standing,adult work, person walk street, or person play in-strument.
Since the graph is derived from the origi-nal captions by very simple syntactic operations, thedenotations it captures are most likely incomplete:Jsoccer playerK contains 251 images, Jplay soccerKcontains 234 images, and Jsoccer gameK contains71Size of denotations |JsK| ?
1 |JsK| ?
2 |JsK| ?
5 |JsK| ?
10 |JsK| ?
100 |JsK| ?
1000Nr.
of captions 1,749,096 230,811 53,341 22,683 1,921 161Table 1: Distribution of the size of denotations in our graph119 images.
We have not yet attempted to iden-tify variants in word order (?stick tongue out?
vs.?stick out tongue?)
or equivalent choices of prepo-sition (?look into mirror?
vs. ?look in mirror?).
De-spite this brittleness, the current graph already givesus a large number of semantic associations.Denotational Similarities The following exam-ples of the similarities found by nPMI JK and PJKshow that denotational similarities do not simplyfind topically related events, but instead find eventsthat are related by entailment:PJK(x|y) x y0.962 sit eat lunch0.846 play guitar strum0.811 surf catch wave0.800 ride horse rope calf0.700 listen sit in classroomIf someone is eating lunch, it is likely that theyare sitting, and people who sit in a classroom arelikely to be listening to somebody.
These entail-ments can be very precise: ?walk up stair?
entails?ascend?, but not ?descend?
; the reverse is true for?walk down stair?
:PJK(x|y) x =ascend x =descendy =walk up stair 32.0 0.0y =walk down stair 0.0 30.8nPMI JK captures paraphrases as well as closelyrelated events: people look in a mirror when shav-ing their face, and baseball players may try to tagsomeone who is sliding into base:nPMI JK x y0.835 open present unwrap0.826 lasso try to rope0.791 get ready to kick run towards ball0.785 try to tag slide into base0.777 shave face look in mirrorComparing the expressions that are most similarto ?play baseball?
or ?play football?
according tothe denotational nPMI JK and the compositional ?similarities reveals that the denotational similarityfinds a number of actions that are part of the partic-ular sport, while the compositional similarity findsevents that are similar to playing baseball (football):play baseballnPMI JK ?0.674 tag him 0.859 play softball0.637 hold bat 0.782 play game0.616 try to tag 0.768 play ball0.569 slide into base 0.741 play catch0.516 pitch ball 0.739 play cricketplay footballnPMI JK ?0.623 tackle person 0.826 play game0.597 hold football 0.817 play rugby0.545 run down field 0.811 play soccer0.519 wear white jersey 0.796 play on field0.487 avoid 0.773 play ball6 Task 1: Approximate EntailmentA caption never provides a complete description ofthe depicted scene, but commonsense knowledgeoften allows us to draw implicit inferences: whensomebody mentions a bride, it is quite likely that thepicture shows a woman in a wedding dress; a pic-ture of a parent most likely also has a child or baby,etc.
In order to compare the utility of denotationaland distributional similarities for drawing these in-ferences, we apply them to an approximate entail-ment task, which is loosely modeled after the Rec-ognizing Textual Entailment problem (Dagan et al.,2006), and consists of deciding whether a brief cap-tion h (the hypothesis) can describe the same imageas a set of captions P = {p1, ...,pN} known to de-scribe the same image (the premises).Data We generate positive and negative items?P,h,??
(Figure 3) as follows: Given an image,any subset of four of its captions form a set ofpremises.
A hypothesis is either a short verb phraseor sentence that corresponds to a node in the deno-tation graph.
By focusing on short hypotheses, weminimize the possibility that they contain extrane-ous details that cannot be inferred from the premises.Positive examples are generated by choosing a nodeh as hypothesis and an image i ?
JhK such that ex-actly one caption of i generates h and the other fourcaptions of i are not descendants of h and hencedo not trivially entail h, giving an unfair advantageto denotational approaches.
Negative examples aregenerated by choosing a node h as hypothesis andselecting four of the captions of an image i 6?
JhK.72Premises: A woman with dark hair in bending, open mouthed, towards the back of a dark headed toddler?s head.A dark-haired woman has her mouth open and is hugging a little girl while sitting on a red blanket.A grown lady is snuggling on the couch with a young girl and the lady has a frightened look.A mom holding her child on a red sofa while they are both having fun.VP Hypothesis: make facePremises: A man editing a black and white photo at a computer with a pencil in his ear.A man in a white shirt is working at a computer.A guy in white t-shirt on a mac computer.A young main is using an Apple computer.S Hypothesis: man sitFigure 3: Positive examples from the Approximate Entailment tasks.Since our items are created automatically, a posi-tive hypothesis is not necessarily logically entailedby its premises.
We have performed a small-scalehuman evaluation on 300 items (200 positive, 100negative), each judged independently by the samethree judges (inter-annotator agreement: Fleiss-?
=0.74).
Our results indicate that over half (55%) ofthe positive hypotheses can be inferred from theirpremises alone without looking at the original im-age, while almost none of the negative hypotheses(100% for sentences, 96% for verb phrases) can beinferred from their premises.
The training items aregenerated from the captions of 25,000 images, andthe test items are generated from a disjoint set of3,000 images.
The VP data set consists of 290,000training items and 16,000 test items, while the S dataset consists of 400,000 training items and 22,000 testitems.
Half of the items in each set are positive, andthe other half are negative.Models All of our models are binary MaxEnt clas-sifiers, trained using MALLET (McCallum, 2002).We have two baseline models: a plain bag-of-wordsmodel (BOW) and a bag-of-words model where weadd all hypernyms in our lexicon to the captions be-fore computing their overlap (BOW-H).
This is in-tended to minimize the advantage the denotationalfeatures obtain from the hypernym lexicon used toconstruct the denotation graph.
In both cases, aglobal BOW feature captures the fraction of tokensin the hypothesis that are contained in the premises.Word-specific BOW features capture the product ofthe frequencies of each word in h and P. All othermodels extend the BOW-H model.Denotational Similarity Features We computedenotational similarities nPMI JK and PJK (Sec-tion 2.4) over the pairs of nodes in a denotationgraph that is restricted to the training images.
Weonly consider pairs of nodes n,n?
if their denota-tions contain at least 10 images and their intersectioncontains at least 2 images.To map an item ?P,h?
to denotational simi-larity features, we represent the premises as theset of all nodes P that are ancestors of its cap-tions.
A sentential hypothesis is represented asthe set of nodes H = {hS , hsbj , hV P , hv, hdobj}that correspond to the sentence (h itself), its sub-ject, its VP and its direct object.
A VP hypothe-sis has only the nodes H = {hV P , hv, hdobj}.
Inboth cases, hdobj may be empty.
Both of the de-notational similarities nPMI JK(h, p) and PJK(h|p)for h ?
H , p ?
P lead to two constituent-specific features, sumx and maxx, (e.g.
sumsbj =?p sim(hsbj , p), maxdobj = maxp sim(hdobj , p))and two global features sump,h = ?p,h sim(h, p)and maxp,h = maxp,h sim(h, p).
Each constituenttype also has a set of node-specific sumx,s andmaxx,s features that are on when constituent x inh is equal to the string s and whose value is equalto the constituent-based feature.
For PJK, each con-stituent (and each constituent-node pair) has an ad-ditional feature P (h|P ) = 1 ?
?n(1 ?
PJK(h|pn))that estimates the probability that h is generated bysome node in the premise.Lexical Similarity Features We use two sym-metric lexical similarities: standard cosine distance(cos), and Lin (1998)?s similarity (Lin):cos(w,w?)
= w?w??w??w??Lin(w,w?)
=?i:w(i)>0?w?(i)>0w(i)+w?(i)?iw(i)+?iw?
(i)73We use two directed lexical similarities: Clarke(2009)?s similarity (Clk), and Szpektor and Dagan(2008)?s balanced precision (Bal), which builds onLin and on Weeds and Weir (2003)?s similarity (W):Clk(w | w?)
=?i:w(i)>0?w?
(i)>0 min(w(i),w?
(i))?iw(i)Bal(w | w?)
=?W(w | w?)?
Lin(w,w?
)W(w | w?)
=?i:w(i)>0?w?
(i)>0 w(i)?iw(i)We also use two publicly available resources thatprovide precomputed similarities, Kotlerman et al.
(2010)?s DIRECT noun and verb rules and Chklovskiand Pantel (2004)?s VERBOCEAN rules.
Both aremotivated by the need for numerically quantifiablesemantic inferences between predicates.
We onlyuse entries that correspond to single tokens (ignor-ing e.g.
phrasal verbs).Each lexical similarity results in the follow-ing features: words in the output are representedby a max-simw feature which captures its max-imum similarity with any word in the premises(max-simw = maxw?
?P sim(w,w?))
and by asum-simw feature which captures the sum of its sim-ilarities to the words in the premises (sum-simw =?w?
?P sim(w,w?)).
Global max sim and sum simfeatures capture the maximal (resp.
total) similarityof any word in the hypothesis to the premise.We compute distributional and compositionalsimilarities (cos, Lin, Bal, Clk, ?, ?)
on our im-age captions (?cap?
), the BNC and Gigaword.
Foreach corpus C, we map each word w that appearsat least 10 times in C to a vector wC of the non-negative normalized pointwise mutual informationscores (Section 2.4) of w and the 1,000 words (ex-cluding stop words) that occur in the most sentencesof C. We generally define P (w) (and P (w,w?))
asthe fraction of sentences in C in which w (and w?)occur.
To allow a direct comparison between dis-tributional and denotational similarities, we first de-fine P (w) (and P (w,w?))
over individual captions(?cap?
), and then, to level the playing field, we rede-fine P (w) (and P (w,w?))
as the fraction of imagesin whose captions w (and w?)
occur (?img?
), andthen we use our lexicon to augment captions withall hypernyms (?+hyp?).
Finally, we include BNCand Gigaword similarity features (?all?
).VP task S taskBaseline 1: BoW 58.7 71.2Baseline 2: BoW-H 59.0 73.6External 1: DIRECT 59.2 73.5External 2: VerbOcean 60.8 74.0Cap All Cap AllDistributional cos 67.5 71.9 76.1 78.9Distributional Lin 62.6 70.2 75.4 77.8Distributional Bal 62.3 69.6 74.7 75.3Distributional Clk 62.4 69.2 75.4 77.5Compositional ?
68.4 70.3 75.3 77.3Compositional ?
67.8 71.4 76.9 79.2Compositional ?,?
69.8 72.7 77.0 79.6Denotational nPMI JK 74.9 80.2Denotational PJK 73.8 79.5nPMI JK, PJK 75.5 81.2Combined cos, ?,?
71.1 72.6 77.4 79.2nPMI JK, PJK, ?,?
75.6 75.9 80.2 80.7nPMI JK, PJK, cos 75.6 75.7 80.2 81.2nPMI JK, PJK, cos, ?,?
75.8 75.9 81.2 80.5Table 2: Test accuracy on Approximate Entailment.Compositional Similarity Features We use twostandard compositional baselines to combine theword vectors of a sentence into a single vector: ad-dition (s?
= w1 + ... + wn, which can be inter-preted as a disjunctive operation), and element-wise(Hadamard) multiplication (s?
= w1  ...  wn,which can be seen as a conjunctive operation).
Inboth cases, we represent the premises (which con-sist of four captions) as a the sum of each caption?svector p = p1 + ...p4.
This gives two composi-tional similarity features: ?
= cos(p?,h?
), and?
= cos(p?,h?
).6.1 Experimental ResultsTable 2 provides the test accuracy of our mod-els on the VP and S tasks.
Adding hypernyms(BOW-H) yields a slight improvement over the ba-sic BOW model.
Among the external resources,VERBOCEAN is more beneficial than DIRECT, butneither help as much as in-domain distributionalsimilarities (this may be due to sparsity).Table 2 shows only the simplest (?Cap?)
andthe most complex (?all?)
distributional and com-positional models, but Table 3 provides accuraciesof these models as we go from standard sentence-based co-occurrence counts towards more denota-tion graph-like co-occurrence counts that are basedon all captions describing the same image (?Img?
),74VP task S taskCap Img +Hyp All Cap Img +Hyp Allcos 67.5 69.3 69.8 71.9 76.1 76.8 77.5 78.9Lin 62.6 63.4 61.3 70.0 75.4 74.8 75.2 77.8Bal 62.3 61.9 62.8 69.6 74.7 75.5 75.1 75.3Clk 62.4 67.3 68.0 69.2 75.4 75.5 76.0 77.5?
68.4 70.5 70.5 70.3 75.3 76.6 77.1 77.3?
67.8 71.4 71.6 71.4 76.9 78.1 79.1 79.2?,?
69.8 72.7 72.9 72.7 77.0 78.6 79.3 79.6nPMI JK 74.9 80.2PJK 73.8 79.5nPMI JK, PJK 75.5 81.2Table 3: Accuracy on hypotheses as various additions aremade to the vector corpora.
Cap is the image corpus withcaption co-occurrence.
Img is the image corpus with im-age co-occurrence.
+Hyp augments the image corpuswith hypernyms and uses image co-occurrence.
All addsthe BNC and Gigaword corpora to +Hyp.VP task S taskWords in h 1 2 3+ 2 3 4+% of items 72.8 13.9 13.3 65.3 22.8 11.9BoW-H 52.0 75.0 80.1 69.1 80.8 84.4cos (All) 68.8 79.4 81.1 75.9 83.9 85.7?
(All) 68.1 80.8 79.5 76.5 83.9 85.1nPMI JK 72.0 82.9 82.2 77.3 85.4 86.2Table 4: Accuracy on hypotheses of varying length.include hypernyms (?+Hyp?
), and add informa-tion from other corpora (?All?).
The ?+Hyp?
col-umn in Table 3 shows that the denotational metricsclearly outperform any distributional metric whenboth have access to the same information.
Al-though the distributional models benefit from theBNC and Gigaword-based similarities (?All?
), theirperformance is still below that of the denotationalmodels.
Among the distributional model, the simplecos performs better than Lin, or the directed Clk andBal similarities.
In all cases, giving models access todifferent similarity features improves performance.Table 4 shows the results by hypothesis length.As the length of h increases, classifiers that use sim-ilarities between pairs of words (BOW-H and cos)continue to improve in performance relative to theclassifiers that use similarities between phrases andsentences (?
and nPMI JK).
Most likely, this is dueto the lexical similarities having a larger set of fea-tures to work with for longer h. nPMI JK does espe-cially well on shorter h, likely due to the shorter hhaving larger denotations.7 Task 2: Semantic Textual SimilarityTo assess how the denotational similarities performon a more established task and domain, we applythem to the 1500 sentence pairs from the MSR VideoDescription Corpus (Chen and Dolan, 2011) thatwere annotated for the SemEval 2012 Semantic Tex-tual Similarity (STS) task (Agirre et al., 2012).
Thegoal of this task is to assign scores between 0 and 5to a pair of sentences, where 5 indicates equivalence,and 0 unrelatedness.
Since this is a symmetric task,we do not consider directed similarities.
And be-cause the goal of this experiment is not to achievethe best possible performance on this task, but tocompare the effectiveness of denotational and moreestablished similarities, we only compare the impactof denotational similarities with compositional sim-ilarities computed on our own corpus.
Since theMSR Video corpus associates each video with mul-tiple sentences, it is in principle also amenable to adenotational treatment, but the STS task descriptionexplicitly forbids its use.7.1 ModelsBaseline and Compositional Features Our start-ing point is Ba?r et al.
(2013)?s DKPro Similarity,one of the top-performing models from the 2012STS shared task, which is available and easily mod-ified.
It consists of a log-linear regression modeltrained on multiple text features (word and charac-ter n-grams, longest common substring and longestcommon subsequence, Gabrilovich and Markovitch(2007)?s Explicit Semantic Analysis, and Resnik(1995)?s WordNet-based similarity).
We investigatethe effects of adding compositional (computed onthe vectors obtained from the image-caption train-ing data) and denotational similarity features to thisstate-of-the-art system.Denotational Features Since the STS task issymmetric, we only consider nPMI JK similari-ties.
We again represent each sentence s by fea-tures based on 5 types of constituents: S ={sS , ssbj , sV P , sv, sdobj}.
Since sentences might becomplex, they might contain multiple constituentsof the same type, and we therefore think of eachfeature as a feature over sets of nodes.
For eachconstituent C we consider two sets of nodes in thedenotation graph: C itself (typically leaf nodes),75DKPro +?,?
(img) +nPMI JK +bothPearson r 0.868 0.880 0.888 0.890Table 5: Performance on the STS MSRvid task: DKPro(Ba?r et al., 2013) plus compositional (?,?)
and/or deno-tational similarities (nPMI JK) from our corpusand Canc, their parents and grandparents.
Foreach pair of sentences, C-C similarities computethe similarity of the constituents of the same type,while C-all similarities compute the similarity ofa C constituent in one sentence against all con-stituents in the other sentence.
For each pair ofconstituents we consider three similarity features:sim(C1, C2), max(sim(C1Canc2 ), sim(Canc1 , C2)),sim(Canc1 , Canc2 ).
The similarity of two sets ofnodes is determined by the maximal similarityof any pair of their elements: sim(C1, C2) =maxc1?C1,c2?C2 nPMI JK(c1, c2).
This gives us 15C-C features and 15 C-all features.7.2 ExperimentsWe use the STS 2012 train/test data, normalized inthe same way as the image captions for the deno-tation graph (i.e.
we re-tokenize, lemmatize, andremove determiners).
Table 5 shows experimentalresults for four models: DKPro is the off-the-shelfDKProSimilarity model (Ba?r et al., 2013).
Fromour corpus, we either add additive and multiplicativecompositional features (?,?)
from Section 6 (img),the C-C and C-All denotational features based onnPMI JK, or both compositional and denotationalfeatures.
Systems are evaluated by the Pearson cor-relation (r) of their predicted similarity scores to thehuman-annotated ones.
We see that the denotationalsimilarities outperform the compositional similari-ties, and that including compositional similarity fea-tures in addition to denotational similarity featureshas little effect.
For additional comparison, thepublished numbers for the TakeLab Semantic TextSimilarity System (S?aric?
et al., 2012), another top-performing model from the 2012 shared task, arer = 0.880 on this dataset.8 ConclusionSummary of Contributions We have definednovel denotational metrics of linguistic similarity(Section 2), and have shown them to be at leastcompetitive with, if not superior to, distributionalsimilarities for two tasks that require simple se-mantic inferences (Sections 6, 7), even though ourcurrent method of computing them is somewhatbrittle (Section 5).
We have also introduced twonew resources: a large data set of images pairedwith descriptive captions, and a denotation graphthat pairs generalized versions of these captionswith their visual denotations, i.e.
the sets of im-ages they describe.
Both of these resources arefreely available (http://nlp.cs.illinois.edu/Denotation.html) Although the aim of this paperis to show their utility for a purely linguistic task,we believe that they should also be of great interestfor people who aim to build systems that automat-ically associate image with sentences that describethem (Farhadi et al., 2010; Kulkarni et al., 2011; Liet al., 2011; Yang et al., 2011; Mitchell et al., 2012;Kuznetsova et al., 2012; Gupta et al., 2012; Hodoshet al., 2013).Related Work and Resources We believe that thework reported in this paper has the potential to openup promising new research directions.
There areother data sets that pair images or video with de-scriptive language, but we have not yet applied ourapproach to them.
Chen and Dolan (2011)?s MSRVideo Description Corpus (of which the STS datais a subset) is most similar to ours, but its curatedpart is significantly smaller.
Instead of several in-dependent captions, Grubinger et al.
(2006)?s IAPRTC-12 data set contains longer descriptions.
Or-donez et al.
(2011) harvested 1 million images andtheir user-generated captions from Flickr to createthe SBU Captioned Photo Dataset.
These captionstend to be less descriptive of the image.
The de-notation graph is similar to Berant et al.
(2012)?s?entailment graph?, but differs from it in two ways:first, entailment relations in the denotation graphare defined extensionally in terms of the images de-scribed by the expressions at each node, and sec-ond, nodes in Berant et al.
?s entailment graph corre-spond to generic propositional templates (X treatsY), whereas nodes in our denotation graph corre-spond to complete propositions (a dog runs).76AcknowledgementsWe gratefully acknowledge the support of theNational Science Foundation under NSF awards0803603 ?INT2-Medium: Understanding the mean-ing of images?, 1053856 ?CAREER: Bayesian Mod-els for Lexicalized Grammars?, and 1205627 ?CI-P:Collaborative Research: Visual entailment dataset and challenge for the Language and Vision Com-munity?, as well as via an NSF Graduate ResearchFellowship to Alice Lai.ReferencesEneko Agirre, Mona Diab, Daniel Cer, and AitorGonzalez-Agirre.
2012.
SemEval-2012 task 6: a piloton semantic textual similarity.
In Proceedings of theFirst Joint Conference on Lexical and ComputationalSemantics - Volume 1: Proceedings of the main confer-ence and the shared task, and Volume 2: Proceedingsof the Sixth International Workshop on Semantic Eval-uation, SemEval ?12, pages 385?393.Daniel Ba?r, Torsten Zesch, and Iryna Gurevych.
2013.DKPro Similarity: An Open Source Framework forText Similarity.
In Proceedings of the 51st AnnualMeeting of the Association for Computational Linguis-tics: System Demonstrations, pages 121?126, Sofia,Bulgaria, August.Jon Barwise and John Perry.
1980.
Situations and atti-tudes.
Journal of Philosophy, 78:668?691.Jonathan Berant, Ido Dagan, and Jacob Goldberger.2012.
Learning entailment relations by global graphstructure optimization.
Computational Linguistics,38(1):73?111.Greg Carlson, 2005.
The Encyclopedia of Language andLinguistics, chapter Generics, Habituals and Iteratives.Elsevier, 2nd edition.David Chen and William Dolan.
2011.
Collectinghighly parallel data for paraphrase evaluation.
In Pro-ceedings of the 49th Annual Meeting of the Associa-tion for Computational Linguistics: Human LanguageTechnologies, pages 190?200, Portland, Oregon, USA,June.Timothy Chklovski and Patrick Pantel.
2004.
Verbo-cean: Mining the web for fine-grained semantic verbrelations.
In Proceedings of the 2004 Conference onEmpirical Methods in Natural Language Processing(EMNLP), pages 33?40, Barcelona, Spain, July.Kenneth Ward Church and Patrick Hanks.
1990.
Wordassociation norms, mutual information, and lexicogra-phy.
Computational Linguistics, 16(1):22?29.Daoud Clarke.
2009.
Context-theoretic semantics fornatural language: an overview.
In Proceedings ofthe Workshop on Geometrical Models of Natural Lan-guage Semantics, pages 112?119, Athens, Greece,March.Ido Dagan, Oren Glickman, and Bernardo Magnini.2006.
The PASCAL Recognising Textual Entailmentchallenge.
In Machine Learning Challenges, volume3944 of Lecture Notes in Computer Science, pages177?190.
Springer.David Dowty, Robert Wall, and Stanley Peters.
1981.
In-troduction to Montague Semantics.
Reidel, Dordrecht.Ali Farhadi, Mohsen Hejrati, Mohammad Amin Sadeghi,Peter Young, Cyrus Rashtchian, Julia Hockenmaier,and David Forsyth.
2010.
Every picture tells astory: Generating sentences from images.
In Proceed-ings of the European Conference on Computer Vision(ECCV), Part IV, pages 15?29, Heraklion, Greece,September.Evgeniy Gabrilovich and Shaul Markovitch.
2007.
Com-puting semantic relatedness using wikipedia-based ex-plicit semantic analysis.
In Proceedings of the 20thinternational joint conference on Artifical intelligence,IJCAI?07, pages 1606?1611.Michael Grubinger, Paul Clough, Henning Mu?ller, andThomas Deselaers.
2006.
The IAPR benchmark: Anew evaluation resource for visual information sys-tems.
In OntoImage 2006, Workshop on LanguageResources for Content-based Image Retrieval duringLREC 2006, pages 13?23, Genoa, Italy, May.Ankush Gupta, Yashaswi Verma, and C. Jawahar.
2012.Choosing linguistics over vision to describe images.In Proceedings of the Twenty-Sixth AAAI Conferenceon Artificial Intelligence, Toronto, Ontario, Canada,July.Zellig S Harris.
1954.
Distributional structure.
Word,10:146?162.Micah Hodosh, Peter Young, Cyrus Rashtchian, and JuliaHockenmaier.
2010.
Cross-caption coreference reso-lution for automatic image understanding.
In Proceed-ings of the Fourteenth Conference on ComputationalNatural Language Learning, pages 162?171, Uppsala,Sweden, July.Micah Hodosh, Peter Young, and Julia Hockenmaier.2013.
Framing image description as a ranking task:Data, models and evaluation metrics.
Journal of Arti-ficial Intelligence Research (JAIR), 47:853?899.Shangfeng Hu and Chengfei Liu.
2011.
Incorporatingcoreference resolution into word sense disambigua-tion.
In Alexander F. Gelbukh, editor, ComputationalLinguistics and Intelligent Text Processing, volume6608 of Lecture Notes in Computer Science, pages265?276.
Springer Berlin Heidelberg.77Lili Kotlerman, Ido Dagan, Idan Szpektor, and MaayanZhitomirsky-Geffet.
2010.
Directional distributionalsimilarity for lexical inference.
Natural Language En-gineering, 16(4):359?389.Girish Kulkarni, Visruth Premraj, Sagnik Dhar, SimingLi, Yejin Choi, Alexander C. Berg, and Tamara L.Berg.
2011.
Baby talk: Understanding and generat-ing simple image descriptions.
In Proceedings of the2011 IEEE Conference on Computer Vision and Pat-tern Recognition (CVPR), pages 1601?1608.Polina Kuznetsova, Vicente Ordonez, Alexander Berg,Tamara Berg, and Yejin Choi.
2012.
Collective gener-ation of natural image descriptions.
In Proceedings ofthe 50th Annual Meeting of the Association for Com-putational Linguistics (Volume 1: Long Papers), pages359?368, Jeju Island, Korea, July.Siming Li, Girish Kulkarni, Tamara L. Berg, Alexan-der C. Berg, and Yejin Choi.
2011.
Composing sim-ple image descriptions using web-scale n-grams.
InProceedings of the Fifteenth Conference on Compu-tational Natural Language Learning (CoNLL), pages220?228, Portland, OR, USA, June.Dekang Lin.
1998.
An information-theoretic defini-tion of similarity.
In Proceedings of the Fifteenth In-ternational Conference on Machine Learning (ICML),pages 296?304, Madison, WI, USA, July.Bill MacCartney and Christopher D. Manning.
2008.Modeling semantic containment and exclusion in nat-ural language inference.
In Proceedings of the 22ndInternational Conference on Computational Linguis-tics (Coling 2008), pages 521?528, Manchester, UK,August.Andrew Kachites McCallum.
2002.
Mal-let: A machine learning for language toolkit.http://www.cs.umass.edu/ mccallum/mallet.Shachar Mirkin, Ido Dagan, and Eyal Shnarch.
2009.Evaluating the inferential utility of lexical-semanticresources.
In Proceedings of the 12th Conference ofthe European Chapter of the ACL (EACL 2009), pages558?566, Athens, Greece, March.Jeff Mitchell and Mirella Lapata.
2010.
Composition indistributional models of semantics.
Cognitive Science,34(8):1388?1429.Margaret Mitchell, Jesse Dodge, Amit Goyal, Kota Ya-maguchi, Karl Stratos, Xufeng Han, Alyssa Mensch,Alex Berg, Tamara Berg, and Hal Daume III.
2012.Midge: Generating image descriptions from computervision detections.
In Proceedings of the 13th Confer-ence of the European Chapter of the Association forComputational Linguistics (EACL), pages 747?756,Avignon, France, April.Richard Montague.
1974.
Formal philosophy: papersof Richard Montague.
Yale University Press, NewHaven.
Edited by Richmond H. Thomason.Joakim Nivre, Johan Hall, and Jens Nilsson.
2006.
Malt-parser: A data-driven parser-generator for dependencyparsing.
In Proceedings of the International Confer-ence on Language Resources and Evaluation (LREC),pages 2216?2219.Vicente Ordonez, Girish Kulkarni, and Tamara L. Berg.2011.
Im2text: Describing images using 1 millioncaptioned photographs.
In Advances in Neural Infor-mation Processing Systems 24, pages 1143?1151.Judita Preiss.
2001.
Anaphora resolution with wordsense disambiguation.
In Proceedings of SENSEVAL-2 Second International Workshop on EvaluatingWord Sense Disambiguation Systems, pages 143?146,Toulouse, France, July.Philip Resnik.
1995.
Using information content to evalu-ate semantic similarity in a taxonomy.
In Proceedingsof the 14th international joint conference on Artificialintelligence - Volume 1, IJCAI?95, pages 448?453.Idan Szpektor and Ido Dagan.
2008.
Learning entailmentrules for unary templates.
In Proceedings of the 22ndInternational Conference on Computational Linguis-tics (Coling 2008), pages 849?856, Manchester, UK,August.
Coling 2008 Organizing Committee.Frane S?aric?, Goran Glavas?, Mladen Karan, Jan S?najder,and Bojana Dalbelo Bas?ic?.
2012.
Takelab: Sys-tems for measuring semantic text similarity.
In Pro-ceedings of the Sixth International Workshop on Se-mantic Evaluation (SemEval 2012), pages 441?448,Montre?al, Canada, 7-8 June.Julie Weeds and David Weir.
2003.
A general frame-work for distributional similarity.
In Proceedings ofthe 2003 Conference on Empirical Methods in NaturalLanguage Processing (EMNLP), pages 81?88.Yezhou Yang, Ching Teo, Hal Daume III, and YiannisAloimonos.
2011.
Corpus-guided sentence genera-tion of natural images.
In Proceedings of the 2011Conference on Empirical Methods in Natural Lan-guage Processing (EMNLP), pages 444?454, Edin-burgh, UK, July.78
