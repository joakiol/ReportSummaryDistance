COLING 82, J. Horeck) (ed.
)North-Holland Publishing Company?
Academia, 1982A METRIC SPACE DEFINED ON ENGLISHAND ITS RELATION TO ERROR CORRECTIONJames BradfordSchool  of Computer  ScienceAcadia  Unfvers?tyWol fv i l le ,  Nova Scot iaCanadaA d istance funct ion is proposed that maps  pairs ofstr ings to the real  numbers.
It has been shown thatg iven suitable constra ints  the funct ion is a metr icover the free monoid  generated from a set of gr~um~mat ica l  symbols.
The necessary  constra ints  modi fythe metr ic  so that it maps pairs of str ings to alatt ice of real numbers.
Thus for each str ing themetr ic  def ines a countable set of nested ne ighbour -hoods.
This aspect of the space has proved usefulfor the correct ion of certa in kinds of grammat ica lerrors that occur in Engl ish  sentences.
An Engl ishparser  was wr i t ten that used the metr ic  to proposecorrect ions to a var iety  of ungrammat ica l  sentences.Exper ience with the program suggests that in manycases the intuit ive not ion of grammat ica l  s imi lar i tycorresponds c losely  to the mathemat ica l  def in i t ion ofnearest  ne ighbour  in the space.I.
Int roduct ionConsider  a str ing of grammat ica l  symbols which has been produced bylexical  analysis.
Each symbol in the str ing corresponds to a wordin the or ig inal  sentence.
The str ing wi l l  be analysed by a parserwhich compares the sequence of symbols to sequences speci f ied bysome grammar, G. If the compar ison succeeds then the or ig inal  sen-tence is accepted as grammatical .
L Otherwise,  it is re jected anderror  correct ion is required.Def in i t ion:  Given a grammar G and a str ing S composed of gramma-t ical  symbols from some alphabet A then S is ungrammat ica l  if it isnot conta ined in L(G), the language generated by G.Ungrammat ica l  in this sense refers to any sentence that was not an-t ic ipated by the grammar.
In many systems it is poss ib le  for auser to produce a proper Engl ish sentence wi th in  the appropr iatedomain of d iscourse and sti l l  have the sentence re jected by theparser.
This is usual ly  at t r ibuted to "holes in the grammar.
"This paper wi l l  descr ibe a technique for correct ing ungrammat ica linput.
The class of errors t reated includes both genuine gramma~tical  errors and those resu l t ing from "holes."
One of the assump-t ions tested by this work is that a s ign i f icant  class of errors canbe reso lved by examinat ion  of syntact ic  structure alone.4344 J. BRADFORDAn ungrammat ica l  sentence is v iewed as a grammat ica l  sentence thathas been t ransformed by  one or more error operat ions.Def in i t ion:  An error operat ion involves e i ther  (a) an insert ion ofa word, (91 a de~I -on  of a word, or (c) an a l terat ion of the wordsequence.In general ,  the damage done by a single error operat?on is local anddoes not s ign i f i cant ly  a l ter  the gloSal  structure.Thus a compar ison of the respect ive  s t ructures  of the two sentencesis used as the bases for a measure of theZr s imi lar i ty.
This ap -p roach  is based on ear l ier  work by F ischer  and Wagner.
~ The errorcorrect ion st rategy rests on a measure  which  expresses  s t ructura ls imi lar i ty  as a numer ica l  distance.
If the parser~s analys is  of aof a given sentence fa~is then a search  is made for its nearestgrammat ica l  neighbour.
As var ious  a l ternat ives  are found they arepresented to the user.
The user may elect to cont inue the search,accept  the cor rector~s  proposal  or abandon the search and rephrasethe input.The class of errors that can be corrected by a measure  of s t ructura ls imi lar i ty  are those re lated to word arrangement.
Word ar rangementis descr ibed by an augmented t rans i t ion network  in which  the cond-i t ions on the arcs are tota l ly  relaxed.
Such a net is ca l led arecurs ive  t rans i t ion network and it def ines a context  free language~Thus the c lass of errors t reated by this  technique are cal ledcontext  free errors.2.
The Measure - In formal lyThe basis of the d is tance funct ion is a value cal led the ' t rans form-at ion cost.
In essence the t rans format ion  cost gives an ind icat ionof the number of changes required to convert  one str ing of grammat-ical symbols into another.
The changes are cons idered under twocategor ies,  rear rangement  and edit ion.
The cost of a t ransformat ionis the sum of the cost of rear rangment  and cost  of edit ion.The rear rangement  cost measures  the amount of d isorder  of onestr ing re lat ive to another.
Many def in i t ions  are poss ib le  but mosty ie ld asymmetr ica l  costs.
One that does not, cons iders  common sub-str ings between the two given strings.
The cost is based on thenumber  of gaps between the substr ings.
For example,  if the twogiven str ings match exact ly  then the rear rangement  cost is zerobecause the two str ings match w i thout  gaps.The edi t ion cost  cons iders  the symbols that occupy the gaps betweens u b s ~  In order to t ransform one str ing into another  the sym-bols  not part  of common substr ings  in the f irst  must  be removed andthose in the second that are not common must  be inserted into thefirst.
The edi t ion cost is the sum of the costs  of inser t ion  anddelet ion.
C lear ly  the potent ia l  for asymmetry  exists  here as well.However,  if the cost of insert ion is equal  to the cost of de let ionfor any given symbol  then symmetry fo l lows as a consequence.The most  s ign i f icant  e lement  of the formal descr ip t ion  of Eta'sd is tance measure is the concept  of a match set.
Suppose we cons idertwo sequences of words (actual ly str ings of grammat ica l  svmbols,A METRIC SPACE DEFINED ON ENGLISH 45each corresponding to a word).
The A-sequence wi l l  be the input andthe B-sequence wi l l  be a sentence in the grammar - hencefor th  ca l ledthe test sentence.
Thus a match set M wi th  respect  to A and B des-cr ibes a pa l r lng between words in the input and words in the testsentence.
If the two sentences match exact ly  and are both of lengthn then the match  set denot ing  the best  match wi l l  be: (1,1) , (2,2) ,.
.
.
,(n,n).
Not ice that the integers compr is ing each ordered pairare the pos i t ions  of words in the two respect ive sentences.The rearrangement  cost (which measures  the d isorder  of one sentencere lat ive to another) is computed from M. A l though the cost is re-lated to the number of common substr ings of words shared by the twogiven sentences the actual  cost is computed by count ing gaps betweensubstr ings.
For example,  suppose two sentences have no words incommon.
Since there are no shared substr ings the word order of thetwo sentences are not re lated and thus the rearrangement  cost iszero (hence the ent i re t ransformat ion cost wi l l  der ive from the editcost).
If the two sentences were ident ica l  then in this case aswel l  there wi l l  ex ist  a match set y ie ld ing a rearrangment  cost ofzero.The edit  cost is a lso computed from the match  set M. In a manners imi lar  to the F ischer /Wagner  measure  it is assumed that each gram-mat ica l  symbol has two assoc iated unit  costs, the cost of insert ionand the cost of delet ion.
The under ly ing idea is t -~  ~ter  theinput  has ~-6en rearranged to match the test  sentence then nonmatch-ing symbols in the input are removed and unmatched symbols in thetest sentence are inserted into the modi f ied  input.
In pract ice itis the sum of the unit  costs  that is used as the edit  cost.
Becauseof the nonnegat iv i ty  and nondegeneracy  requi rements  for a metr ic  theunit  ed i t  costs must  be posit ive.3.
The Measure - Formal lyNotat ion I.
If A is a set then the card ina l i ty  of A is denotedIAi-2.
If m = (i,j) is an ordered pair  of integers then D(m)= i and R(m) = j= ... 3.
-Ifs S. wh~e l~ i~ is a sequence of symbols then s<i >lDef in i t ion 1 ~-latch Set, MIf A and B are given str ings then a match set M wi th  respect  to Aand B is a set of ordered pairs  of integers wi th  the fo l lowing pro-pert ies.
If m,n eM and m~n then i. Dfm) e\[l, IAI\]2.
D(m)~ D(n)3.
R(m) e\[l, IBI\]4.
R(m)~ R(n)5. m= (a, b) ?A<a>=B<b>Def in i t ion 2 Inverse Match Set~ M T1If M is a g iven match set w i th  respect  to two str ings A and B thenM -I is a match set w i th  respect  to B and A such that1.
IM-II=IMII2.
meM?3n~M-  where (i)D(m)=R(n) ( i i)R(m)=D(n)46 J. BRADFORDNotat ion If a,b and n are integers such that a+b<2n thena+nb = ~a+b if a+b<n\[a+b-n if a~b>nNot ice that if a+b~2n thena+ b = \[(a+b-l) mod n\]+l nDef in i t ion 3 Successor  Funct ion,  succ(m)If M is a match set wi th  respect  to two str ings A and B and if IAI= a, IBl=b and (i , j )eM then succ(( i , j ))  = (i+al,J+bl)Recal l  that the rear rangement  cost is based on the number  of gapsbetween substr ings.
A gap is detected by means of a successorfunction.
The successor  of an ordered pair  is the pair  produced byincrement ing  each e lement  of the in i t ia l  pair  by i.
Thus the suc-cessor of (2,3) is (3,4).An unusual  aspect  of the successor  funct ion is that for any g ivensentence, the f i rst  word is def ined to be the successor  of the last.For example, if the length of the two sentences was n, then the suc-cessor  of (n,n) is def ined to be (i,i).
A metr ic  must  y ie ld  a dis-tance from a str ing to i tsel f  of zero.
This is the reason under-ly ing the successor  funct ion 's  "wrap around" character ist ic .Def in i t ion 4 Gap Set, GIf M is a g iven match set then G is def ined by G={mlmeMAsucc(m)kM}Def in i t ion  5 Rear rangement  Cost, ~(M)If M is a match set and G the assoc iated gap set then ~(M)=IG \[Convent ion 1 states that  the cost of insert ing or de let ing any gram-mat ica l  symbol is constant.
In other  words the cost of a unit  edi toperat ion is independent  of the symbol being edited.Convent ion 1 Let E be an a lphabet  of symbols and c be a pos i t ivereal constant.
Convent ion 1 requires VSeZyINS(s)=TDEL(s)=cRecal l  that the edit  cost between two str ings A and B is based onthe unit  costs of insert ing and de let ing symbols not common to bothstrings.
A def in i t ion  of the edit  cost, F(A,B,M) based on this isg iven in reference 3.
For two str ings A and B and a g iven match setM, Lemma 1 estab l i shes  the equiva lence of a more convenient  def in i t ion.The proof  of Lemma 1 is a lso given in reference 3.Lemma 1 If M is a match set wi th  respect  to two str ings Aand B and if convent ion 1 is in force then F(A ,B ,M)=( IA I+IB I -21MI )cDef in i t ion  6 Trans format ion  Cost, TCOST(A,B,M)If M is a match set wi th  respect  to two str ings A and B then TCOST(A,B,M)=~(M)+F(A,B,M)Def in i t ion 7 Match Set of Min imal  CostIf UAB is the class of al l  match sets with respect  to A and B thenA METRIC SPACE DEFINED ON ENGLISH 47a match set MeUAR is said to be a match set of minimal cost (or sim-ply "minimal") i~fTCOST(A,B,M)= min (TCOST(A,B,N))NeUABDefinition 8 Edit Distanc~ ~- Eta,n(AFB )Let A and B be strings and M be a minimal match set with respect tcA and B.
Then ~(A,B)=TCOST(A,B,M)Example Let A,B and C be strings of letters A = abcd, B =bdac, C = aabSuppose VseZ yINS(s)=TDEL(s) = 1Notice that Ml={ (i,3), (2,1),(3,4),(4,2)}is minimalLet meM1m1,32,13,44,2succ  (m)2,43,24,11,3Hence G ={(1,3),(2,1),(3,4)}~(MI)=3, F(A,B,MI)=0TCOST(A,B,MI)=3Thus n(A,B)=3Similarly ~(A,C)=4and q(B,C)=5Theorem 1 If Convention 1 applies then (Z*,~)space.
In particular, if A,B~eZ* theni.
q (A,B) >0--2. n(A,A)=0 and A~B-~(A,B)>03.
q(A,B)=q(B,A)4.
D (A,C) &q (A,B)+n (B,C)succ (m)EMI?4.
ConclusionsFalseFalseFalseTrueis a metricA program called Eta (for Error Tolerant Analysis) was written totest the effectiveness of the measure.
For a given grammar, G theprogram searches the metric space in the neighbourhood of the inputuntil a sentence contained in L(G) is found.
This sentence is givento the user for confirmation.
If the program's proposal is rejectedthen the search is continued.
The neighbourhood searched by theprogram consists of the set of strings of grammatical symbols withina given distance of the input.
By progressively enlarging this dis-tance a partial ordering is applied to the strings in L(G).
Thusthe user sees alternatives from "near" (structurally similar to theinput) to "far" (structurally dissimilar).Experience with the program suggests that many common grammaticalerrors can be corrected by relatively short dialogues with the user.Frequently an acceptable alternative ~s proposed w~thin three orfour interactions.The extent to which the alternatives proposed by Eta are "likely" is,of course, subjective.
Nevertheless, the measure does yield alter-natives that are structural ly similar to input that would otherwise48 J. BRADFORDdefy analysis.
In the majority of the cases seen, grammaticalerrors do leave much of a sentence's structure intact.
Since thereis no fixed limit on the number of alternatives that may be presentedeven pathological cases are correctable with patience.\[1\]\[2\]\[3\]ReferencesFischer, M. J. and Wagner, R. A., The String to StringCorrection Problem, Journal of the ACM, Vol.
21, no.
I.January 1974, 168 - 173.Woods, W. A., Transit ion Netword Grammars for NaturalLanuage Analysis, Ccmuntunications of the ACM, Vol.
13,no.
i0, October 1970, 591 - 606.Bradford, J. H., The Eta Interface - An Error CorrectingParser for Augmented Transit ion Networds, Ph.D. Thesis,Dpeartment of Computer Science, University of Waterloo,1982.
