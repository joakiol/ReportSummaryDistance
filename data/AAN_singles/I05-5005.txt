Structural variation in generated health reportsCatalina Hallett and Donia ScottCentre for Research in ComputingThe Open UniversityWalton HallMilton Keynes MK7 6AA{c.hallett,d.scott}@open.ac.ukAbstractWe present a natural language gener-ator that produces a range of medi-cal reports on the clinical histories ofcancer patients, and discuss the prob-lem of conceptual restatement in gen-erating various textual views of thesame conceptual content.
We focus ontwo features of our system: the de-mand for ?loose paraphrases?
betweenthe various reports on a given patient,with a high degree of semantic overlapbut some necessary amount of distinc-tive content; and the requirement forparaphrasing at primarily the discourselevel.1 IntroductionPatient records are typically large collections ofdocuments that reflect the medical history ofa patient over a period of time.
On average,the electronic patient record of a cancer patientcontains information from over 150 documents,representing consult notes, referral letters, lettersto and from the patient?s GP, hospital admissionand discharge notes, laboratory test results,surgery and other treatment descriptions, anddrug dispensing notes.
Although each documentin this collection will have a specified purpose,there tends to be a high degree of redundancybetween documents, but the sheer volume ofinformation makes access extremely difficult.The work presented in this paper is part of theClinical E-Science Framework project (CLEF),which aims at providing tools to facilitate easyaccess to a patient?s medical history.
In particular,we describe a natural language generation systemthat produces a range of summarised reportsof patient records from data-encoded viewsof patient histories which we call chronicles.Although we are concentrating on cancer patients,we aim to produce good quality reports withoutthe need to construct extensive domain models.Our typical user is a GP or clinician whouses electronic patient records at the point ofcare to familiarise themselves with a patient?smedical history and current situation.
A numberof specific requirements arise from this particularsetting: Reports that provide a quick potted overviewof the patient?s history are essential; this typeof report should not be too long (ideally theyshould fit entirely on a computer screen) andshould take less than a minute to read; At the same time, a complete view of themedical history must always be available ondemand; Clinicians often need to examine a patient?shistory from a particular perspective (e.g.,tests administered, treatments undertaken,drugs prescribed), and having focussedreports is also a requirement; Reports should be formatted to enhancereadability; The selection of events for inclusion in areport should follow some basic rules:33?
Events that deviate from what isconsidered to be normal are moreimportant than normal events(for example, an examinationof the lymphnodes that revealslymphadenopathy is more importantthan an examination that doesn?t).?
Some events are more important thanothers and should not only be includedin the report but also highlighted(e.g., through colour coding, graphicaltimelines or similar display features).?
Less important events should beavailable on a need-to-know basisThese requirements impose importantrestrictions on the content of the reports andimplicitly on the variety of lexical and syntacticaldevices we can employ:(a) the veracity of the report is essential, thereforewe are not at liberty to employ synonymy orlexical paraphrasing that may alter (howeverslightly) the meaning of the original input,(b) we are required to maintain a certainsyntactical ordering throughout a report in orderto allow the user to quickly scan through thereport with ease, and(c) we have to produce several types of reportsfrom the same input data.In this paper, we focus on this last requirement,describing the methods we employ forreformulating content according to the typeand focus of the generated report.2 Types of reportIn the current implementation, the generatorproduces two main types of report.
The first is alongitudinal report, which is intended to providea quick historical overview of the patient?sillness, whilst preserving the main events (suchas diagnoses, investigations and interventions).It presents the events in the patient?s historyordered chronologically and grouped accordingto type.
In this type of report, events arefully described (i.e., an event description includesall the attributes of the event) and aggregationis minimal (events with common attributes areaggregated, but there is no aggregation throughgeneralization, for example).
The followingexample displays a fragment of a generatedlongitudinal report1:Example 1The patient is diagnosed with grade9 invasive medullary carcinoma of thebreast.
She was 39 years old whenthe first cell became malignant.
Thehistory covers 1517 weeks, from week180 to week 1697.
During this time, thepatient attended 38 consults.YEAR 3:Week 183 Radical mastectomy on the breast wasperformed to treat primary cancer of theleft breast. Histopathology revealed primary cancerof the left breast.Week 191 Examination of the abdomen revealedno enlargement of the liver or of thespleen. Examination of the axillary lymphnodesrevealed no lymphadenopathy of the leftaxillary lymphnodes. Examination of the breast revealed norecurrent cancer of the left breast. Testing of the blood revealedno abnormality of the haemoglobinconcentration or of the leucocyte count. Radiotherapy was initiated to treatprimary cancer of the left breast.Week 192 First radiotherapy cycle wasperformed. ...The second type of report focusses on a giventype of event in a patient?s history, such as thehistory of diagnoses, interventions, investigationsor drug prescription.
Under this category falluser-defined reports as well, where the userselects classes of interesting events (for example,Investigations of type CT scan and Interventionsof type surgery).A report of the diagnoses, for example,will focus on the Problem events that arerecorded in the chronicle (e.g., cancer, anaemia,lymphadenopathy); other event types will only1All the examples presented in this paper are extractedfrom summaries produced by our Report generator.34appear if they are directly related to a Problem.As it can be seen in Example 2, this type of reportis necessarily more condensed, since the eventsdo not have to appear chronologically and can begrouped in larger clusters.
Secondary events arealso more highly aggregated.Example 2 In week 483, primary cancer of theright breast was revealed by thehistopathology report.
The cancer wastreated with radical mastectomy on thebreast. In week 491, no abnormality of theleucocyte count or of the haemoglobinconcentration, no lymphadenopathy ofthe right axillary lymphnodes, noenlargement of the spleen or of theliver and no recurrent cancer of theright breast were found.
Radiotherapywas initiated to treat primary cancer ofthe right breast. In the weeks 492 to 496, 5radiotherapy cycles were performed.If the focus is on Interventions, the sameinformation in the previous example will bepresented as:Example 3 In week 483, histopathology revealedprimary cancer of the right breast.Radical mastectomy on the breastwas performed to treat the cancer.Radiotherapy was initiated to treatprimary cancer of the right breast. In the weeks 492 to 496, 5radiotherapy cycles were performed.In an Investigation-focussed report, theintervention will be omitted, since they arenot directly relevant:Example 4 In week 483, histopathology revealedprimary cancer of the right breast In week 491, examination revealed noabnormality of the leucocyte count orof the haemoglobin concentration, nolymphadenopathy of the right axillarylymphnodes, no enlargement of the spleenor of the liver and no recurrent cancerof the right breast.It is important to note that although the reportsare generated from the same input content, theyare not exact reformulations of each other, butrather different views of the same content with alarge degree of overlap.
This feature is a directresult of the report requirements.3 InputAs mentioned earlier, the input to our ReportGenerator is a data-encoded chronicle of thepatient?s medical history.
Technically, thechronicle is the partial result of informationextraction applied on clinical narratives,combined with structured data (such as radiologyresults or demographic data), and supplementedwith inferences.
However, in developing ourreport generator, we are currently using aChronicle Simulator, which constructs inventedchronicles, allowing us to ignore for the timebeing some problems that can appear whenusing an information extraction system (beingdeveloped in parallel).
Firstly, the resultingdata is complete and correct, thus allowing usto concentrate on the design and testing of thegeneration and summarisation system withouthaving to take into account at this point errors inthe Information Extraction.
Secondly, our dataon cancer patients is highly confidential, whichmakes presentation of the output of the reportgenerator (e.g., for evaluation with real subjects,or dissemination purposes) very difficult.
Usinga simulator also means that we can have instantaccess to a large number of randomly generatedchronicles, which at this stage of the project arenot yet available.The Chronicle Simulator simulates the historyof a patient?s illness, and links the events inthe history in a manner that closely resemblesthe expected output of the real AutomaticChronicler.
The current output format of thesimulator is a relational database that storessix types of event2 (interventions, investigations,consults, drugs, problems and loci) and 14types of relation between events (e.g., Problem2The term event is loosely used to denote dynamic(such as interventions) as well as static concepts (such asproblems).35HAS-LOCUS Locus, Intervention CAUSED-BYProblem, Intervention SUBPART-OF Intervention,Investigation HAS-INDICATION Problem).
Eachevent has a variable number of attributes, and eachdynamic event is time-stamped with a start dateand an end date3.
A typical chronicle containsaround 350 events and about 600 relations.4 ArchitectureThe design of the Report Generator follows aclassical pipeline architecture, with a contentselector, content planner and syntactic realiser.The Content Planner is tightly coupled to theContent Selector, since part of the discoursestructure is already determined in the eventselection phase.
Aggregation is mostlyconceptual rather than syntactic, and thus itis performed in the content planning stage as wellas during realisation (Reape and Mellish, 1999).4.1 Content selectionThe Content selection process represents the mostimportant component of the Report Generator.Although in some contexts it may be useful togenerate reports containing all the events in achronicle, the most useful types of report arethe focused, summarised ones, for which goodselection of important events is essential.The process of content selection is currentlydriven by two parameters of a report: type andlength.
We define the concept of report spine torepresent a list of concepts that are essential tothe construction of a given type of report.
Forexample, in a report of the diagnoses, all eventsof type Problem will be part of the spine.
Eventslinked to the spine through some kind of relationmay or may not be included in the summary,depending on the type and length of the summary(see Figure 1).
The design of the system doesnot restrict the spine to containing only events ofthe same type.
In future extensions to the systemwhere the user will be able to select facts theywant in the summary, a spine could contain, forexample, problems of type cancer, investigationsof type x-ray and interventions of type surgery.3In the current implementation of the chronicle, timestamps are week numbers starting with the date of the firstdiagnosis.InvestigationInterventionDrugProblemProblemProblemProblemLocusInvestigationLocusLocusInterventionFigure 1: Example of a generated spine structureSpines are not predefined templates, butstructures that are constructed dynamically witheach request and they depend on the type ofrequest and on the length of the summary.Important events are selected according tosemantic relations.
The first step in the selectionprocess is to cluster related events based on therelations stored in the chronicle.
A cluster ofevents may tell us, for example, that a patientwas diagnosed with cancer following a clinicalexamination, for which she had a mastectomy toremove the tumour, was given a histopathologicaltest of the removed tumour, which confirmed thecancer, and had a complete radiotherapy courseto treat the cancer; the radiotherapy caused anulcer, which in turn was treated with some drug.A typical chronicle contains a small number ofclusters, typically one or two large clusters andseveral small ones.
Smaller clusters are generallynot related to the main thread of events.The summarisation process starts with theremoval of small clusters, which in the currentimplementation are defined as clusters containingat most three events4.
This excludes somespecified types of information that will beincluded in the report even when they only appearin short clusters; for example, all reports willcontain essential information such as the initialdiagnosis and the cause of death (if available).The next step is the selection of importantevents, as defined by the type of report.
Eachcluster of events is a graph, with some nodesrepresenting spine events.
For each cluster, thespine events are selected, as well as all nodes thatare at a distance of less than n from spine events,4This threshold was set following a series of experiments.36where the depth n is a user-defined parameterused to adjust the size of the report.
For example,in the cluster presented in Fig.
2, assuminga depth value of 1, the content selector willchoose cancer, left breast and radiotherapy butnot radiotherapy cycle or ulcer.Has_LocusCaused_ByIs_Subpart_OfIndicated_By Has_Locuscycleradiotherapy ulcerleft breastradiotherapycancerFigure 2: Example of a clusterA document plan is typically a hierarchicalstructure that contains and combines themessages to be conveyed by the report generator.Technically, a document plan is an orderedcollection of message clusters, where messageswithin a cluster are combined using rhetoricalrelations, while individual clusters are orderedand linked according to the type of report.The construction of document plans is partlyperformed in the content selection phase,since the content is selected according to therelations between events, which in turn provideinformation about the structure of the targettext.
The actual document planner componentis concerned with the construction of completedocument plans, according to the type of reportand cohesive relations identified in the previousstage.
A report typically consists of three parts:(a) a schematic description of the patient?sdemographic information (name, age, gender),(b) a two sentence summary of the patient?srecord (presenting the time span of the illness,the number of consults the patient attended, andthe number of investigations and interventionsperformed) and(c) the actual report of the record produced fromthe events selected to be part of the content.We focus here on this last part.4.2 Document planningThe first stage in structuring the body of thereport is to combine messages linked throughattributive relations (e.g., combining messages oftype Problem with messages of type Locus ifthe Problem has a HAS-LOCUS relation pointingto a Locus).
In the second stage, messages aregrouped according to specific rules, depending onthe type of report.
For longitudinal reports, therules stipulate that events occurring in the sameweek should be grouped together, and furthergrouped into years.
In event-specific reports,patterns of similar events are first identified andthen grouped according to the week(s) they occurin.
For example, if in week 1 the patient wasexamined for enlargement of the liver and of thespleen with negative results and in week 2 thepatient was again examined with the same resultsand had a mastectomy, two groups of events willbe constructed:Example 5 In weeks 1 and 2, examination of theabdomen revealed no enlargement of theliver or of the spleen. In week 2, the patient underwent amastectomy.Within groups, messages are structuredaccording to discourse relations that are eitherdeduced from the input database or automaticallyinferred by applying domain specific rules.
Atthe moment, the input provides three types ofrhetorical relation: Cause, Result and Sequence.The domain specific rules specify the orderingof messages, and always introduce a Sequencerelation.
An example of such a rule is that ahistopathology event has to follow a biopsyevent, if both of them are present and they startand end at the same time.
These rules facilitatethe construction of a partial rhetorical structuretree.
Messages that are not connected in the treeare by default assumed to be in a List relation toother messages in the group, and their position isset arbitrarily.The document planner also applies aggregationrules between similar messages and employsellipsis and conjunction in order to create amore fluent text.
Simple aggregation rulesstate, for example, that two investigations with37Investigation[id:03,name:examination,HAS?TARGET: {abdomen, breast}]InvestigationHAS?TARGET: abdomen][id: 01,name: examination,Investigation[id:02,name:examination,HAS?TARGET: breast]Figure 3: Aggregation of Investigation messages on the HAS-TARGET fieldthe same name and two different target locican be collapsed into one investigation withtwo target loci (Fig.3).
Aggregation rules ofthis type are designed to make the resultingtext more fluent, however they do not alwaysprovide the degree of condensation requiredby the summary.
For example, each clinicalexamination consists of examinations of theabdomen for enlargement of internal organs (liverand spleen) and examination of the lymphnodes.Thus, each clinical examination will typicallyconsist of three independent Investigation events.When fully aggregated according to conceptualand syntactical rules, the three Investigationmessages are collapsed into one structure suchas:Example 6Examination revealed no enlargementof the spleen or of the liver and nolymphadenopathy of the axillary nodes.However, this level of aggregation that onlytakes into account the semantics of individualmessages may be not enough, since clinicalexaminations are performed repeatedly andconsist of the same types of investigation.
Twoapproaches have been implemented in the ReportGenerator, both of which make use of domainspecific rules.
The first is to report onlyevents that deviate from the norm.
In the caseof investigations, for example, this equates toreporting only those that have abnormal results.The second, which produces larger reports, is toproduce synthesised descriptions of events.
Inthe case of clinical examination for example, wecould describe a sequence of investigations suchas the one in example (5) as Clinical examinationwas normal.
If the examination deviates from thenorm on a restricted numbers of parameters only,this can be described as Clinical examination wasnormal, apart from an enlargement of the spleen.4.3 Maintaining the thread of discourseIn producing multiple reports on the same patientfrom different perspectives, or of different types,we operate under the strong assumption thatevent-focussed reports should be organised in away that emphasises the importance of the eventin focus.
From a document structure viewpoint,this equates to constructing rhetorical structureswhere the focus event (i.e., the spine event) isexpressed in a nuclear unit, and skeleton eventsare preferably in sattelite units.Within sentences, spine events are assignedsalient syntactical roles that allows them to bekept in focus.
For example, a relation such asProblem CAUSED-BY Interventionis more likely to be expressed as :The patient developed a Problem as a result of anIntervention.when the focus is on Problem events, and, whenthe focus is on Interventions as:An Intervention caused a Problem.This kind of variation reflects the differentemphasis that is placed on spine events, althoughthe wording in the actual report may be different.Rhetorical relations holding between simple eventdescriptions are most often realised as a singlesentence (as in the examples above).
Complexindividual events are realised in individual clausesor sentences which are connected to otheraccompanying events through the appropriaterhetorical relation.38For example, a Problem event has a largenumber of attributes, consisting of name, status,existence, number of nodes counted, numberof nodes involved, clinical course, tumour size,genotype, grade, tumour marker and histology,as well as the usual time stamp.
The selectionof attributes that are going to be included in aProblem description depends on a number offactors, including whether the Problem is a spineor a skeleton event, and whether the event ismentioned for the first time or is a subsequentmention.
Aditionally, the number of attributesincluded in the description of a Problem is adecisive factor in realising the Problem as aphrase, a sentence or a group of sentences.
In thefollowing two examples, there are two Problemevents (cancer and lymphnode count) linkedthrough an Investigation event (excision biopsy,which is indicated by the first problem and hasas a finding the second problem.
In Example 7,the problems are first mentioned spine events,while in Example 8, the problems are skeletonevents (the cancer is a subsequent mention andthe lymphnode count is a first mention), with theInvestigation being the spine event.Example 7A 10mm, EGFR +ve, HER-2/neu +ve,oestrogen receptor positive cancer wasfound in the left breast (histology:invasive tubular adenocarcinoma).Consequently, an excision biopsy wasperformed which revealed no metastaticinvolvement in the 5 nodes sampled.Example 8An excision biopsy on the left breastwas performed because of cancer.
Itrevealed no metastatic involvement inthe 5 nodes sampled.As can be seen from the examples above,the same basic rhetorical structure consistingof three nodes and two relations (causality andconsequence) is realised differently in a Problem-focussed report compared to an Investigation-based report.
The conceptual reformulation isguided by the type of report, which in turn hasconsequences at syntactical level.5 EvaluationAutomatic evaluation of the generated reportsis not possible, as there is no gold standardfor such documents.
Additionally, a full-blownquantitative evaluation is not yet feasible, sinceour users are cancer specialists who cannoteasily dedicate time to evaluating large numbersof reports.
However, we have conducted aninformal survey with two cancer clinicians to gainfeedback on the quality of the current output ofthe Report Generator.
To do this, we showed themthree patient records encoded as chronicles, and,for each patient, two types of report producedfrom that record: a longitudinal report, anda summarised report of diagnoses.
The threepatient records were selected to display a varietyof events and sizes (a 6-year history containing621 events, a 12-year history with 1418 events,and a 9-year history with 717 events).Although they were (unusually) familiar withthe coding scheme of the chronicles, theclinicians found it very difficult to extract a usefuloverview of the patients?
histories from the threechronicles we showed them.
In contrast, theyfound the generated reports to be much moreuseful and the quality of the text to be very good.The clinicians commended the reports for theirability to provide a quick and clear view of datathat would be otherwise difficult to access andprocess.
Most importantly, the various reporttypes were judged to be highly appropriate for usein clinical care.Whilst this preliminary evaluation wasconducted with the aim of finding earlyshortcomings of the Report Generator andreceiving feedback from potential users, weare now embarking on a more extensive formalevaluation with cancer clinicians and medicalresearchers with specialist knowledge in the areaof cancer.
We believe, however, that the true testof utility will be the actual use of the ReportGenerator in practice.6 ConclusionsWe have described a system that generates a rangeof health reports on individual cancer patients.At present, our intended readership is composedof clinicians and medical researchers, and the39type of report will depend on his or her statedneeds.
Reports that are required at the pointof care (e.g., for a doctor interviewing a newlyreferred patient, or a team of medics on wardrounds) are likely to be short ?30-second?
pottedhistories.
At other times longer, more detailedreports will be required, as will reports that focuson particular aspects of the patient?s ?journey?through their disease (e.g., from the perspectiveof the diagnoses that have been made, the drugsthey have been prescribed, or surgery they haveundergone).
The system is fully implementedin Java and currently generates this full range ofreports on-the-fly.
A summarised report based onabout 1000 input events is constructed in less than2 seconds, a speed which is highly appropriate tothe demands of clinical practice.While the various types of generated report allshare the same input (i.e., the patient?s chronicle),and thus will have a large degree of conceptualoverlap, clearly there will be occassions wheninformation that is included in some reports willnot be in others.The range of reports for any given patient at anygiven point in their illness thus present a specialclass of paraphrase, with a looser adherance tosemantic equivalence between versions than istypically found in other paraphrase generators, forexample Kozlowski et al(2003), McKeown et al(1994), Power, Scott and Bouyaad-Agha (2003),Rosner and Stede (1994),(1996), and Scott andSouza (1990).
In this sense, our Report Generatoris rather closer in spirit to Hovy?s PAULINEsystem, which generates descriptions of givennews events from different perspectives and withdifferent stylistic goals (Hovy, 1988).
However,we achieve our goal with less reliance onterminological variation and more on structuralvariation at the discourse level.
Syntacticvariation, where it does occur, is almost alwayssimply a side-effect of an earlier discourse choice.Terminological variation is deliberately avoidedto prevent false implicatures; however, we areabout to introduce a further class of readership,namely patients, at which stage we will makefuller use of our lexical resources.7 AcknowledgmentsCLEF is supported in part by grant G0100852under the E-Science Initiative.
Thanks are due itsclinical collaborators at the Royal Marsden andRoyal Free hospitals, to colleagues at the NationalCancer Research Institute (NCRI) and NTRACand to its industrial collaborators.
Special thanksto Dr. Jeremy Rogers who provided us with theautomated Chronicle Simulator that we have usedin all our experiments.ReferencesEduard H. Hovy.
1988.
Generating natural languageunder pragmatic constraints.
Lawrence Erlbaum,Hillsdale, New Jersey.Raymond Kozlowski, Kathleen F. McCoy, andK.
Vijay-Shanker.
2003.
Generation of single-sentence paraphrases from predicate/argumentstructure using lexico-grammatical resources.In Kentaro Inui and Ulf Hermjakob, editors,Proceedings of the Second International Workshopon Paraphrasing, pages 1?8.Kathleen McKeown, Karen Kukich, and JamesShaw.
1994.
Practical issues in automaticdocument generation.
In Proceedings of theFourth Conference on Applied Natural-LanguageProcessing (ANLP-1994), pages 7?14, Stuttgart,Germany.Richard Power, Donia Scott, and Nadjet Bouayad-Agha.
2003.
Document structure.
ComputationalLinguistics, 29(2):211?260.Mike Reape and Chris Mellish.
1999.
Just whatis aggregation anyway?
In Proceedings ofthe 7th European Workshop on Natural LanguageGeneration (EWNLG?99), pages 20?29, Toulouse,France.Dietmar Ro?sner and Manfred Stede.
1994.Generating multilingual documents froma knowledge base: the TECHDOC project.In Proceedings of the 15th conference onComputational Linguistics (Coling?94), pages339?343, Kyoto, Japan.Donia Scott and Clarisse de Souza.
1990.
Gettingthe message across in RST-based text generation.
InR.
Dale C. Mellish and M. Zock, editors, CurrentResearch in Natural Language Generation, pages31 ?
56.
Academic Press.Manfred Stede.
1996.
Lexical paraphrasesin multilingual sentence generation.
MachineTranslation, 11:75?107.40
