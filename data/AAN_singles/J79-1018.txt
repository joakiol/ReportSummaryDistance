American Journal ~f Co~putational Linguistics Microf iohe  18S E M A N T I C A L L Y  A ~ * A L Y ~ I  GA N  E N G L I S H  S U B S E TF O R  T H E  C L O W l i S  M I C R O W O R L DRob.ext F. Simo'nsGordon Benne tthNovakDepartment of Computer SciencesThe University of Texas at AustinC o p y r i g h t  1975A s s o c i a t i o n  forComputationad l~inguE&ti cgABSTRACTA microwor ld  system i s  d e s c r i b e d  for d i s p l a y i n g  visualr e p r e s e n t a t i o n s  of t h e  meaning of a subset of Eng, l i sh  thak.con-cerns a clown t h a t  can balance objecbs and can p a r t i c i p a t e  i nmotion s c e n a r i o s .
Nouns such  as "c lown" ,  " l i g h t h o u s e " ,  "water"etc.
are programs that construct i m a g e s  on a d i s p l a y  s c r e e n .Other  nouns such as " t o p " ,  "edge", "side", e tc ,  a r e  d e f i n e d  a sf m ~ t i o n s  that return c o n t a c t  p ~ i n t s  for t h e  p i c t u r e s .Adjectives and ad rerbs provide data on size and angles of sup-p o r t .
P repos i t i ons  and v e r b s  are d e f i n e d  as semantic functionst h a t  e x p l i c a t e  spatial r e l a t i o n s  among noun ifnages.
Generally,a verb praduces a p r o c e s s  model that encodes  a ,ser ies  oftscenesthat r e p r e s e n t  i n i t i a l ,  i n t e r m e d i a t e  and f i n a l  d i s p l a y s  of thechanges the verb d e s c r i b e s .The sys t em i s  programmed i n  UT.LISP f q r  CDC equipment  anduses an IMLAC d i s p l a y  sys tem.
It] currently o c c u p i e s  3210Kwords o f  core and r e q u i r e s  less t h a n  a second t o  translate asentence i n t o  a p i c t u r e .
Applications,to t e a c h i n g  l i n g u i s t i c sand l a n g u a g e s  are suggested.CONTENTSVIVIIVIII.
.
.
.
.
.
.
.
.
Abstract~cknowledgrnehts  .
.
.
.
.~ n t r o d u c t i o n  .
.
.
.
.
.Background .
.
.
.
.
.
.Pictorial models .
.
.
.An E n g l i s h  subset g r a m r n a tLexicon .
.
.
.
.
.
.
.Grammar .
.
.
.
.
.
.
.Stemantics of the s u b s e tS e m a n t i c s  of p r e p o s i t i o n sVerb semantics .
.
.
.S e m a n t i c s  of scenes .
.Conclwding discussion .R e f e r e n c e s  .
.
.
.
.
.
.Appendix': C l o w n s  programFIGURES1 S t a t e  verbs .
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.2 A motion verb .
.
.
.
.
.
.
.
.
.
.
.
.
.
.. .
.
.
S network .
.
.
.
.
.
.
.
.N p  network .
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
20Dclause network .
.
.
.
.
.
.
.
.
.
.
.
.
.. .
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
P P n e k w o r k3 Process model f o r  MQVE*A d d i t i o n a l  pictures on fraanes Z 4 2ACKNOWLEDGMENTS-T h i s .
resear'.l w a s  s u p p o r t e d  in part by NSF Grant G J 5 0 9 E .I am i n d e b t e d  4ia B i l l  Henfieman, J o n a t h a n  Slocurn.
Michael K .S m i - t h ,  Ken Speaker and Bob Amsler for productive discussiansand help ih designir ig and debugging the programs described hereMy thanks t o  P r o f e s s o r  Woodrow Bledsoe  f o r  making available theIMLAC- d i s p l a y  gnd its o p e r a t i n g  systems., N A T U ~ W  LANGUAGE E S E A R C H  FOR C A ISponsored byTHE N A T I O W  SCIENCE FOUNDATIONGrant GJ 509EP r i v a t e l y  c i r c u l a t e d  as:TECHNICAL REPORT NL-24Department  of Computer  SciencesTHE UESIVERSITY O F TEXAS AT 'AUSTINA p r i l  1 9 7 5SEMANTICALLY ANALYZING AN ENGLISlISUBSET FOR THE CLOWNS mCROWORLDI Int~oduct ionS e v e r a l  examples of semantically based grammars have appeared in t h eliterature s ince  1970.
The most corttplete of these are wknogradls (1972')outline of a systemic grammar for commanding and questioning the  robot  handin the MIT blocks  w o r l d ,  ~ e i d o r n '  s (1972).
rewrite rules for anal'yzing andgenerating ~nglish d e s c r ' i p t i o n s  and transforming them into GPSS programs,and 'the ATN gramdar of questions for the*Lunar Rocks Data Base presentedby Woods, Kaplan and Nash-Webber (1972).
Most other grammars of significansize, such as that of the NYU Str ing  Analysis Project (Grishman and Sager1973) and W e r o u s  g r a m r s  developed for mechanical translation arelargely syntactic i n  orientation and not easi ly  accessible.
Riesbeck alsopresents a semantic grammar m r n e  form of a sek of LISP programs t o  cornputconceptual dependencies (1975).A difficulty with these reports is that th6 systems using the grammarsare typically+ quite large programs--loOK+--and the interactions between thegrammar and the rest of the system are f r e q u e n t l y  quite complicated.
Thereader who wishes to use them as a basis for constructing small naturallanguage understanding system may w e l l  be a t - a  l o s s  as how to-begin.
Hemay have the impression that a natural language pro~essing~aystem is a vastundertaking involving great complexity of programming.He will not be co'mpletely incorrect i n  these impres.sione, byt  in factp-ramming a grammar and.
aemantic system f o t  a micrdworld model to under-etand a small subaet of English is no lonuer a formidable task.
khe6vocabulary can 'be restricted to one hundred o r  so  words, a minimallysufficient s y n t a c t i c  and semantic syatem can be expremed in a few dozenrules supported by a dozen or so aemantic functions, and the pragmatics ofguch microworlds as the STRIPS robot, the blocks world, or the CLOWNSworld presented here, can be modelled very stmply,  The siqplest microworldmodels that comunicete in English require an e f f o r t  somewhere between atwo week homewodc exercise and a graduate term project .
CLOWNS representsabout 6 man-months of effort so far.But is there any real purpose in studying English communication inthese trivial microworld situations?
If we mbdel language behavior inone microworld we remain eeveral orders of magnitude short of understandingthe genera2 use of the l a n g u ~ g e  in t e x t ,  or in verbal discourse and equallyfar from the possible g ~ a l  of tnstructing computers In English to  accomplisha general run of tasks.I: remain Incurably optimistic.
The generalizations about tiny subeetsof language and b+avior that emerge from microworld models graduallyaccumulate in bur human minda into what may eventually prove sufficientunderstanding f i v  the accompliehment of socrally useful tasks.
meinitiation rltual of programing a mini-intelligence is a r)ecessarypre-requisite to programming one that is more sophiaticafed.In th i s  paper, CLQWNS, a simple microworld model i s  presented with anexplicit tu tor ia l  in tent .
A brief grammar is descr ibed that accounts f o rmuch of  the embedding l o g i c  of English canstructions; a flystem of trans-formations of Eng1iah.condtituents to property list representations ofsemantic network structures is followed by their represen, ta t ion  in adynamic process model t h a t  can be operated t o  produce successive s t a t e sdeecribed by t h e  Eng l i sh .
The p r i n c i p l e s  used i n  t h e  system are.a conciserepresentation of my gleanings  from r ecen t  l i t e r a t u r e  dnd of c o u r s e  fromwork of my own and my students.11 BackgroundIn t h i s  s e c t i o n  only a f e w  of hundreds o'f n a t u r a l  language processingpapers are sugges t ed  as entries to t h e l l i t e r a t u r e .
A t  least a dozen reviewsof t h i s  l i t e y a t u r e  are avai lable;  h a l k e r ' s  i s  not  only among t h e  most recentand complete (Walker 1973),  but i t  inc ludes  a s e c t i o n  t h a t  cites t h e  reviews.Since 1970, the langu'age processing l i t e r a t u r e  has been r i c h  i nr e p o r t s  of n a t u r a l  langbage systems that can understand subspts of Englishwith r e s p e c t  t o  various microworlds.
In a d d i t i o n  to previously mentionedwork by Woods, Heidorn and Winoppad, there  are less f requen t ly  c i t e d  b u tq u i t e  interesting theses by Badre (19.72) That learns t o  do very simplenumber problems from text, by Scragg (19-75) that answers ques t ions  about  foodpreparation p r o c e s s e s  and by Bruce (1972) that presents a logic and a systemf o r  answering questions about temporal r e f e r ence .
Schank Riesbeck, Goldmanand Rieger (1975) have p u b l i s h e d a  s i g n i f i c a n t  series o f  papers  on Semanticparsing., inference and generation f o r  an E n d i s h  s u b s e t  concerning fairlyordinary human ac t ion$.
Hendrix, SLocum and Thompson (1973) d e s c r i b e *  asystexh f o r  under.s-ding and generating English about  commercial t r ansac t ionsand Mmple movements.
Hendrift (1975) has a l s o  developed a set t h e o r e t i csystem of proteos models f o r  r e p r e s e n t i n g  natural language meanings.
TheSpmodels are descended from robot  problem solvidg research by Fikes and Nilsson8(1971) and siki6ssy e t .
al.
(19i3).
Harris (1972) provides a tour de forcethat uses problem solving,  inference agd learning methode to teach a robotf a c t s  about its microworld.
Hobbs (1974) presenta an hpproach to  naturallanguage semantics that i g  shown t o  apply to  several applications, diagrams-to-language,, English and Algol-to-Algol, e tc.Much of the most recent work by Abelson (1975) , Charniak (1972 ) ,'Schank and Abelaon (1975), .Mineky (1975), Winograd (1975), Bobrow and Norman(1975), Collins and Warnock (1975), Rumelhart (1975) has progressed beyondthe question of grammar and semantic systems to  that of such larger unitsof semantic organization as Frameg, Stpry grammars, Plane, Schemes, Drems,etc.
Although a t  th i s  writing most of these formulations still fall shortof computational rea l i za t ion ,  it is clear that the research task of theimmediate future is one of formulating and programing structures oforganizationrthat will successfully model much more complicated microw~rldsthan those presently achieved.
A forthcoming book edited by Collins andBobrow will present many of these ideas.LISP is s t i l l  the language of most frequent choice for these experimentsand thanks to the prevalence o f  virtual  memories and virtual LISP,)thel imitat ion  t o  inrcore implementations has essentially vaniehed.
Many ofthe programs cited used require from 100 to 300K10 cel l8  o f  smrage.l'he system described in subsequent .eections resides in 32K on a CDC syegern,although our moat recent additions have caused ue t o  use e v ir tua l  mbryversion of UTLI$P that was developed by - W r y  Tyson.9111 Pic to r - i a l  ModelsIgnoring early w ~ r k  largely lost in the archives of corpora te  memos,Winograd's language processor is essentialky a f i r s t  reporting of how tomap Englpsh sentences into diagrammatic pictures.
Apart from p o t e n t i a lapplications, the pictures are of great valve in providing a universallyunderstood snecond language to demonstrate the system's interpretation ofthe English input, While we are still struggling in early stages of howto compute from English descriptions or instructions, there is much to begained from studying the subset of English that is picturable.
Translationof English i n t o  other more general languages such as predicate ca lcu lus ,LTSP, Ruseian, Basic English, Chinese, etc.
can p r o v m  the same feedbackas to the system's interpretation and must suffice f o r  the unpicturablese t  of English.
But for teaching purposes, computing pictures fromlanguage is an excellent instrument.We began with the notion that it should be quire easy to construct amicrowcizld concerning-a clown, a pedestal ,  and a pole.
The resultingsystem cauld draw pittures for such sentences as:A clown holding a pole balance6 on h i s  head in a boat.A clown on h i s  arm on a pedestal bglances a call clown o r  h i s  head.Figure 1 shows examples of diagsamg produced in responBe 'to thesesentences.Ue $roereesed fhen t o  smtcnces concerning movement by adding land,water, o lighthouse, a dock and a b o a t .
We were then able t o  draw picturessuch as Figure 2 t o  represent the meanings of:A c l o h  on h i s  head e a i l e  a boat from the duck t o  the lighthouse.In the  context of graph ic s ,  two dimensional line drawings ate attractivein the i r  3implicfty of computation.
An o b j ~ c t  is defined a s  a LOGO g r a p h z c sprogram that draws i t  (see Section VI) A scene is a set of  o b ~ e c t s  re-lated in terms of contact p o i n t s ,  A scene can  be d e s c r i b e d  by a set ofpradicstes(BOAT ABOVE WATER) (ATTACH BOAT* WATEqpl)( ~ C K  ABOVE WATER) (DOCK LEFTOF WATER) (BOAT RIGHTOF WK)(ATTACH DOCYky WATE%) (ATTACH BOATXl+kY D O C S yOrientation functions for adjusting starting points and headings of  theprograms t h a t  draw the  o b ~ e c t s  are requlred and these  imply some t r i gono-rnetrlc functians A LISP package of about 650 llnes has been developed byGordon Bennett m p ~ o v i d e  t h e  p l c t u r e  making c a p a b l l l t yWhat 1 s  rnalnly relevant,to t he  computation of l anguage  meanings 1sthat a semantlc s t ruc tu re  sufficient to transmlt d a t a  to the d r a w i n g  packageis easlly r ep r e sen t ed  as a p r o p e r t y  list associated ulth an artlficlalp m e  f o r  the scene For example, A CLOWN ON A-PEDESTAL" resul ts  in t h efollowing s tbqture(Cl, TOK CLOWN, SUPPORTBY C2,  ATTACH(C1 FEET= C 2  TOPXY))(?2, TOK PEDESTAL, SUPPORT C1, ATTACH(C2 TOPXY Cl F E E T X I ) )(CLOUN, E X P R C W D A O  ,) FEET X I ,  SIZE 3,  STARTPT XY, HEADING A)(PEDES~AL.
EXPR(LIU.IBDA() ) TOP X Y ,  SIZE 3 .
STARTPT XY, BEADING A)A la rger  scene has more o b j e c t s  mare attach re la t ions ,  and may ~ n c l u d eaddltlona2 relations such as INSIDE, LEFTOF, RTGHTOF, e t c  In any caset h e  scene is, s 'eaantlc+lly represented a s  a set of o b j e c t s  connected by1 3r e l a t i o n s  in a graph (1 e a semantlc network) t h a t  can e a s l l j  b e  s t o r e das a property list wlth references to other  objects  with p r o p e r t y  l istsl r We take  "balance" stand' support  "hold  ' is on" e t c .
as  s t a t edescribing verbs in contrast t o  t h o s e  such as "sail",  ' r idef  , f l y '"buy e t c  whlch  descr lbe  changes of s t a t e  To model t h e  meaning ofs t a t e  verbs  r e q u l r e s  only  a s i n g l e  diagram to show the  s t a t e  desc r ibedFar change o f  state verbs a serles of p l c t u r e s ' i s  required and a processmodel IS used t o  construct a sequence of s t a t e  d e s c r l p t l o n s  each of vhlckcan produce a diagramIV A n  Engllsh Subset  GrammarWe take the Woods ATN as a baslc formalism f ~ r  describing a grammarcomputationally This system has been well-described by  Woods (19M), ltsa p p l i c a t i o n  t o  E n g l l s h  semantics by Simmons (1973) and a UTLISP vers ion  wasprogramed  by Matousek & Slocum (1972) Whlle generally ignor ing  theoreticallssues In linguistics, we do use s u c h  p r i n c i p l e s  as the f ac t  t h a t  sentencesare composed of c o n s t i t u e n t s ,  that there are s y n t a c t x  rules definlngacceptable sequences of constibuents.
and t h a t .
u n d e r l y i n g  t h e  Engllsh s ta t r -ment the re  i s  an idea that can be expressed in Sume o the r  language bytransformations on the Engllsh constituents The under ly ing  idea  can beexpressed in a formal language such as some version of predicate  logic, ori n  a computer d a t a  s t r u c t u r e  01 in a l a n g r ~ a g e  of f u m t l o n s  and arguments s u c hIn present ing  t he .
?o l lowinp  grammar and semantlc system our  emphasis~s on deal ing w i t h  the h i g h l y  d a r i a b l e  nature of Fnglish embedd ings  T h i smeans t h a t  w e  have bean more in teres ted  in the  many forms of dependent14clau~e--~re~ositiondl phrase, relative clause, inf lnitive, p a r t i c i p i a lphrase, re la t ive  c p n j u e t i v e  clause, etc,--than in the f fne  d e t a i l  onnoun phrase, noun-noun combinations; and the  f i n e  grain of verb sttingsWe have a l so  f o r  t h e  moment ignored o r d i n a r y  conjunctions in view of theclear treatment of fe red  by Woods, Wipograd and Grishman; each of whompoints out t ha t  an and o r  an " ~ r "  tr iggers  a special subgrammar thatattempts to f i n d  a s t r u c t u r a l  r e p e t i t i o n  of a cons t i t uen t  that was justcbmpleted.
Bqcause of o u r  interest in embeddings we have chosen t o  considerrelat ive clauses a t  t he  toplevel  of the grammar where p o s s i b l e .The fo l lowing  constituent description defines a very f l u i d  s u b s e tof English with great potential fo r  embeddings.CLAUSE -, (NP) + (VP)-+ (DCLAUSE) + CLAUSENP 4 ('APT) +.
(ADJ*) + N + (DCLAUSE)-+ PRON + (DCMU$E)VP + VG a +  (NE')I?
G - (AUX*) + (ADY) + v + (ADV)DCLAUSE -t PPI RELCON'JI~RELCLAUSE\~ VMODPP + PREP* + NPBEUDNJ -, RCONJ + CLAUSERELCMUSE -+ (RELPRON) + PRONCLAUSEPRONCUUSE -t VO( WP + ,VG .+ (DCLAUSE)vMoD + ~ P A ~ T / ~ P ( ~ P R ~ ~ P A R T / v P I v I N F / ~VPAST '+ SUPPORTED SAILED, .
.'
V I N F  -+ TO SUPPORT, .
, .VPRESPART +.SUPPORTING, S A I L I N G , .
.RELPRON -+ WHO, WHICH,, WHAT THATRGONJ -, BEFORE, AFTER WHILEAUX -+ I S  WAS; HAS,  HAVE, HwADV + HDRIZONTALLY.
VERTICALLYV ' SUPPORT $ALAPJCE, S A I LPRON + F@, SHk, ET , THEY .
,ART + A ,  AH, THE ...AD5 -+ LARGE, SMALL, TINT'1 N  + 'CLOWN.
'PEDESTAL, BOAT, DOCK,'FEET, TOP, SIDE ..,I n  the a'bove: + means " fo l lowed  b y 7 ,  (x) means optional x .
x* p e d n s  1\Ior more means "or", .
.
.
means etc .
,.
md x/y means x is thel n i t i a  "element of p. The arrow.+ means "defined by:'.The form of notation above-is a concise recurgive description f c r  theorde r ing  of constituents.
It shows nothing a b q t  t h e  semantics t h a t  maybe inc luded  in the s p t e m ,  and the flow of control far parsing is not  a ta l l  wbvious.
Augmented Transition Netwcwk.graghs foLlowing Woods show thecond i t ions ,on  elements of the sentence and the f l o w  of c o n t r o l  i n  termsof d i r e c t e d  arcs leavlng*nodes in a two-dimensisned diagram of the grammarEven more i rnpar tan t ly ,  an ATN p rov iaes  f ~ r  t h e d i s p l a y  of semanticoperations t h a t  are to be u n d e r t a k e n  on each const2tuent.
The conventionf o r  drawing an ATN is to write conditional statements above the a r c s ,  ando p e r a t i o n s  below.For example :S ;= NP + VS-4- NPP,USH NP.
PUSH VS PUSH NP,'fl G T R  SUB(PUT(LAST(GETR V3) (PUT (LAST(GETR V).
)"SUBJ(GETR SUBJ) ) "OBJ [GETR O B J )  )In t h i s  n e t ,  if t h e  sentence begins with an NP, the PUSH NP will returnEhe structurk of an NP iq t h e  * r e g i s t e i .
A t  that point t h e  r e g i s t e xSUBJect is set t o  'that va lue .
When a VStr ing  i s  analyzed.
by PUSH VS 'thenV is s e t  t o  the value'VS returned.
At this point further structure isbvllr-by PUTting on the verb's property lisk t h e  attribute SUBJ w i t h  t h ev a l u e  c o n t a i n e d  $n t h e  r e g i s t e r  SUBJ .
S i m i l a r l y ,  when an OBJect NP isp a r s e d ,  it can be added to the s t r u c t u r e  of V a n d , t h e  value of S can beP O P p e d - 4 .
e .
r e t u r n e d - - a s  the  register V>which will allow access to thep r o p e r t y  l i s t  of rhe verb on which t h e  values of s u b j e c t  and o b j e c t  canbe found by consulting those p r o p e r t i e s  as i n  (GET (LAST(GETR V)) "SUBJ) .The func t i on  LAST i s  used i n  thi 's  exhmple t o  obta in  t h e  last element ofa l i s t .Not i ce  t h i s  e ~ a m p l e  i l l u s t r a t e s .
t h a t  our g e n e r a l  approach t o  recordingvsemantic information i s  one of putting d e t a i l e d  information such as  thearguments  o r  cases of a v e r b  on the p r o p e r t y  l i s t  of that o b j e c t .
Thusthe  r e s u l t  of p a r s i n g  "clowns hold, poles" wi th  the  above n e t  is:(HOLD SUBJ CLOWNS, OBJ POJ+ES)I n , f a c t ,  it is necessary to create  new names f o r  each word used in asentence--to avoid clobbering d ic t iona ry  information--so the result fromactual  nets  would be:(C1 TOK HOLD, SUBJ* C2, OBJ C3)(C2 TOK CLOWNS, NBR PL, DET INDEFj(C3 TDK POLES NBR PL, DET INDEF)Tke:- r e l a t i on  TOK shows that C1 is,  an instantiation of'-the lexiix.11 itemHOLD.
In this convention for stating property list values, the firstelement is the ATOM and each pair separated by comas IS an ATTRIBUTEand i-ts VALUE.The Wdods system also b t o r e s  it$ pa-st sta tes  and provides f o r  backupin the  event that no cond i t iona l  arc succeeds and yet there is s t i l lsentence to be scanned., In  t h i s  event the system recursively consultsthe state leading to the current node'to see-if there were arcs that wer.euntried that lead to a successful pars ing  f o r  the sentence string.
T-he* register has special s i g d f i c a n c e  in that ordinarily it contains thesentence element under the scanner, except wheo a subnet such as  NPreturns a value, in vhidh case the POP arc sets  the value in the  *register.
The overall flow of control through an ATN is that * is s e tto the first element of the sentence, then t h e  topmost net, CLAUSE ot S,a p p l i e s  the grammar in topdown fashion.
Each t h e  a constituent --aword, a'phrase ,  a clause--is recognized and c o n t r o l  i s  passed to anothernotie, the scanner' is advanced and parsing proceeds from the new node.For programing s i m p l e  grammarg without much embedding and withoutbackup capabilities a ~ 1  ATW may be used a8 a f l o w  c h a r t  to des ign  t h eprogram.
I f  more complex grammars are requhed ,  Woods has provided acomplete s e t  of language conventions -and gn Interpreter with the  capability18of storfqg past states and backup.hxicdn  t English wpsds; their lord claerres a d  f eaturea and otherinformation such ae program definitioos e t c .
are recorded on a propertylist structure for eady access by fun&tions used in the ATN.
The f o l l o wing examplee illustrate this structure:(cW (N T) (NBR SING) (EXPR (LAMBRA().
.
.
.)).
.
.
(FEET XY) (ANIM T))(BALANCE (u T) (%ENS@ PRES) (EXPR(LAMBDA(ST).
.
.
. ))
)(ON (PREP T) (EWR(LAMBDA(N1 N2).
.
.)
)( W R O ~ ( P ~ N  T)(NBR (SING PL)) (PERSON T) (RELPRON T) )The fuaction (PUT X Y 2)--e.g.
(PUT "CLOWN "NBR ' ' S I N G ) - Y I ~ ~  add the pair(Y 2) to the atom X or replace the value of X ' s  attribute Y with the newvalue Z.
The function (GET X P) will then return the value Z.
Such ATNfunctione as CAT ahd GETP simply call GET tdth the first argument sett o  the value of the word under the sentence scanner.The l$XPR yalues associ'ated with an Engaish word are a e d t i cfunctions that are explained later.
b y  modificaticms to t h i s  simpjrr?spheme can be aaded t o  provide for morphorogical variants referring-toroot f o m  instead> of rhquiring a. definition oi - thef  r own, and anattribute;  POUOWEDBY, can be used t o  cbllact  multiple ward terms.
Thebasic property list representation of a dictionary can be expanded t oinclude multiple word senees as well, but it always re,tains the characteraE a b a s i c  LISP syetem for storage and retrieval of data aesaciated wi than atom,/ / PUSH DCLAUSE SNTFPUSH VPfSENDR SUBJ POP (GETR HD) THD + *(EVAL ('(GET * IITOK) *ITST CL1 (GETR ?ID) POP (GETR m) (NULL Sl?TC).
,.
-Gltammar: This is thk t op lkve l  net f o r  t h e  grammar.
I$ is namedclause and transfers control to s ta tes  C1 and C 2  each of which can POPa v a l u e  in the event that the sentence string has been completed o r  aclause successfully paased.
The barred pointer,* , -indicates a HOP,operation which passes control without advancing the sentence scanher orchanging the  * regis ter .This net accepts sentences beginning with an NP, a VP o r  a dependentclause.
[.ID is the name of a register that generally contains the lastconstituent found.
The UNHOLD arc emanating from C1 causes a l i s t ,  HOLD,to be processed.
HOLD conta ins  Dependent Clauses that are missing soareelement that delays their semantic processing.
Phx example, "on his nose"in "on hie nose a clown balances" caanot be eema@,~fcally procesped untilll~lovnl' ehovs up as a following NP.
The net ie sat i s f i ed  by a sentence11 or-by a single noun phrase euch ae a clown in n boat" dr by an imperative,"balance a pedestal".
It ddee not ac'cept queetion forms; that would requirean additional arc from CLAUSE l a b e l l e d ,  PUSH QFOBN SNTC.
The ordinary form ofan arp is an arc-label such as CATegory, PUSH,, POP, TST followed by its arguLment, followed by any-condition statement.
SNTC is simply the variable tha t20conta ins  any remaining sen tence  string, s o  t h e  condition SNTC is trueexcept when t h e l s t r i n g  has  been..exhausted.
I f  SNTC is  n i l ,  t h e r e  is nopoint in f u r t h e r  process ing.The arc PUSH W (SENDR sUBJ)~will send the va lue  of t h e  registerSUBJ to the  qubnet W.* If VP is S U C C ~ S S ~ ~ ~ ,  t h e  o p e r a t i o n  under t h eqrc (EVAL-((GET * TOK) * ) )  w i l l  caJ1 f o r  a f u n c t i o n  associated with theverb t o  t r ans l a t e  the  s u b j e c t ,  ~ b j e c t  and complements of the sen tencei n t o  the p a r t i c u l a r  semantics of p i c t o r i a l  r e l a t i o n s .
The verbs SUPPORT,S A I L ,  and MOVE are defined as semantic f u n c t i o n s  i n  seet ion V. PreAp o s i t i o n s  are a l s o  d e f i n e d  as semantic func t ions  in t h a t  s e c t i o n .When HD is  popped from C1 or  C 2  it conta ins  the name of an o b j e c tondthe proper ty  l ist  a s  descr ibed  e a r l i e r .
The resblt of a pa r se  is  anatom name whose p roper ty  l i s t  contains l a b e l l e d  references t o  i t sarguments which are either symbolic or numeric values, or r e f e r e n c e s  t oother  atoms which have p r o p e r t y  l ists.
~ h " i s  of course i s  a proper tyl i s t  r e p r e s e n t a t i o n  of a semantic network.CAT PRONI'Ch~ f- (ANTEC * GLST)1 DET + DEF I(NP~) POP HD (PUT HOI .IT C T  CIY T CAT NIDET 4 INDEF HD (MAKETOK*)PUT HD "DET DET"MOD MOD* SENDR is usually signified i n  t h e  nets by ).
Thus + SUBJ meansq(SENDR SUBJ (GETR SUBJ)) X + Y meana (SETR X (APPEND Y (LIST (CETR X)) ) )T h i s  NP net is operated dh the tall, PUSR NP T. It allows fo r  aprono--or a sequence of (arr)(adj*) N. Its operation i n t l udes  somebasic semantic transformations on the head nbun.
If t he  sentence beginswith an-ARTtcle, the determination is set t o  DEPINITE or  INDEFINITEdepending  on what feature GETF finds associated wdth it.
A pronounimplies d e f i n i t e  determination,  and a noun phrase wi thouban  articleimp l i e s  i n d e f i n i t e  exceptdn the  c a s e  of proper nouns n o t  considered i nthis net, Adje'ctives are appended t o  a list named MOD.When the noun head is encountered, MAKETOK creates an atomic name ~iusing the LISP function (GENSYM C) and puts on its property l i s t ,  t h ep a i r ,  TOK WORD.
The remaining operations under the CAT N arc add p rope r tyvalue pa i rs  t o  this TOKen of the noun.
From NP2 the  atc ,  POP HD(PUTMODS HD), is encountered.
PUTMODS i s  a semantic funct ion t h a t  workswith adjectives and adverbs i r i  the following fashioe:A n  adjective, e.g.
big, has the following lexical structure:(BIG ADJ T, POS T, TYPE SIZE, VALUE 7)PUTMODS will for each adjective obtain t h e  TYPE and VALUE and p u t  them ont h e  noun's property list.
Thus, "a big red clown" results in:(C1 TOK CLOWN, DET INDEF, NBR SING, SIZE 7, COLOR 1)where COLOR 1 assumes that some mechanism f o r  ass ign ing  c o l o r s  likes numbersas inputs, even as the drawing programs require numerical values f o r  3 I Z E .The result of parsing a noun phrase with thismetwork i s  t o  r e t u r n  thesemantic structure of an objec t  as a set of property-value pairs associatedw i t h  t he  name Ci which is a tbken of the word used.
The n e t  is not sophis-t icated as NP definitions go, much more complete grammars of t h e  NP areoffered by Winograd and Woods.
The lack of a continuation into a modifying22c l a u s e  such as a PP o r d r e l a Y i v e  c l a u s e  is d e l i b e r a t e  i n  t h a t  we prefert o  rb tu rn  con t ro l  t o  t h e  structure c a l l i n g  t he  NP s o  t h a t  i t s  s y n t a c t i c -semantlr p o s i t i o n  in t h e  h igher  sequence can be used by t h e  DependentClause n e t .
'PUSH NP SNTCr PUSH PP "BY P A S VO B J  + 3PUT V t ' S U B J  SUBJ SUBJ +- *PUT v !ISUB-J SUBJ'if "OBJ'OBJPUT Y "OBJ OBJTST AUX=BE V=ED POP v (PUTI v I'SUBJ SUBJ)PA$V + TO B J +  S U B JS U B J  t NIL tThis VP net first pushes a VG, verb group.
VG is n o t  shown in t h i sd iscuss ion,  b u t  i t  scans t h e  sentence string for an accep tab le  sequenceof auxilaries, and adverbs domindt'ed by a verb.
It makes a token of theverb and puts  i t s  tense and a u x i d i a r i e s  on that token as prope r ty  valuepairs.
I t  returns t h e  token name.
In  exiting node VP1 we seek an NP asa syntactic OBJect and finding one, add the subjgct and object as propertiesof t h e v e r b .
If no NP folloys t h e  verb,  t h e  next a rc  tests to  deberminewhether t h e  verb is a passive form and if so s e t s  the flag PASV, setso b j e c t  t o  sub jec t ,  and s u b j e c t  t o  n i l .
I f  a "by" p r e p o s i t i o n a l  phrasefo l lows ,  i t  becomes the  subject .
Additional modi fy ing  phrases are pickedup by the D C U U S E  loop.
No actlons are associated with PUSH DCLAUSE arcs23because each DCLAUSE c a l l s  semanti,~ routines that bind the modifier t othe noun o r  verb i t  modifies--frequently not  the one i t  ilnmediatelyfollows *The YP net accepts a verb, a verb group, o r  a verb group followed byan NP and a s t r i n g  of PPs o r  o t h e r  modifying clauses.
It lacks the c a s e  oftwo NPs t o  account f o r  direct and i n d i r e c t  o b j e c t s .PUSH PI' (GAT PREP)h rlHD + * A POP HD T 4PUSH RELCONJ (CAT RCONJ)TST GETR SUBJ 1CAT RPRON @ PUSH, PRQNCLAUSJ) (.EVAL ((GET * T ~ K )  * ) TST 'I ISUBJ + (ANTEC * GLS?
((HOLD *)J. SUBJCAT v "ED "TNGP11 TST TSUBJ + (VBMATCH * GLST)p,HD +--I. SUBJ* = "TO.
NEXT = VThe DCLAuSE.net i s  f a i r l y  i n t r i ca t e  i n  t h a t  it accounts  f o r  PPs,r e l a t i v e  pronouh clauses, i n f i n i t i v e  modi f i e r s ,  p a r t i c i p i a l  c Wses andclauses introduced by re la t ive  c o n j u n c t i ~ n s .
A PP is w e  or more prepositiotrsfollowed by an NP.
A RELCONJ s t a r t s  wi th  an RCONJ such as "while",  "after1'e tc .
and may be followed by a DCLAUSE or  a  CLAUSE.
A r e l a t ive ,  pronounclause begins  w i t h  an o p t i o n a l  r e l a t i v e  pronoun and is fol lowed by a pronounclause which i s  either a VP or  an NP fohlowed by a VG an6 o p t i o n a l  DCLAUSES.For the moment we i n s i s t  for  computational economy t h a t  a r e l a t i v e  clausehe  introduced by a r e la t ive  pronoun; a c t u a l l y  the f m  of a pronominalclause is s u f f i c i e n t l y  rwell  defined that  PUSH PRONCLAUSE can i d e n t i f y  i twithout a r e l a t i v e  pronoun -in most cases.When a pronoun i s  found, here or  i n  an NP, the- func t ion  ANTECedentis called to scan t h e  l i s t  of prece'ding nouns, t o  f i n d  t h e  b e s t  agreement- inperson ,  number, and gender.
The f u n c t i o n  VBMATCA on the e x i t  from node D2i s  a f u n c t i o n  t h a t  seeks t o  f i n d  the  head that the p a r t i c i p i a l  or  i n f i n i t i v ephrase is modifying.
As in PREPMATCH, the head noun is frequently not theone just preceding  t h e  modifying p h r a s e  and-the p a r t i c u l a r  v e r b  and i t sending are usedl ip choosing i ts  head nauh o r  verb .
GLST i s  t h e  name of al i s t  of cand ida tes .I n  ' the event  t h a t  the DCLAUSE i s  a r e l a t i v e  pronoun or a p a r t i c i p i a l  o ri n f i n i t i v e  c o n s t r u c t i o n ,  t h e  f i n a l  s t e p  is  t o  ca l l  the  s e m n t i c  func t ionassociated wi th  t h e  ve rb  and e v a l u a t e  i t  f o r  t h e  subject, o b j e c t  andcomplemeht arguments.
DCLAUSE i s  undefined f o r  a d j e c t i v a l  and a d v e r b i a lclauses t h a t  can be used~as modif iers .
When defined they can be  added asa d d i t i o n a l  arcs.CAT PREP "NEXT UPUSH NP (GETR PREP*) POP Hb (PREP 4- NIL)PUT "PREP PREPHEAD + *(PREPMATCH * GLST)This a b b r e v i a t e d  PP net i s  presented  t o  c a l l  a t t e n t i ~ n  t o  its method foraccepting a ~ t r i n g  of p r e p o s i t i o n s  and f o r  accomplishing t h e  semant ics  byc a l l i n g  PREPMATCH.
Although S e c t i o n  IV concerns  semantics, i t  i s  warthnot ing  that  t h e  eftect of PREPMATCH i s  t o  add  information t o  the semantics t r u c t u r e  r e p t e s e n t i n g  a noun o r  a verb .
For exa~ples:"a clown on a p e d e s t a l  o n  h i s  nose I @(C1 TOK CLOWN*, SUPPORTBY #PEDESTAL, BALPT #NOSE)I1... balances  on a  p e d e s t a l  on his nose"( C 2  TOK BALANCE, TENSE PRESENT, COMPS (IPE~ESTAL #NOSE) )Thus i f  a  verb i n t e r v e n e s  b e w e e n  a voun and p r e p o s i t i o n a l  p h r a s e s  t h a tmight ntodify i t ,  t h e  PPs become COMPlements t o  t h e  ve rb  under the a t t r i b u t eCOMPS, and t h e  verb's semantic f u n c t i o n  has  t h e  t a s k  of r e l a t i n g  i t  t oo the r  elernems of t h e  sehtence .V Semantics of t h e  Subse tParsing a sen tence  wi th  t h e  ATN grgmmar j u s t  desc r ibed  r e s u l t s  i n  aget of symbols edch of which is  f u r t h e r  c h a r a c t e r i z e d  by a t t r i b u t e *  andvalues on a p roper ty  l i s t .
I f  no semantfc f u n c t i o n s  were app l ied- - suchas those  a s s o c i a t e d  wi th  prepos i t iwns ,  modi f i e r s  and verbs--the r e s u l twould be a  tree s u c h  as t h e  fo l lowing:(C1 TOK BALANCE, SUBJ (C2 TOK CLOWN, DET DEF),OBJ  ( C 3  TOK POLE, DET INDEF) ,COWS (C4 TOK HANDS, POSSBY C2, PREP (XI))i e  e f f e c t  a?
t h e  sernaotic f u n c t i o n s  f o r  t h i s  sen tence  is t o  produce t h ef t l lowing :(C2  TOK CLOWN, SUPPORT C 3 ,  S I Z E  3 ,  ATTACH ((22 C 3  ) )XY XY( C 3  'OK POLE, SUPPORTBY.C2, SIZE 3 ,  ATTACH (C-3 C 2  ) )xy SYw h i c h  i s  minimally s u f f i c i e n t  information f o r  the  g r a p h i c s  t o  produce asingle i c t u r e  t o  represent  the s t a t e  of affairs t h e  .
sen tence  desc r ibed .I t  s p e r f e c t l y  f e a s l b l e  t o  compute t h e  s y n t a c t i c  form f i r s t  and thenapply  the semant ics ,  but  as Winograd, Riesbgck a n d m o t h e r s  have found, t h eearly a p p l i c a t i o n  of semant ics  can be used t o  minimize t h e  ambigu i t i e s  oft h e  syntax.
For this r eason ,  as each p r e p o s i t i d n a l  phrase  is parsed asemantic f u n c t i o n  i s  ca l led  t o  determine which noun o r  verb  might be i t sgovernor o r  head.
Each t ime a  Verb Phrase  i s  completed, a s e m a ~ t i cfunc t ion  i s  c a l l e d  t o  t r a n s l a t e  i t s  s y r l t a c t i c  arguments, i.e.
SUBJ, O B J ,COWS, i n t o  p i c t o r i a l  r e l a t i o n s  such a s  SUPPORT, ATTACH p o i n t s ,  e t c .Semantics of P r e p o s i t i o p s :  A f t e r  a PP c o n s t i t u e n t  has  been i d e n t i f i e d ,a f u n c t i o n  PREPMATCH is  c a l l e d  w i t h  a l is t  of t h e  nouns and verbs  s o  fa rencountered,  GLST.!
Each preposli t ion is  a s s o c i a t e d  w i t h  a func t ion  t h a texamines a cand ida te  head from GLST-hnd the  naun o b j e c t  t o  decerp ine  i f  t h ecand ida te  can dominate t h e  PF i n  ques t ion .
For example "ON1' is defihed asa LISP f u n c t i o n  with two arguments.
When ca l led  wi th  '"clown'!
and "nose",ON r e t u r n s  a s t r u c t u r e  in which the  ATTACH poifit  of the c lom i's the XYcoord ina tes  of h i s  nose .
When c a l l e d  w i t h  "clown" and1"pedes ta l"  itr e t u r n s  a s t r u c t u r e  i n  which t h e  p e d e s t a l  SUPPORTS t h e  clown.
If d a l l a dwi th  "nose" and "pedes ta l"  i t  r e t u r n s  NIL sihce nose i s  n e i t h e r -  ah inde-pendent p i c t u r a b l e  object  nor a p a f t  of  the pedestal.PREPMATCH does t h e  book-keeping by c a l l i n g  the p r e p o s i t i o n  f u n c t i o nwith each candidate from t h e  GLST, If*he cand ida te  is  a verb  t l h a ~can be modified by t h a t  p r e p o s i t i o n ,  PREPMATCH adds t he  PP to the verb'slist: of'C0@S, and t h e  verb  gemantic f u n c t i o n  w i l l  i n t e r p r e t  i t .
Tliefunction BESIDE o f f e r s  a simple example d e f i n i t i o n  t h a t  shows how dnep r e p o s i t i e n  can imply ano the r .
(BESIDE(LAMBDA(N$ N2) (RIGHTOF N 1  N2) ))(RIGHTOF (LAMBDA (N1 N2)(CO'ND ( (AND (GET N 1  "PICT) (GET N 2  "PIcT) )(PUT N 2  "RIGHTOF Nl) (PUT N1 "LEFTOF N 2 )  )(T NIL) 1 1)Thue.
"a bes ide  b" is quite  arbitrarily interpret& to mean "b ie ~o ther i g h t  of a".
RIGHTOF r e q u i r e s  t h a t  i t s  two arguments be p i c t u r a b l eo b j e c t s .
"A clown on h i s  nose beside a p e d e s t a l r '  causes  PREPMATCH((NOSE, CLOWN) PEDESTAL).
PREPMATCH f i r s t - c a l l s  (BESIDE NOSE PEDESTAL)I I BESIDE ca l l s  RIGHTOF which r e t u r n s  pecause nose" is  no t  an independentPICTure.
Then PREPMATCH c a l l s  (BESIDE CLOWN -PEDESTAL) and t h e  r e t u r n  is( e s s e n t i a l l y * )  PEDESTAL RIGHTOF CL,OWN.Somewhere else i n  t h e  f o r e s t ,  t h e  r e l a t i o n  RIGHTOF w i l l  be i n t e r p r e t e dt o  mean con tac t  between le f t s i .de  a n d ' r i g h t s i d e  of two objects.
So we.qui tearbitrarily' force a .
p .
l t e ~ i s e  meaning--so fa r  s u f f & c i ~ r i t  f o r  our  purpose--om the geomet r i ca l ly  vague t e r m ,  "beside".
I n  g e n e r a l  t h e  p r e p o s i t i o n a lsemant ics  f o r  a micrpworld model are d e f i n a b l e  where the number of p o s s i b l emeanings f o r  each p r e p o s i t i o n  are l i m i t e d  by t h e  s i t u a t i o n .
~h the CLOWNSw o r  I d ,  "with" "on" and "by" have m u l t i p l e  meanings t h a t  a re  s e l e c t e d  .
inaccordance wi th  t h e  c o n d i t i o n s  d e s c r i b e d  by t h e i r  semant ic  f u n c t i o n s .I n  .
c o n t r a s t ,  "from" s o  far has a s i n g l e  meaning.Verb Semantics:  The Engl i sh  verb i s  a remarkably complex conceptua lo b j e c t .
It may c a r r y  s e v e r a l  aeanings dependent on i ts  arguments and onits l a r g e r  con-text.
It communicates in fo rmat ion  about  temporal  orderingof i t s  process  by a u x i l i a r i e s  and i t s  s u f f i x .
It  i m p l i e s  one o r  a  sequef i t i a lseriee of events.
Its s y n t a c t i c  p o s i t i 6 n  and ending can be used to s i g n a lt h a t  i t  is a pre-modifier  o r  a post-modif ier  f o r  ano the r  verb or  a noun.It is p a r t  of a c l a s q i f i c a t i o n  s t r u c t u r e  and may imply s p e c i a l  argumentv a l u e e  t o  some more g e n e r a l  ve rb  h igher  i n  t h e  c l a s s i f i c a t i o n .
Far example.
* Where these examples u s e  words trhe f u n c t i o n s  are us ing  C i  tokens  o rwords appropriate.2 8" re to r t "  means '.
'answer sharply" ~ h i c h  means "comutlicate sharply  ii~ responset o  a communi.cationt'.
The verB mdy imply Gpecial arguments i n  another way;t he  verb,  "sail", impl ies  t h a t  "someone caused a  veh ic le  t a  move through af l u i d  by a means involving aerodynamics from 'one place t o  another" Ift h e  sentence omits some of these  arguments, the  verb semantics impliesthem.
Thus we can sail a boa t ,  a k i t e ,  an a i rp l ane ,  a saucer, b u t  hardlya locomotive or  a desk.
I f  t h e  arguments are idappropr ia te  w e  can ascendthe  c l a s s i f i c a t i o n  tree and c a l l  the  statement a metaphor.
I n  a d d i t i o n ,the verb allows i t s  arguments t o  occupy p r a c t i c a l l y  any s y n t a c t i c  pos i t i onin t he  c lause  o r  sentence and must s o r t  theui out oa the  basis of semanticinformat ion.By analogy, a verb is a dramatic skit with a  v a r i a b l e  set of charac te r stha t  successively r e l a t e s  t h e  character  r o l e s  t o  one another  over a  p e r i o do f  tjme.
A verb has a s e t  of a'rguments, case  roles f i l l e d  by semanticob jec t s ;  it has an i n i t i a l  s t a t e ,  a  set of r e l a t i o n s  among i ts  charac te r s ;a s e t  of in termedia te  s t a t e s ,  one o r  more sets of relations among i t s  char-acters;  and a f i n a l  o r  r e s u l t i n g , , s t a t e  s i m i l a r l y  chara f te r ized .
In addition,receht  work p a r t i c u l a r l y  by Abelson and Schank suggest t h a t  i n  a givenc u l t u r e  a verb models a s i t u a t i o n  t h a t  is predic tably  preceded and fo l lowedby rntrre o r  less t y p i c a l  s i t u a t i o n s .
I f  a person s t r i k e s  another person, , thefirst one was probably angered by the  second, dominates the second, etc.while  the second, f e e l s  pa in ,  map react i n  anger, e t c .
So i t  i s  reasonableto scppose t h a t  our experience is organized i n  scripts,  frames, scenes,dremes, e t c .
whose component elements include the dynamic skits that verbss i g n i f yIn  the CLOWNS world a verb selects an associa ted  semantic funct ion t osort its arguments into t y p i c a l  r o l e s  i n  i t s  picturable dr.amatXc s k i t  andre la tes  them i n  t y p i c a l  ways f o r  d i s p l a y  a s  initial, i n t e r m e d i a t e  and F i n a lc o n d i t i o n s .
In  t h i s  rashion, t h e  verb "sail" r e lq tes  an Agen t ,  a Vehicle .a Medium, a S t a r t  point .
,  I n m r m e d i a t e  p o i n t s ,  a Goal p o i n t  and possibly aMeans of movemant.
#The semantic r o u t i n e  must t r ans l a t e  syntactic entitiess u c h  as S u b j e c ~  Objecr ana Complements i n t o  these roies, i.e.
b i n d  t h evar iab les .
I t  m u s t  then r e l a t e  t h e m ' i i i  i i p p r o p r i a t e  ways-- A G E N T ' I N  VEHICLE.VEHICLE AT STARTPOINT, VEHICLE'ON MEDIUM, e t c .
- - f o r  each of  i t s  temporals t a t e s  and call t h e  graphics sysrern t o  d i s p l a y  them.Support i s  a. verb t h a t  describes a s t a t i c  S ing le  s t a t e  of af?a.irs i n"The w o r l d  i s  suppo r t ed  on a t u r t l e ' s  back".
The ve rbs  "balance", '.
'support",' ' s tand' '  "huld".
a re  each as-sociated w i t h  the semantlc t u n c t  i o n  SUYPUK'I'~.When a VP constituent u s i n g  one o i  these verbs  is completed ,  SUPPORT1 iscal led t o  compute a m,odel of the s i t u a t i o n  d e s c r i b e d .SUPPORT1 b i n d s  t h e  cases TH1,  TH2, SUPPORTPTl, BALPT2.
TH s t a n d s  f o rTHEME and t h e  o t h e r  two cases r o r  Support  Point, and Balance P o i n t .
Thefollowing diagram shows the  spatial r e l a  tion:.
s i g n i f i e .
d  by these cases:T h l  supports TM2 on i t s  BALPT2 o n / w i t h / i n  h i s  SUPPORTPTl.
If these f o u rarguments are bound.
the suqport r e l a t i o n  is comple te ly  d e f i n e d .
If n o t .means a re  t aken  t o  t i l l  in .
t h e  miss ing arguments by 2 d e f a u l t  l o g i c .SUPPORT1 t a k e s  as arguments,  SL5J ,  OBJ, and CflMPS where C O W S  is a list ofcomplements.
SUBJ and OBJ were computed by the VP p a r s e r  a s  t h e  s u b i e c t  andobject  of the  ACTIVE ?
o m  of the  clause.The conditions or rules For transforming these syntactic arguments* i n t o  semantic r o l e s  are as Collows:SBBJ A OBJ + mi +- SUBJ.
T H ~  4 OBJSUBJ -+ TH2 + SUBJOBJ + TH2 + O B JFor each ZOMP,N T H ~  A ON A PSCT(C0MF) -+ TH1 +- COMPnlSUPPORTPT1 A IN v ONVWITH A PART(C0MP THL) + SUPPORTPTl + COMPdBALPT2 A ON A PART(C0MP TH2), -+ BALPT2 + COMPT + PRINT (LIST "UNDEFINED COLON COW)For the  following two example sentences, the above rqles result irit h e  bindings (shown:Ex 1 A c,lown balances a p e d e s t a 1 .
0 ~  h i s  head on its sideI I I ITI11 TH2 SUPPORTPTl BALPT2Ex 2 A clown balances on z!
pedestal on-its side on h i s  hegdI I I iAdditional m o d i f i e r s  may have been present a s - i n  the example sentences:A clown, on h i s  hands balances a pedestal on h i s  head, on its s i d ebes ide  a p o l e .A ololn with a pole in his hands b'alances on a pedestal.. .T h e  ea r l i e r  action sf rhe preposition semantic f u n c t i o n s  will have reducedthese a d d i t i o n a l  complements to no more than those ~bown in Edamples 1 and 2 .
'Notes: '  x - + ~ y  X imp'lies Yx 4 y SET x t o  yA x  Not XF'(x) Evaluate function F of Xn( andV o r" QuoteB r i e f  f o r n s  such  as "A clown balances on hi$ hands" or "A clownho lds  a pole" ' r e s u l t  i n  inbomplete bindings from the rules of SUPPORTL.The l eg i t imacy  of suqh brief forms iequires a d e f a u l t  l o g i c  t h a t  i n  thefirst case assumes t h a t  t h e  Ground suppor t s  the c l o w n - a t  a point c a l l e dTOP of the ground.
I n  t h e  second case, the clovn.
's S W P ~ R T P T ~  f o r  t h e  p o l eI s  bound to hrs  hands and the BALPTZ--for the pole--  is bound to t h eBOTTOH of  t h e  p o l e  The verb "hold" p u t s  a d e f a u l t  va lue  of "hands" onthe s t r u c t u r e  it passes t o   SUPPORT^ according  t o  t h e  fo l lowing d e f i n i t i o n :(HOLD (LAMBDA (ST) (PROG ( )(PUT ST ' 'SUPPORTPT~ ''HANDS)w m ~ ~  (SUPPOBT~ ST)) >I)The defaul t  l o g i c  af the verb seeks these values to bind t h e m  appropr i -a t e l y  t o  any-empty c a s e  arguments.
The more general d e f a u l t  v a l u e s  ofTOP as a missing SUPPQRTPTl and BOTTOM a s  a missing BALPT2 and the  f a c tt h a t  t h e  o b j e c t  on the bottom of t h e  heap must be  supported.
by the  GROUNDare all supp l i ed  just p r i o r  t o  c o n s t r u c t i n g  a p i c t u r e  frame.The result of SUPPORT1 i s  t o  c r e a t e  a process model of t h e  fb l lowingform:( C i  TOK b a l a n c e ,  GLOBAL (...)-,INIT(...),INTER(...)RESULT ( .
.
. )
)The va lue  of the a t t r i b u t e ,  GLOBAL i s  a quoted set of (PUT X Y Z) whrch Met r u e  a t  all t i m e s  i n  the model.
INIT !is the s e t  of relations true Bt theinitial s t a t e  of time 5n the model, INTER Ts those  f o r  t h e  intermadiages t a t e s ,  and R ~ S U L T  is  t h e  se t  f b r  the f i n a l  s t a t e .
When a f u n c t i o n W Gf o r  Pragmatics evaluates one of these attributes, t h e  r e s u l t  is t o  evaluatethese PUT functions t o  produce a semant ic  network r e p r e s e n t i n g  t h e  s t a t e  of32a f f a i r s  a t  a given instant of time.
The semantic relations are t r a n s l a t e dt o  ATTACH 4-tuples which then generate a p i c t u r e  of t h e  state.
Successivepictures are obtained by c a l l i n g  PRAG repeatedly for I N I T i a l ,  INTERhediate,and RESULT s t a t e s .For the examples of the SUPPORT1 verb, only the GLOBAL attribute isgiven values as f ~ l l o w s :c i  .
.
.
,"GLOBAL (LIST ("PUT mi "SUPPORT m2)("PUT TH2 "SUPPORTBY TH1)("PUT TH1 " s U P P O ~ P T  SUPPORTPTl)("PUT TH2 "BALPT BALPT2) )I n i t i a l ,  Intermediate and Result s t a t e s  are n u l l  s i nce  the verb simplyd e s c r i b e s  a s t a t i c  s ta te .The verb MOVE* i s  more,complex and more i n t e r e s t i n g .
L e t  u s  assumeI I a s  input  the-sentence,  A clown on his head ; a i l s  frorn'Corno t o  Menaggio"Wheh t h e  parser  has completed its VP t h e  semantic s t r u c t u r e .
1 ~  as fol lows:( a b b t e v i a t e d  t o  the portion relevant to-this discussion.
)(Cl TOK CLOWN, BALPT HEADXY, S I Z E  3)( C 3  TOK SAIL,  SUBJ C1, COME'S (C4 C5), TENSE PAST)(C4 TOK COMO, .
.
.
,PREP FROM)(C5 TOK KENAGGIQ, ..., PREP TO)A t  t h i s  p o i n t  VP calls'(Sh1L C3).
SAIL is defined as f ~ l l o w s :( S A I L  (LAMBDA (ST) (PROG ( )(PUT ST l q ~ ~ ~ ~ ~  "WATER)(PUT ST "VEHICLE "BOAT)(RETURN (MOVE* s T) ) 1) )That is,  SAIL implies  a movement o f * a  boat on water and s o  passes t h i SLnformetion t o  mVE* which may have t o  use it t o  bind l t e  case roles of5EDIUM and VEHICLE which in fact at?
not mentioned explicitly in theexample sentence.MOVE* binds the arguments Agent, THeme, VEHICLe, - Source, Goal, andMEDiuhby sorting out the information contained in SUBJ, 0EU and COMPSby the following rules:ANIM (StJBJ) + A + SUBJFORCE (SU3J) + 1 + SUBJVEHIC (SUBJ) -, VEHIC + StJBJS V M I C  /\ mIC (ow) + W B I C  + OBJMEDIUM (OBJ) + MED + OBJOBJ -+ TH + OBJFOR EACH COhFa MED A IN V ONLV THROUGH A MEDIM(CObfP) + MED + COMP% VEHIC A IN V ON V WITH A VEHIC(COMP) + VEBIC + COMP% S A FROM f i  PUCE(C0MP) -+ S 4 COMPG A TO 4 PLACE(COM2) -t G c COMPT + P P , ~  (LIST l r ~ ~ ~ ~ ~ ~ ~  : COMP)DEFAULT :s VEHIC + VEHIC + (GET ST WHIG); % 6 -+ S + (MAKETOK "POINT).\I MED + MED + (GET ST MEDIUM) ; w G -+ G c (MAKETOK "POINT)Thie def in i t ion  of the canditione for MOVE* is a t i l l  incompleteexcept fox the verb "sail" and will be modified with further experience.Haying bound the role varieblee, MOVE* creates a procese model byassigning to ST, gets of value8 for the attributee GLQBAL, INITlal,INTEBmediate, and,RBULT.34For GLOBAL conditions,(AND I (PUT S "SWPORT 1) (PUT MED "SUPPORT VEBIC)(PUT' I "SUPPORTBY S) ) (PUT VEELC "SUPPORTBY MED)(AND A TH (PUT A "LEFTOF TH) (PUT VEBIC "SUPPORT A)(PUT TH "RIGHT OF A)) (PUT A "SUPPORTBY VEZIIC)(AND A (PUT mnIc 1 1 ~ ~ ~ ~ ~ ~ ~  A) ) (PUT MED "LEFTOF G)(m TH (NULL A) (PUT VEHI C "SUPPORT TH) ) -(PUT MED "RIGBTOF S)For INITIAL,(PUT VEHIC ' 1 ~ ~ ~ ~ ~ ~ ~  S)For INT~~mediate?
(REMPROP TJMIC '"RIGHTOF)(REMPRO?
s "LEFTOF)(PUT VEHIC "BETWEEN ( S  G) )Por RkSULT,(REMPROP VEHIC "BETWEEN)(PUT VEHIC "LEFTOF G)(PUT G " ~ I G H T O F  VEHIC)Ffg.
3 shows theee states i n  the form of a process model,When this process model, C3, is evaluated, the function PRAG i s  called withthe arguments C 3  and either INIT, INTER, or RESULT.
PRAG will f i r s t  inter-p r e t  the GLOBAL attribute causing the state represented on the propertyliste Tor Tokens of clown, boat,  e tc .
t o  be changed.
It will then makethe changes indicated by the PUT8 which are a d d i t i o n s ,  and the REMPROPswhich are deletions.
If P U G  i e  called three times in succession for I N I T ,INTER, and RESULT, three euccessive sfatee are created to shaw the  pro-greeeion of the process from etart t o  finieh.
After PRAG has been calledthe support points and balance pointa are a l l  defaulted as neceeaary to  TOPSand BOTTOMs by the function that  calls the GRAPHIOS system, This functionI SWPORTI N I T :PUT VEHIC "RIGHTOF SINTER:~ R O P  VZHIC  RIGHTOF OFRESULT :PUT VEHIC   LEFTO OF GFigure 3.
PRocess Model For,MOVE*also es tabl i shes  h o r i z o n t a l  contact p o i n t s  f o r  BETWEEN, RIGHTOF andLEFTOF.VI Semantics of  ScenesA s c e n e  i s  composed of a se t  of P i c t u r e s  r e l a t e d  t o  each  o t h e r  byadjacency  and Support  r e l a c i o n s  i n c l u d i n g  t h e i r  poiats of c o n t a c t .
Ap i c t u r e  is  a LOGO display program that when c a l l e d  w i t h  a given s t a r tp o i n t  and heading  of the display t u r t l e  o r  cursor  will c o n s t r u c t  a twodimensional l i n e  drawing.
A squa re  can be drawn by t h e  f o l l o w i n g  sequenceof o p e r a t i o n s .
(See Papert 1972.
)PENDOWN, FORWARD 20, RIGHT 90, FORWARD 20, RIGHT 90,FORWARD 2 0 ,  RIGHT 90, FORWARD 20, RIGHT 90, PENUI?.The l a s t  ''FIGHT 90" restores the c u r s o r  t o  i t s  o r i g i n a l  head ing .
FORWAEUand BACK axe v e c t o r  making f u n c t i o n s  that draw a vect 'or  from the c u r r e n txy p o i n t  of t h e  curser a g iven  number of  + i ts  i n  the  d i r e c t i o n  t h e  c u r s o ris  aimed' The l anguage  uses functions with arguments and may create andc a l l  s u b r o u t i n e s .
Square may be  d e f i n e d  asSQUARE;SIZE: FORWARD :SIZE,.
.
.
-.ETC.If a t r i ang le  has a l s ~  been d e f i n e d ,  we can then define:H0USE:SIZE; SQUARE:SIZE; F0RWW:SIZE; TR1ANGLE:SIZE;It is the convenience and simpl~cityeof these LOGO conventi 'ons thatconvinced m e  that drau3,ng p i c t u r e s  from sentences would n o t  add any g t e a tcomplexi ty  t o  a basic l a n g u a g e  a n a l y s i s  system..
LOGO offers many a d d i t i o n a lfeatures as a language f o r  teaching programming s k i l l s  to non-mathematical lyo r i e n t e d  users  and one of t h e  most impor t an t  of these may be as  a pa ren thes i s -free form of LISP.In our use of LOGO graph ics ,  we-consider t h a t  a picture has  a name,a program t o  praw i t ,  a cursot s t a r t p o i n t ~ v a l u e ,  a head'ing, a s i z e ,  aframe of minimum arid maximum X and Y c o o r d i n a t e s ,  a center of gravity andcoordinates associated w i t h  any points on i t  t h a t  we  need t o  refer t o ,  suchas feet, hands, head,  t o p ,  bottom, e t c .CLOWN EQR (LAMBDA.
() .
.
.
ISIZE 1STARTPT ( X Y )HEADING NBRPFRAME (MIN X, MAX X ,  MIN Y, MAX Y)FEET ( X i )aaBOTTOM (=>All of the XY coordinates d e s i g n a t e d  i n  a picture s t r u c t u r e  are relativeto the s t a r t p o i n t ,  heading and s i z e .
I f  w e  set the startpoint to a givenvalue,  say 500; 0 ;  t h e  clown w i l l  be drawn f rom the bottom center of t h esc reen .
I f  w e  set  HEADING t o  90, it will be drawn on its side.
1f  wechange s i z e  to 2 each v e c t o r  composing the picture w i l l  be t w i c e  as long .I f  we whsh to translate t h e  clown t o  the r i g h t  50 u n i t s ,  50 is addedt o  t h e  X coord ina te  of t h e  s t a r t p o i n t .
I F  w e  wish t o  m6ve i t  u p ,  anumber i s  added t o  the Y coord ina te  of t h e  s t a r t p o i n t .
If w e  Wish t oro ta - t e  i t  onto i t s  head w i t h  i t s  head a t  500,100 l i f e  i s  more difficult.We m u s t  u se  trigonometrikc f u n c t i o n s  t o  compute a heaaing va lue  and al o c a t i o n  of t h e  s t a r t p o i n t  t h a t  will ach ieve  this r e s u l t .
A f u n c t i p ncal led ORIENT* takes as arguments an o b j e c t ,  i-ts ba lance  p o i n t ,  and areference  p o i n t .
(ORIENT* CLOWN, HEADXY , (500,100))This f u n c t i o n  a d j u s t s  t h e  s t a r t p o i n t  and heading s o  that t he  head of t h eclown w i l l  be a t  (500,100) with t h e  cen t e r -o f  g r a v i t y  above the p o i n t .S i in i l a r -  ad ju s tmen t s  are made t o  t h e  PFRAME values t o  t r a n s l a t e  and r o t a t ethe imaginary p i c t u r e  frame d e f i n e d  by the XY extremals.To assemble a set  of p i c t p r e s  i n t o  la scene, t h e  bottom p i e t u r e  isassigned an XY s ~ t a r t p o i n t  and heading.
Each p i c t u r e  i t  s u p p o r t s  i st r a n s l a t e d  and r o t a t e d  t o  r e s u l t  i n  ad jus tmen t s  t o  s t a r t p o i n t ,  heading andpframe v a l u e s .
Each p i c t u r e  b e s i d e  i t  i s  s ~ i l a r l y  adjusked u n t i l  ascene i s  cgmpleted by account ing  for a l l  i t s  pictures'.
A t  tQis p o i n t ,  t h escene is s c a l e d  t o  t h e  size of the d i s p l a y  s c r e e n ,  and t h e  p i c t u r e  drawingprograms a r e , e x e c u t e d .The PFRAME concept  developed by Gordon Novak and Mike Smith is  veryh e l p f u l  as a computafional  a b b r e v i a t i o n  Eor .
fhe  program tha t  draws t h ep i c t u r e .
The PFRAME a t t r i b u t e  ha s  a minimum x, maximum x, minimum y ,maximum y a s  f o u r  p o i n t s  t h a t  def ine  a rectangle that sur rounds  the extremep o i n t s  of the pictime, When t h e  p i c t u r e  i s  programmed t h e s e  a r e  assignedby hand with reference t o  whatever s t a r t p o f l t  and heading were used.
Thep i c t u r e  as defined is taken as s i z e  1.
Whenever the p i c t u r e  i s  translatedo r  r o t a t e d  t he  values of PFEUME, STARTPT apd H E A ~ I N G  are a d j u s t e d  acco rd ing ly .A s  e a c h  p a i r  of p i c c u r e s  a re  combined i n t o  a scene, a F F W  i s  computedf o r  the  scene.
The f i n a l  PFRAME f o r  the entire scene  i s  a d j d s t e d  t o  thesize of the screen w i t h  a p p r o p r i a t e  s c a l i d g  of t h e  s i z e  va lues  of i t scomponent p i c  t u r a s .39A f 'requent use of PFRAMES is t o  find default values f o r  TOP, BOTTOM,LEFTS~DE and RIGHTSIDE as contact points  between pairs of p i c t u r e s  .Dep'ailed descript ions of these processes are-not particularly relevant tothis paper ' s  goal of presentipg an eas i ly  computable syntactic-semanticscheme f o r  subsets of English but w i l l  be presented in forthcoming papersby Bennett-Novak and by Michael Smith.VII CONCLUDING DISCUSSTONIn previous sections the terms "proceas madel", "skit", " ~ c e n e ' ~  and"pf rame1' have been wed t o  describe very llmited' structures of verb andnoun semantics.
This usage is in contrast t o  the much broader ideasassociated with "scr ipts1 ' ,  "f tames" e t c .
which ate  t y p i c a l l y  used todescribe worlda of vision ma belief  system&.
Example process modelsfor "support" and~'@mve1'  have been described and appl ied  t o  the task oforganizing images- i n t o  scenes.
Nouns such as "clown" , "dock", "pedes tall',etc.
have been represented as programe that construct  line drawings.Adl\ectives have been used to communicate variations in eize, and adverbsto\ indicate angles.
Other nouns, such as "top", "bottom", "edge" etc.are defined as functions t ha t  reference p/r ticular x-y coordinates of spicture.I1 Npuns such as c i r c u ~ " ,  "party", "ballgame" etc.
have not yet  beenattempted.
They imply partially ordered sete of proceas models and are themost exciting next step in t h i s  research.
More complex verbs l i k e  "return"or "make a roundtrip" imply a sequence of interacting proceas modele.
Thus.
"a clown sailed from the lighthouse t o  the dock and rethrned by bus" offers40interesting problems in discovering the arguments for MOVE*-return as well asin the design of a higher level process model whose intermediate conditionsinclude the models of MOVE*-sail and MOVE*-return.We have also noticed that the semantic network that is produced as aresult of semantic analysis can be seen as a problem graph by the functionst h a t  organize images and it is apparent that as these graphs come to containlarger numbers of images, i t  will be necessa'ry to d'etrelop graph searchingetrategies along the lines of ordinav  problem solvers.
Our first experimentin this l ihe  will be to  semanti~allp analyzeo the miseionariee and cannibalsproblem and illustrate the solution.As it stands, the CLOWNS system has served as a vehicle for developingand expressing our ideas of how to construct a tightly tntegrated languageprocessing system that provides a clearcut syntactic stage with coordinatesemantic processing introduced t o  reduce ambiguity.
Twd stages of semanticprocessing are apparent; the first is the use of prepositions and verbs tomake explicit* the geometric relations of "support", "lef to?"
etc .
among theobjects symbolized by the nouns ; the second is the transformation of thesegeometric relations into connected sets .of x-y coordinatee that can be d i s -played as a scene.
Schank'~ notion of primitive actions i s  refle,cted in ourapproach t o  programming high level Verbs such a8 MOVE* t o  encompass the ideaof mation carried in verbs such as "sai l" ,  "ride", etc .
Yoadd ATN approacht o  syntactic analyais  ie central t o  t h i s  system and in sharp contrast t o  theapproach of Schank and Riesbkck who attempt to minimize formal syntacticprocessing.
Our procees model reflects the ideas developed by Bendrix inh i s  development of a logical structure 5sr English semantics.41The system is not li'mited to its prekent grammar nor to i t s  preeentvocabulary of images.
Picture programs to  construct additional objects areeasily cbnstructed and the semantic r~utihe6 f o r  additional verbs and prepo-sitions can be defined fo the eystern wfth relative ease.
We hope in thenear future to i l lus trate  the following sentence:"One of the f frst  plant8 to appear bn a newly formed volcanic PsJsnd isthe stately and graceful cocbnut palm."
.
This will involve programming the11 verbe, appearw', "fgtm", "grow", and programming pictured of plantg, coconutpalm and i s lands .
Very interesting problems are apparent i n  understandingand representing t h e  ideas of "first" and "new" as well a~, in the relationbetween "plant en and "coconut palms".The system has been used successfully to communicate methods for naturallanguage compu.ta#ion t o  graduate students and t o  undetgraduatey.
It appearsto have immediate possibilities for teaching the structure of  English, forteaching precision of English expression, iind for teaching foreign languagesthrough pictutes .
Eventually 'it map be useful i n  codunction with very goodgraphic systems for generating animated illustration8 for picturable- text.In my a n d  CLOWNS sh~ws  thk power and vaue of the mic,roworld approachto the study of Arti f ic ial  Intel l igence.
By narrowing one's focus t o  a t i nyworld that can b e  completely described, onen can define a subset of ~ n ~ l i s hi n  great depth.
This i s  in corrtrast t o  the study of text where the  situationsdescribed are so complex as to forbid exhaustive analys is .
The translationinto a visualized microworld provides an immediate display in a two-dimensionallanguage of the interpretations dictated by the -syntactic and semantic systemsand thus a scientific measuring instrument for the qccuracy of t&e interpre-tat ion.VIII REFERENCESAbelson, Robert P .
,  " ~ o r l c e p t s  for Representing Mundane Reality ic Plans.
11I n  Representat ion and Understanding: Studies i n  C o m i t i v e  Science,e d i t e d  b y  D. Bobrow and A.
C o l l i n s  ~ r a d e d c  Press .
In Press .Badre, Negib A .
,  "computer Learning from English Text."
~ l e c t r o n i c sResearch Laboratory,  College of Engineering, University ofC a l i f o r n i a ,  Berkeley, 1972.Bobrow, D .
,  and Col l ins ,  A , ,  Studies i n  Cognit ive S c i e n c k ,  AcademicP r e s s ,  New York 1975.
I n  P r e s s .Bobrow, D.G.
and Norman, D .
A .
,  "Some p r i n c i p l e s  of  c o g n i t i v e  systerna, I II n  Bobrow and C o l l i n s .Bruce, wrtram C .
,  "A model f o r  temporal r e fe rences  and its a p p l i c a t i o ni n  a ques t ion  answering program."
~ r t i f i c i a l  I n t e l l i g e n c e ,  3 1972pp 1-25.Charniak, Eugene C .
,  "Toward a Model of  Chi ldren ' s  S to ry  Comprehension.
"A1 TR-266, MIT, Cambridge, Mass., 1972.C o l l i n s ,  q .
,  and Wafnock, E .
,  "Reasoning from Incomplete Knowledge.
11I n  Bobrow and Col l ins .Fikes, R .
E .
,  & Nilsson, N. 3.
"STRIPS: A new gpproach t o  t h e  a p p l i c a t i o nof theorem proving to problem s g l v i n g ,  1 t ArtificialI n t e l l i g e n c e  Vol.
2 pp 189-208.Gridhman, R. ,  Sager, .
Raze, C.  and Bookchin, B., "The LinguisticS t r i n g  Parser . "
AFIPS,  Conference Proceedings Vol.
42; M I P S  P r e s s ,Muatvale, N .
J .
1973, pp.
427-434.Harris, Lar ry  R .
,  "A Model f o r  ~ d a p t i v e  Problem Solving Appl ied  toNatura l  Language Acquisi t ion."
Thesis MSS, Department of ComputerScience, dornell University Ithaca, N.Y. 1972.H e i d o r q  George E. -"Natural Language I n p u t s  t o  a Simulatfon P r o g r a d n gSystem. "
NPS-55W, ~ H y a l  P o s t  Graduate Schoor, Monrerey, C a l i f .1972.Hendrix, G .
,    rel lid nary Consfructs $or the Mathematical Modelling ofEngl ish Meanings " Univers$ty of Texas, ~ e ~ a r t h e n t  of computerSc iences ,  Working Draft ,  A p r i l  1974.
(not f o r  d i s t r i b u t i o n )I I Hendrix, C .
G .
,  Thompson, Craig and Slocum, Jonathan.- Language ProcessingI t  via Canonical Verbs and Semantic Models, Proc.
3 r d  In t .
Jt,Conference on A r t i f  i c .
i a l  .Iatelligante, Stanford Research InsLi tute ,Mehlo park; C a l i f .
,  1973.Hobbs, Jerry R. "A Model f o r  Na tu ra l  Language ~ e m a n t i c s . "
Departmentof Computer Science,  Yale U n i v e r s i t y  Research Report 8 3 6 ,  1974.Matuszek, D., and Slocum, J .
,  "An Implementation of t h e  AugmentedT r a n s i t i o n  Network System of  Woods."
Department of ComputerSciences Unive r s i ty  of Texas, A u s t i n  NL-9 2972.Minslcy , Marvin, , "A Framework for Representing Knowled$e, " In TheP s y c h o l o ~ y  of Computer Vis.ion, e d i t e d  by P. Winston, McGraw Hill1975.nwinst%pert, S .
,  "~efich-lng Children t o  be Mathematicians vs .
Teaching AboutMathematics.''
I n t .
J.
Math.
Educb.
in Science 6 Tech., New Y ~ r k :Wiley & Sons, lm; MIT, A. I.
Memo # 249, J u l y  1971.Rieebeck, C.  K .
,  "The Conceptual ailalyzer."
I n  Schank, R. ConceptualInf ormatYon Proceesing.Rumelhart, David E,  , "Notes on a Schema f o r  S t o r i e s .
t II n  Bobrow and C o l l i n s .Schank, R.. & Jibelson, R. " S c r i p t s ,  P lans  and Knowledge. "
J G S ,Yale U ~ i v e r s i t y ,  1975.Schank, Roger, Conceptual I n I o m t i o n  Process inq ,  North-HollandPublishAng Company 19 75 (In Ptess) .Scragg , Gteg W. ,"LUIGI: An -EngTish Question Answering Program.
I'Thesis MSS, AP & I S  Dept .
,  ~nidersit~ of California, San Diego1973.Sik l6ssy ,  L. & Dreussi ,  J .
,  "An E f f i c i e n t  Robot Planner that Generates- .i t s  o m  P r ~ c e d u r e i ; . '
~  Proceedings 3rd.
Iat.
- Jt.
Conf .
on A. I.,pp.
4 2 3 - 4 3 0 .Simmons, Robert F., "Semantic Networks: Their Computation and Use forUnderstanding English Sentences:" In Computer Simulat ion ofC o ~ i t i v e m P r o e e s s e s ,  edited b$ Schanlc.
R .
and-Colby,  K .
,P r e n t i c e  H a l l ,  N.Y. 1973,Walker, Donald Em, "Automat'ed Language Processing,"  i n  Annual Reviewof Information,  Science and,Technolop;y Yol, 8, American SocietyInformation S c i e n ~ e ,  Waehington, D,C.
1973.Winograd, Terry, "Frame Representa t ions  and the ~eclarative/?roceduralControversy. "
In Bobrow and ~ o ' l l i n e .Winograd, Terry,  Underatanding Natural Language.
New Yotk: AcademicPrehs, 1972.Woods, w .
A .
,  Kaplan, R.A., & Naeh-Webber, B .
,   he Lunar SciencesNatural  &nguage Information System: Final R e p o r t :  BBN.
Report# 2378, June, 1972, Bolt, Beranek 8 Newman, Inc. Cambridge, G s s .11 Woods, h. A , ,  Transition Network Grammars f o r  Natural LanguageAnalysis,"  Cotmn.
ACM, 13,  Oct.
1970.--APPENDIXfiFTER S0CE C O N T R O L  F u h t T y o ~ S  THF P R I N T ~ U T  SHOWS THEGRAMMAR,  THE LFXICON, TbE F U N G T I O ~ S  THIT DRAW P I ~ T U R E ~9 THE SEMPNTIC FUkCTIOhS A s S O C T A T E O  W I T H  W O R D S ;  THEN 'THE R d S I C  G R B P H I C  FUNCTTOhS A P P R o x I M A T Y N G  L O G C  E ~ u I V -ALENT+,  AND FINALLY TkE DFEP.
S V d h T I C  F u N c T I O ~ S ' F O RCOVBTNYNB AND A S S W B L T ~ G  D D A ~ J \ N G S  I N T O  SCENES.TPE P R O G R A M  IS IN U T L T S P  FnR ~ 0 :  EQUIPMENT4 N D - T q  W R I T T E ~  TC I N T F R F ~ c F  W I T H  ah I M L A c   ISP PLAY.T H I S  T S  THE I;ET OF C O ~ T D ~ L  F L J N C I I O N S ~  DRAW, PR4O E T c ~ClRPW ~ A K E S  THF s E N T F ~ C E  a s  N o  LATER PNPGI PREPRAGHAKE S F M A N T I C  A F T  ~ Q Q K  T O  R F P R F S E ~ T  THF M E P I ~ I ~ G ,  OF THFS E N T F N ~ E  PNC C d C L  THE CEFP S E M A h T 7 C  F I J ~ ~ C T I O N S  10  RAW f T  +( f C ( b A M B D A ( f T 1  Sf ) )+ A  -DVMMY F U h c ~ 1 O h  FOR THF V F R R(GEToK {LAMnOh ( S T  PR6P.)
( ( 3 ~ 7  ( G F T - S T  =OK) PHUP) ) I+AN I 'Nn IAECt  GET F U N C T I O ~ I ~(DQPWPTX ( L A C R O P  CTOKS I 1 P R o G  ( 1( L I ~ T I( Y A K F A R )~ C ~ V P I C S )1 )+SEPARATE TOM T N T O  !TOUS ~ N P  N T C K S : T O ~ S A( S E P T Q K S  ( u w q n i  ( )  ( P R C ~ ;  rTw51(c.ETQ T U S  T c K S )(sETQ T O K F  ~ I L )A (cOkO( (aF?
( C A P  T K S )  FTFNSE) ( s E T Q  v T O K S  ( C O N G  ( C A P  T K S )V T O K Y ) )( (GEp,QglC P T K S )  =PT.cT)  ( q E T Q  T O K S  (COhs  ( C A H  T c S I - T ~ r q )  1 ) tk9 ( c O ~ ~ D  (  SET.^^;^ S K C P  T K S ) J ~ ( C , Q  P )  )(1 ( ~ F T L P ~  N I L )  11 )+APPLIFS P U G  TO EMREOCFp cLAI ISFS USING L I S T  V T r l K S 4[ W E P R A G  (LAlanP ( L S T )  ( ?
R O C  (TENSE)( S E T Q  L S T  (EFFPCE VB ist)KONO('(NIJLC L S T )  (RETURN N I L )  )R ~ ~ E T Q  T E ~ ~ F : ( O ?
T ( C W ~  L T )  Z T E N ~ F ) )(CmT) ( ( ?
0  TENGF 3PRFS) (Pf?pG tCbR-  L q T ) ,  =,INTER) )( (EO TENSE 2PAST)s (Pnbn ( C b R  C S T )  = ~ E ' S U L T )  - )~ C n M D ( ( s E T o  ( -s 'T (COR L S t ) ,  (flci; R )  ) 1+APPLIES  THE PROCESS POOFC OF A #ERB TO 1 7 8  ARGUMENTSPROP IS INIT, TN'I'ERv R E s I ~ I T  4(PRAQ (LAMBDA ( S T  'PHU'P) ( F ' R W  ( 0  L )( ~ 0 ~ 0  ( (NU1 L ~ S E T T J  G ( O f t  $Th P R ~ P )  ) 1 (RETURN N I L )  )A ( E V A L  ( C A R  G ) )( c O N D ~ ~ S E T ~  6 ( C D R  0 ) )  (80 A )  1 )1 )  )4ATN GRAMMAR S T A R T S  HERE.
M A I N  NODES AQE N P ~ P P .V Q , V P ~ ~ ~ C C P U S F  P N 0  CLAUSE WWICH IS T.HE T O P +- (DEFINE* = (~ N P ( c A T ,  AqT T ( S E T R  C E T  (-GETF DET)  I .
( T O  y P 1 )  )( C A T  PRON T (S6,TR Ha (.ANT EC +i ,GLST) (TC) ~ P 2 ) h )( T ~ T  DK T ( S F T R  O E T  EILOFFI-(HOP &PI) I I(NPl ( C A T  ADJ T (fETb M O O  ( ~ P P F N R  ( G E T R  M O D )  ( L I S T  * )  ) )cv.0 h e i n( c A T , N  T ( S E T K  HO ( Y 4 K F T O Y  * ) I  (SETCJ G L S T ( C O N S  * R L S T ) 9(PU'T ( G F T R  HU) Z D E T  (GETQ D E f )(PUT ( G E T R  ZMnn ( G E T R  M O D ) )( T O  NP?)
1 1( C A T  PPRah: 7 ( T Q  hP1)  ) )[ N P ~  (PnP ~ S E ~ R  HD) (PUTPOnq ( G F T R  HD) 1 ) 1( P P ( C A T  P R E P ( N C T ( G E T ( N E X T )  EV))( S E T R  PPEP ( A P P E ~ D I G F T R  PREP) (L IFT  * ) ) I( T O  PP) )(PUSM NP ( G E T R  PREP)  (PUT 8 ',PREP (GFT'R PAEP) 1 ( H O P  P P 1 )  1 )(PPI ( T s T  TPPV (GETR V C O ~ ; T , Q ~ L )( s E T R  VcOhTROL hqL)( S E T R  HD 9) (HOP'] PP?)
1( T S T  T P P ~  ( s E T R  J ( P ~ E P - W A T C H  (COR G C S T I  ) )( S U F I  n * )  ( T o  ~ 1 3 2 )  )( P P ~ ( P o P ( G E : T R  PO) ( O R ( S E f 9  DPEP ~ J T L )  T )  1 )( V f i t C A T  b U $  ~ h f  C (SETP AUK [&PPEN~(GEJA A U X )  ( L I S T  * I  1 )( L I F T R  nL'X(GETC7 1 v G )  1( C A T  A O V B a c ; ~ T C ( S E T R  VM(>T) (APP?NC(GETR V M O ~ )  t b f q T  + ) ) II T 0  V G )  )( C A T  V T (HOP V V ' ~ ' )   (T??
VAUX (-GETR P U X )(SETR V ( L A S T ( G E T R  Q ~ J X ) ) )(5ETR H P ( w ~ K E ~ O K ( G E T F ?
V ) )  1( ~ E T Q  G L ~ T  (CONS ( G m n  V )  G C S T ) )HOP V O l )  1 )wvl ( T S T  V V  T {SET!?
V 9 )  (sFTR HO (MnKETQK(SETQ b L f T [ C b h S  fll S f ) )  ( T O ,  V G l l l  1 )( v G ~ ( C P T  A n V @  T ( S E T R  V M O ~ ( A P P E ~ ~ ( G F T ~  v M O D )  ( ~ 7 S f  * ) I )( 7 0  V f l 1 ) )( T S T  O K ~ O R ( A ~ D ( S F T Q  J ( G E T R  A U X )( s F T R  TENSE ( P E T  (CAP 3 )  E T r N S E )  1 1( S E T R  T F N S E { G F T ( G E T R  V 1 :TEN$?)
1 i?
)(PUT ( G E T  P HD) STENSF IGETR TEWFF) )( P U T ( G E T R  WD) EAIJX (SFTP A U K ) )( I I F T Q  AUX (GET'R AIJX)  )(PUT t c ~ T 1 4  HG)  ZVMCIU ( G F T R  VMon))(HOB V63) 1 )( V 0 2 ( P O P  ( G F T R  HU) T 1( " P ( P U S H  V O  S W T C  ( S E W  V 9 )  ( T T )  V P 1 )  1( T s T  T b P 1   NO toft ( G E T R  ncl.)
(BET (LAST (6ETR 4UXf  9 5 0 ~ )  1I G E T ( G E T ( Q F T R  V )  f70K)EFD))( s E T R  PA+* T )  t$ETR QRJ (GETR $UBJ) 1ISETR SURJ ~ T L )  ~HOP-VPZ))usr T V P Z  T ~ W Q P  V P ~ )  1 )(Vp2 ( ~ I S B  PP (&hD (GETA P A W )  (GET * % B Y )  (SENOR' V c d h T R o ~  T ) #(SET!?
SUB; *)  (PUT (GETR V )  1094 ( G E T S  O R J )  (PUT NETR V )  ZSURJ (GET?
SUBJ) I T 0  V P ~ )  j(PUSH DCLAUSE ( S E ~ O R  ncL TI ( T O  v ~ z ,  i,(POPtGETR V )  (PUT(GE:TR V )  :S[JPJ l G E T R  S U R J ) )  1 )(DcLAUSE (PUSH FP ( G E T  :PREP) ~ S E T R  Hn a )  ( T O  D 4 )(Push RELCQNJ ( C A T  ~ R C Q N J )  ( S E T R  hk * )  ( T O  0 4 ) )( C A T  FIPRON T ( S E T R  ~ U A J  (AhTEC * G L S T )  1(SENDR S U B j  ( G E T R  S U B J ) )  ( T O  011)( C A T  V ( Q R ( G E T F  ?0) (RFTF ING)) ( H ~ P  02))( C A T  PREP ( A N D  ( G E T F  T O )  (GET (hiEXT)  =v)  ( S C P N X T ~ )  (HOP 02)) 1( D ~ T S T  0 2  T ( s E T R .
~ U B J ( V R M A T C H  6 G L S T ) )( S E N O R  SUf3JtSETR 9UBJ)  ) (HOP 021 1  )(n21 ( P I J S ~  VP (SENDFI DCL T )  ( S E T R  HE a )  ( M O P  03) 1 ){Dl (PU$H PRONCLAUSE f ( H O P  t73) 1 )C-a3(fsf ~ ~ ~ ( G E T R  SuBJ, (SFTR HD * I( ~ G < T  * Z T O K )  9) +SFMANTICS OF VERB&(PUT (GFTR sURJ) SqMOD (CONS 9 ( G E T  I G E T R  SUB J )  ZSMnn) )( T O  C 4 )  11 T S T  7031 T ( fET(3 .HOLD (CONS * CIOLD) ) ( T O  04) 1 1t D & ( P O P ( G E T R  HC) T ) )(PF IO~CCAUSE (PUSH,VP (SEUPR DCL.
T )  (SPTR HQ(PUT .a 5slJaJ (GETA SUf3.j) ) (70 P R 3 )  1(PUSH NP T (SETR OFJ (GF-TR SUBJ) ) I s ~ ~ R  SUPJ a )[ T o , P R l !
1 )( P q l  !PUSH DCLP~LSE T ( S E ~ D R  neb T )  (QETQ D 9 )~ S F T R  DCL T )  (rn PRI)  )(PUSP V G  T ( S E T R  HO +, (PUT * SSUBJ ( G p T R  S l J B j ) )(PUT * ZOsj [GFTP 0QJ))flo P R 2 )  ) )fPR2  (PUSH vDCt&LSE.
T ( T ( ?
PQ?)
1( T $ T ' T P R ?
.
(TO P R 3 )  1 )( R R 3  (PO?
( G & ?
R  PD1 T )  1( R E L C O N J ~ C A T  RCOHJ ShTC (SFTR RCONJ * ) .
( T O  P I )  ) I( R I  (PUSH DCLPUSE T ( s E T R  rn *) ( H ~ F  ~ 2 1  )(PUSH C ~ U S E  SNfC ( S E T R  ~b 6 )  [HOP R2) I - )(Rz(POP(CETR-HC) (PUT * EaCnNJ ( o E T R  R c o N J I )  ) )STRLJCTIJRE E X C E P T  T H A T  (GET ITHE EABTI  RETURNS STWE&(LFXICBN f ((*TYF ART (DET OFF) (NBR (qthlG P L )  1 )( A  A f f f  (DET  INCEF) (NBR (SJNGII)( A N  ART ( D E f  rhDEF) ( ?
B R  (sTNG) I )( B I G  AnJ ( S I Z E  7 )  ( C L A S S  S I Z E )(LARGE ADJ ( ~ T Z E  6 )  ( C L P S ~  sIZF) )(LTTTLE A D L J , ( s I Z E  3 )  ~ C L A ' F S  SIZE) J( S M A L L  AOJ ( q 1 2 E  4 )  (CLAS'S ~ 7 2 ~ ) )( 1 s  b U x  ( T E ~ S E  P R E S ) ( B E  7 ) )( W b S  ~ .
J X  ( T F N ~ E  P A S T I  ( @ ?
7 ,  )($ERE I U X  ( T F N S E  P A S T )  I B F  T )  ( ' ~ I B R  ( P L )  ) )( 9 Y  PREP (W T I )( B E S I D E  PREP (CAhON RIGHTOF)) ( t o  PRFP ( T O  7))( IN\ PREP (CAhlqh 01\41 I(ON PREP (ckkdh O M )  I(WyTH P P E P ~ ~ - ( c A ~ O ~  ON)  ){FaOQ PREP ( ~ n h o h  F R O P ) )( T H P O ~ Q H  PREP.
( MEISIUC T ) 9(ACROSS PRFP ( P E D I U M  T )  1(CLOWN N (NBR S I N G )  (FAhPs T I  ( H E ~ Q  T )  (FEET TI (PER5 T )( P I C T  TI ( P .
~ $ I M  f )  ( d R r  T )  ( A R M S  7 ) )(PEDESTAL N (NBR S I N G )  ( T ~ P  T I  ( B P S ?
f )  P I C T  fl-)(70 PREP ( G - T I )~ R Q P  REP ( 7  T I )(HFAD r\l ( N R R  S I N G )  tP4FT t-) )(NOSE N ( N Y R  ~ I N C )  ~ P ~ R T  7 ) )t ~ o ~ k  N (PIC7 f )  (NRR SING))(HEAO M ( N R R  $ ING)  ( P P R T  7 ) )(PFET N (NBR PL 1 ( P A R T  7 )  ).
(ARF N ( ~ B P ' s I ~ G )  (PART T )  )( A R M S  rd (NBR PL) ( P A R T  t)l( T O P  1 4 ' ( h & R  ~ 1 , h G )  ( P A R T  T ,  ( W E L  1))( R A W  r\r -(NHR ~ I N G )  WPLRI P I  (wR'FL T I )( S I D E  N (NBR SING)  ( P A R T  T) ' (NRFL T )  )( B A L B ~ C E  v ( T F ~ S E  P R E S )  ( J N F  1 )  ( P F F ) ~ S  (ON WIT).
I N ) ) 1(RALANCE3 V (TENSE, PWES,) cpQEP5.
(ON W I T H  IN) 1(BAL6NCILhG V ( J E ~ S E  P R E Y )  ( 1 b I G  T )  (PREP5 (ON WITH IN) ) 1( B a ~ e N c E d  v ( T E ~ ~ S E  P ~ S T )  ( E O  T )  (PPFPS ( O N  WITC IF])).
J(SUPPOR'J V ( (TfhqE P R E S )  ( J N F  f )  (PREPS ( O N  W I T H )  ) 1( S I J P P O C ~ ~ ~  v ' ( T E N S E  PRES)  (PREPS (-ON H I T H I  )(SFJPPOFITED V (7EhSE P A S T )  ( F D  T I  (PREPS ( O N  W / f T t - l ) )  1( $ U P P O R T I V B  v ~ - ( T E N S E .
P A E S )  ( I N G  f (PREPS (ON myTu) )( S A ~ L I N G  Y ( T c h S E  P R E S l  (TNr j  T I  (oREpS ( T O  F R O H  T P R O ~ J ~ H  A C R O S S  I N ) )  1t s n r l E n  v-* [ ( T E N ~ F  P A S T I  +n T )  (PRFPS ( T O  FROM ITHRCIUGH A C R O S S  T Y )  1 )[ S P ~ ~ S %  ~ V T ~ ~ : S F  P H L L I  ( P ~ F P S  ( T O  FROM THRoUOH ACQQS T N  4 C R 0 + 9 )  1 )( S A I L .
V ( T E ~ S F  PRES) (PREPS ( T O  FPOM T H R O U G ~  ACHOSS ~ h l ) )  )IHaLfi  V (TFNFE P P E ~ )  ( I h F  T I  (PREP$ ( I N  W I T H ) ) )IHOLDS V ( T E ~ C E  PFEs) (PRFBs ( I N  k17t- i )  1 )(HELD v Y T F I U ~ F  P A S T )  ( E C  T I  ~ P R F P S  (IN W I T H ) ) )(WOLDING V I T E h S E  PPESI  ( T V G  T )  (PREPS ( I N  WXTtk ) ) )( M H I C H S R P R O ~  ( S ~ F G  T )  ( A ~ Q  ts1brG PI.)
1 )( r H A T '  R P R O ~ I  (NI?
'FT :S.T'hG PI.)
) 1[WHO R P R O ~  t 6 B R  (SING P L ) ) ( P E Q T  T I )(IT PRON ( N O R  (SING11 )( I T S  PPRON (WAF (SING 1 )  )4HTS PPRII)V ( h R R  (SXNG) 1 (PEPS T I )(HFR PPAQN (NRR (SING) l o Y Q 5  TI )(HF P.RQN ~ N R R  (rilbNG,) ) ( P F R s  11 !
(SHF PROk 1NRR ( S I N G ) )  ( P F R ~  T j ){THEY PRQN (NPR ( P L ) )  (PERS X I )  ( w p l ~ E  R ~ O N J  ( T I M E  S A N E ) )(BEFORE R C O k j  ( T I M E  F I R ~ T ~ )t P O I b 7  N (LQC T I  (PXcT f 1 I(WINO N tNRR s J M G )  ( P I C T  T )  (FORCE T ) )( B O A T  M INQR SING) ( P I C 7  T )  C V E R I C  7 )  ( ~ ~ E D - T U M  W A T F R )tPaCK N (NBP sZNG) ( ' P I C T  T I  1~ L ~ G H T H O U S F  w ( N B R ' S Z N G )  ~ P T C T  T ) )WATER N (NBR S J ~ U O )  { P I C T  ,T) (MEDsu'M T )  [ D V E H I C  B O A T ) )(AFTER RCPNJ ( T I N E  L A T E R )  )1 ) ) ) )t s E ~ o  TORS N I L )(SETQ WB NIL') ( S E ~ Q  F C C  NTL)(DEFINE Z [+THE FOLLOWING F U N C f l Q h S  ~ 'EF IYE THE PICTURES USE0 B YTHE s Y c T E M  4CD R A W  A PEDESTAL 4(PFDESTAL ( L A M E O A  ( S I Z E )  (PRUcJ 0(PUSHSCALE.
S I Z E )~PENDOW~J).
(VECT 2n 2 q )  (PPGnT 90) (FOQW 3 0 )  ( V F C T  20 20)(BACK 7 0 )  (LEFT 9 Q )( PFNIJP 1{POqSCALE) I.?+ D ~ P W  A POLE*( P ~ L E  ~ L A M B D ~  (SIZE') ( P R C G  / I(PUSYSCALE SIZE)(PE~DOWN,)  (FOHW 1 0 )  ( S A C K  5 )  l P I G H T  9 0 )  ( F O R W  5 0 )(LEFT 9 0 )  (FQRW 5 )  ( R ~ C K  10) (PENUP)(PQPSCALF') ) ) z&IM1,TIAtIZE STUFF FOR CLOww AND PEDEST4L.
4(CLOwNlNXT (L#NBOA 0 (p~ll)G 0(PUlfRFkS E(P(31h-T STARTFT (0 0 )  ~ T A R T O Q T E N T  OPFR4ME ( O  a o n, PSCALE 1 ~ R I W P F O G  P O ~ N T  CG 1 )(PUTRECS SiCtQkN S f  APTPT ( 1 4  Q) S ~ T ~ R T O R X E N T  0PFAAPE (0 5 0  (1 68) '  PSCPLF, 1 BOTTOM ( 2 5  0 )  TOP l p 5  68)R F O O T  ( 1 4  0 )  LFOOT ( 3 6  0 )  FEET (-25 0 )DRAWPROG CLOkNRaRP ( 0  34) L4RM ( 5 0  34) HF'AD (25 68)HANDS (25 ,  34) ARM ( 0 3 4 )  A R M $  [ 25 - 7 4 )C G  (25 7 6 )  ) 1(PUTRELS.Z(POLE S T A R T P T  10 0 )  S T ~ R T ~ R I E ~ T  r)PFRAPE (-8 6 0  o 1 0 )  PSCPLF: 1 R O T T O M  (30 4 .5 )  TOP ' ( 30  5 .
5 )RASE (30 4 .
5 )  C O  ( 7 0  5 )  T I P  t r )  5) DRPWPROG P O L E ) )~ P V T P E L S  I (PEDESTAL S T A P T P T  (i , 6 )  S T A R T O R I E N T  0PFRAWE 4 0  7 0  o 2 0 )  P s c a ~ E  1 BOTTOM ( 0  35) T ~ P  ( 3 5  2 0 )B4SE (35  a )  CG ( 3 5  8 )  ~ A A V R O C  PEDESTAL 1 )(PYTRELS E (BQBT STARTPT (0 0) STPRTOQIENT 0PFRAME ( 0  150 0 2 0 )  P S C A t E  1 ~IRAWPROG B O A TROfTOw ( 7 5  0) TOP ( 7 5  L n ~  L E F T S I D E  ( 0  16) R I G H I S I D E  ( 1 5 0  i n )CGn (75  1 0 )  1 )(PUTRELS ~ ( W A T C R  S T A R T P T  ( n  O )  STARTORTENT oP F R ~ M E  ( 0  5 0 0 .
0  5 )  P S C A C F  1 ORdWPROG WATERBOTTOM ( 2 5 0  0) TOP ( 2 5 9  5 )  LEFTSIDE (0 3)  R I O H T S I ~ E  ( 5 0 0  9 )CG ( 2 5 0  4 t  1 )(PIJTRELS f ( L  I Q ~ T w O U S E  S T A R T P T  (0- 0 )  S T A R T O R I E N T  0PPRAPE ( 0  1 0 0  8, 3 5 0 )  PSCaLF.
I, D R A W R O G  L T ~ ~ ~ ) .
~ O ~ S ?ROTTOM ( 5 0  0 )  T O P  (50 350) LEFTSIDE ( 0  175) RIQuTSIDE ( 1 0 0  175)c n  156 175) 1 )4A PITIFUL EXCUSE F'UR P CCnNPlc MOPE L I K E  THE TIN WOODMAN OFTHF w I T A R D  OF 0 2 ,  4CbOkN ( L A M B D A  ( S I Z E )  ( P R Q G  0(PUSHSCALE t 1 Z E )7PENDOhN)(RECT 2 8) ( P Q S  2 4) (nECT 18 4 )  (POT; 18 d2)( R F C T  2 8  1 8 )  ( P O S  28  6) r W C T  4 6 160s 4 -2)(RECT a 101  ~ P Q S  ~ s 2  8 1 t ~ m r  2 a )  2 0 1t R E C T  l a  4 )  (POS 50 ( L E F T .
9 o )  ( F Q R W  1) tP1GHT 96)( V ~ c t  8 6 )  ( v E C T  6 )  ( I -EFT 9 0 )  ( F n ~ l r l  1)  ( R I G H T  9 0 )(PnS -12 -14) ( v E C T  -14 -14) (LEFT pn) ( F O R M  2 )(LEFT 90) (FORM 2 )  (LEFT 90) (FoRW 41 (LEFT 9nl(VECTI 12 1 ~ ) ~  ( ?
a s  o l a )  I\)ECT - 1 2  1 2  ( R I G F T  90)( F O R M  4 )  (cFFT 905 (FOaW 2 )  11 EFT 901 ( F O R M  2, ( R J G H T  90)(VFCT 14 - 1 4 )  ($05 -48 - ?
O )(?
?NIP( P 0 P t C A t E )) 1 )  ( W A T E R ( L A ~ B Q A  ( S I Z E )  (P'Rco t z(PUSHSCALE ST2F)(PENOOWN)(VECT 1 0  125) ( V F C T  - 1 0  l ?
S ) ( V F .
C T  0 1 2 5 ) ( v ~ ~ T  - 1 0 125)(PFNUP) 1 )(LTGPJTHOUSE ( L ~ V P D A  ( t I - Z F I( P R O G  (( P ~ S W S C I L E  S'IZE)(PENOOWN) ( R I G H T  90) ( F O R W  IQO) tVFCf -20- -250) (LEFT 9 0 )(FoRh 5 0 )  (LEFT SO) ( V E C T  7 5  l b )  !
V E C T '  2 5  - 1 0 )  ( L E F T  9 0 )  (FORW 40)-(PFNIJP) (VECT , O  2 0 )  ( P E ~ O O ~ N ) .
( V E C T  -50  - 9 0 )  ( P E ~ c I P )  (V'FCT 25 O [(?FNOOWN) ( V E C 7 '  0 9 0 )  (PENUP) ( V E ~ T  -50  d )  (PENOCWN) (VECT 50  - Q r ) )(PENUP) (VECT fi 2 0 )  (PEhaOWN3 ( V E C T  0 5 0 )(VFCT 250 2 0 1 ( R I G H T  ' 1 8 f l ) f P ~ N U P )  I ) )( D O C K  (LAPBOA ( S I Z E  1 W R Q G  ( fPUsHc;CALE c;t ZE 1-(PENDQMN) IFQRk 30)(RI.GI.
'T 9V) ( F O R M  1 0 4 )  ( R I G H T  9 0 ) .
( F O R M  3 0 )  ( R I G H T  BOI .
(FORW 1 5 ) .
( R I G H T  9 0 )  (FOR!
2 0 )  ( L E F ~  90)  FOR^ 5 5 )  (LEFT 90) ( F O R M  - 2 0 )(BIGHT lea) ( p e h r l P >  ) 1 1OF c ~ M O N X C A L  C O R M S  WHICH ARE THEMSELVES F u N C ~ f f l h S  c(WFINE 5 (L R X G H T Q ~  ~ L A W R D A  ( :h l  412)~ c ~ N D ( ( A ~ D ( ~ E T ' N - ~  S ?
I [ C T )  ( G F T  hZ ZPICT))CPUT' ST 3AIGHTdF - f O ~ l )  (PUT T O K 1  Z L ~ F T C F  ST).
)( 7  N I L )  11 )I F R O P ( L A ~ B O A ( N I  h2) ~ I L )  )( T O  (LAMBDA (Nl h2) k I L )  I~ L E F T ~ F ( L A M B D A  ( M I  N2) ~ R I G Y T O F  N Z  N1)  ) D( R E s ~ D E ( L A ~ B D A  (Yl NZ!l (RIGHTOF N i  N2)  1 )(HOLDS tL9H0Ot!
( S T )  (HOLD S T )~ H E L D ( L A V B D A ( S T )  (HOLD S T )  ) )t ~ n ~ n I ~ e ~ ~ a w p g n c s T )  (HOLD S T )  ) I(HOLn (LAMBDA ( S T  1(PROG E )[PUT S T *  ~ s U P P O R T P T ~  U A N D S )( R E T U R N ( S V ~ ' P O R T ~  S T ) )1 )  1('sALCINCE l t 4 P ~ n A  ( S f  1 ( S U P P n p T l  S T )  ) 1{RAt&NCEs CL~PRDA 1st) (SLPpnRTl  S T )  ) IU~A~,ANCEB ILAMROA {ST)-(SI!
?PORT 1 ST 1 ) 1( P ~ L ~ N G ~ ~ G I L ~ M E D A  ( S T )    SUPPORT^ 5 T )  ) )!
p S ~ ~ ~ o ~ T  (LAIROA ( S T )  (S I IPPc lRTl  S T )  )~ S @ P O R T S  ( L A Y R C A - ( S T )  ~ S L I P P ~ R T ~  S T ) 1 )(SIJPPORTED ( L A M ~ D P  ( S T )  (SUPPORTI' S T \  I( S U P P O Q ~ ' X N G ( C A N R D A I S T )  ( IJPPORTX S T )(BacaNcE ( L a ~ ~ o a  ( S T )  ( S U P P Q R T ~  S T )  1 ) -(BALANCES ( L ~ M R C A  ( S f  1 ( S U P P O R T 1  S T )  1 ' )(PhLbNcXhG ~ L A ~ Q D A  ( S t )  ( S U P P ~ R T I  q f  ' 1 )+ A L W A Y $  RETURNS TRUE*( P U T W O ~ ~ S  ~ C ~ v a t , a  csrl ( P R O G  r ,J)( C Q N Q ( ~ N U L L ( S E T Q  J t C j E t  FT Z M O D ) ) )  ~ R E T O R I U  - S T )  1 1e (CONO ( (NULL J) (RETURN s t )  )(SETQ K (GET (CAR J) 3C1.45S) S(PUT S T  K ( B E T ( C A R  J)  K ) )~ E T Q  J ~ C D R  J ) ]  ( G O  R )(LAST (L.A*QDL (LST ( C A R  ( R ~ v F R S E  LST).)
) )&"THIS IS A - S T A T I C  V E R B  THAT IS THE C ~ N O N I C A L  F O R M  FOR 5UPPr)RTB4LbFCEv HOLn ?Tern+(SUPPORT~- (CPMPOA ( S T )  (PPnr:  ( 5 1 1 ~ ~  oeJ .
?Man w o o  THI T H ~BA-LPT 1" 8AI PT 2 S U P P O P T 9 T l  SUPPQRTPTZ J TOK COMP )CVSFT S T )(cOND ( ( A ~ B  SU83 O & $ )  ( c E T Q  .TH1 SU8J) ( S E T @  ' T H ~  OBJ)  )( S U R J ( S F T Q  'fp2 $ U R J )(,OBJ (sETQ r T H 2  C R J )  ) 1Vl ICOND((NU'LL V Y O D I ~ I L )( ( S E T ~ J  4 (CAR Vw0nj 1 (PUT TH2( G E T  J = C L A S S )  (B?T J (BET' J :CLASS)(SETU V M O ~  (cDR V Y O D )  l (no V I )  I )PI (CONO ( (NULL P ~ O O )  I G O  O ~ F P U L T )  I J( S U B  CONP(CAR PuOb))  (SETQ P M ~ D ( c O H  P M O O ) )( CbNC ( I S E T C  PREP I BET ~ O M P  ?PREP) 1 SETa PREP t C A R  PQEP) 1 ) I( S E T B  TQK(GET C ' O M ~  5 T O K )  1( ~ 0 ~ 0  ( ( ~ h n  (NULL T H 1 )  (OFT TOK F P I C T J  (MEMBER PREP ( L I S T  SON E I N )  ) 1( sETG T H ~ .
( S Q M P ~  1( 4aNO CR,J (NULL S U P P O R T P T ~ )  (MFWQER PREP ( L I S T  = I N  - Znhi S M I T H )  )( ( W O  A L L  OBJ) ( N ~ ~ L L  R A L P T L )  (McMBER PREP ( L I S T  :ON Z w I T H )  )(SETTS B A L P T ~ C G E T Q U  T H ~  TOR-) )  )(PUT T P 2  ZRntPT  B A L P P Z )  )( ( A N D  (lkULL R P L P T I )  (MEMRFA PREP (LIST EON I R Y )  )(SETO B A L P T ~ ( G E T P K  T w 1  TOK)) )(,PUT 1 ~ R ~ L P T *  BALPT 1 ) .
)( T ~ P R I N T  (CONS E ~ ~ N A C C Q U N T F .
~  ~ 6 0 :  t ~ ) C O P P ) )  1 )( G O  P l )DEFAtJh T(CONO ( (Ahn TH1 fH2) (PIJT T H I  ~ S V P P O R T  T H ~ )rpyT T H ~  =SUPPORTBY T n l j  1 )~ c O N O  ( (AULL SCJPPORTPTL) (sEJQ TIJPPORTPT 1 (GET ST Z S ~ I P P ~ R ~  P T I )  )( S E W  S U P P ~ R T P T ~ ( G E T Q K  Th1 S U P P O R T P ~ I ) )(PUT h 1  F s I I P P ~ R T P T  SUPPORTPT~-)  ) )+NOTE T H I S  XS A S T A T E  ' V E ~ R  50 NCJ P R O C F ~ S  MOUE-t,.
IS C O N ~ T R V C T F ~ ~1-1( V S E ? '
( L A M B O P  ( 5 7 )  (PRQG 0(c;ETQ SUR J (GET S t  Z ~ I J R J )  1(P 'T ' IQ  O q J  (GET  S T  3n~,1) 1(sETQ PwbC (GET S T  =pvOD)  1( s E T Q  VMOD ( G E T  S T  3 V M O D )1 1 ,( s A .
1 ~  (cA'FBDA ($7) (PRQG ( 1(RUT ST ZMFDTUF 5w4TEFVl(PUT Sf  F V F H I C  ?
B O A T )(RFTUHN(pQVE*  S T ) )  1 ) )( S A I L S  t L A M R E a  ( $ T I  ($AI-L S T )  ) )( S A X L $ O ( L A M B ~ A ( S T )  ( S A I L  q T )  ) )( S A X L I N G  t L A t d ~ ~ A ( s 7 )  (SATL 511 ') 14 T H I S  IS THE C A h O N I C A L  V ~ Q P  O F  v ~ T I O Y  F O R  T I E  SYST-EM sI M O V E ~  ( L n M s n ~  ( S T )  (PROG C~UBJ ORJ COMP C O W S  A TH PMonI VEHIC M E Q I u M  S G J )+SET S U ~ J  ineJ COPPS N I T H  V S E T  4(VSE7  S T )( c ~ N o , ~  ( G E T ~ K  9 U R J  EFORCE) ( s f 7 n  SUB 11 )( ( G E ~ O K ~  SLRJ f A h I Y )  (SFTO A .
S U ~ J )  )( (QETQK sUBJ E V E H I C )  ( W T O  v E H I C  SUB J) )( C o N o I  ( A & D  ( N ~ T  V E H I C )  ( G F T O K  J ~ V E H T C )  ) ?SETO V E H I c  ORJ) ( ' (GETOR O R J  Z M E O I l , M )  (c;ETq WEFIUY  0RJ )(OBJ (7Efr3 1I.c ' Q S J )  1 1&FOR EVERY COMPLEMENT 4' P I  [cOND(: (NUI, PP80)  (GO- ~ E F A U I , T )  ) 11-70 C O M P  ( !
AR P M O C ) )(5ET.Q PREP ( C A R  ( S E T  ~ O M P  =PRFP) )cwrapwo ( R F T  COMP Z T O K ~ )(CC?Nc( tAhD(h\JLL V E H I C )  ( M F Y q E R  PPEP (LTsT Z I N  Z O N ) )( O F T  N W O  S V E F L C )  I ( c E T ~ J -  VEHIC CON?
)( (AhU (?~uI.L v E D I L J M )  t MEVREG?
PREP ( I ,  1 5 1  %ON ETwROUQH f ACMnCjSZ I W )  I (GFT N H D Q E M F ~ T O M )  1 ( S E T Q  MFDIUM ?OE49) )( (AND (NULL S )  (MEMBER PREP ( L I S T  ZFPQM 30bT Z ~ E F )  )(CET hIW0 Z P I C T )  ) TSC78 -S C Q V P J  )( ( AhD (NIJLL .GI (MEMBEo PREP ( L I S T  30 ' ~ F % R )(GET NHD Z P I G T ) )  (SETQ G COYPI)I T  (PRT-P~T ( L I S T  4 U k ' l l E ~ t r ~ E O ;  cOMP)  1 ) 1~ C O N ~ ( ( S F T Q  PMOD (CDR P M n n ) )  (('30 P I )  1 )OEFAIJLT4 i  L O O K  O N  hPS FOR V E H I C *  h-'EDIUM, S n , ( N O T  DOWE Y E T )532 L O O K  -ON VFj S T  TO SEEA TF - V & H I c  AND MEDIUM 'FAVF BEEN PASSFn UP3 LOOK I N  DIcTTONARY F O R  ~ I O R H A L  MEDIUM U E H I C  GIYFN ONF4 DFFAULT $ Akn G TO'LEF-T  AN^) -RIGHT SCREEN5 DEFAULTS 70 TOP?
B Q T T ~ M  t d l _ E ~ T r  AHt7 RIGHTSICIF OCCIJR I NMAKEAR AND C O M P I C S 'JI(COND ( (AhD (NULL vE-HIC) ( S F T O  J (OFT S T  E v E H I C )  1( S E T C  V E w T C  ( M h K F T O K  J) ) ) 1,(CnNn((AhD(kul .
.~  CEDILC) ( c F T O  j ( n E T  ST E M ~ Q I U Y ) ) )(SETQ MEDIUM (NAKFTflK J) ) 1 )( C O N D ( ( N U L L ' $ )  ( s E T O  S ( P ~ K ~ T O K  % P O I N T ) )  1 )~ C C L N C ( ~ ~ ~ U L L  GIISETQ G W A K E T O K  IPCT 'NT) )  ) )( c ~ N f i (  (Ah0 - w E ~ I U P  (NLLL v F Y X C )  (c;ETQ 3 ( Q E T O K  WEDTUM ~ D V - E H I ( ~ . )
) 1(SETG V E H I C  ( V A K E T O N  $ 1 )  1 )(CONE ( (Ah0  V E H I C  (NULL MFDILIM)  ( $ E T Q  J ( B E T O K '  V E H T C  EDMEDIUM) ) 1(SETC 4EDTUM (,PAHFtr)W J) ) 1+PROCESS, MQDEI.PU7SA GLnRPL COhrOIT ' I r )NT ON 5EMANTTC N E T *  PUTS I N I T I A L *~ N T E R M E o I ~ T E  4N0 HESULT c ~ N D I T J O N S  ON ST WHERE P R E P R A O  ANn P R A GC A N  ~ R T N C  THFW ORTOTME NVT TO CoPPOSE n P I C T U R E4G L O B ~ C( A h 3 0  I (PUT ~ s ~ P Q O R T  1) (PUT I E s U P P ~ ) R T E ~ Y  S )[AND A t k  fi SLEFTCF T W  (PUT TH EQIGHTOF f l )AND A (PUT vFr.Ie E S ~ P P O R T  A )  (PUT A = ~ U P P O R T E Y  !
IEHIc)( A N D  T W  (NULL 4 )  (PUT V E H T C  ZSIJP"PCRT T H )  (PUT T H  =SUPPORTBY -* V F W I C )  1(PUT V E H ~ C  E A R O V E  MEClbM)(PUT MEDIUM Z A E L O J ,  V E W I C )(PUT MEOLUY 5LEFTOF G )  ( P I I T  6a :RIGHTOF *EI)IUM)(PIJT MEDIUM :RIGHTOF'S)  ( P U T  S Z I  EFTOF MEDIUM)I N I TWUT ST S I N I T  ( L I S T l L Z S T  =RFMPRflP VEt41c :LEFTOF)( L I S ~  ZPIJT VEHIC Z R T G H T C F  5 ) )  1INTER(PIIT ST ZINTFR(LIST(LIST =QEMpRnP VEMIc ~ R I G ~ T O F ) ) )RESULT(PIJT ST ~ R E S I J L T ~ L X S T ~ ~ L I S T  =PUT vEH.1C  LEFTO OF G) ) )(BFTURN S f )1 ) )+HERE IS THE PROCRUSTEAN PFD F O R  P R E P Q ~ I T I O N E  4(WITW (LAPBOA (Nl h 2 )(CONC( (N!JLL(SET h l  Z P I C T ) ) N T l .
)( ( P U T ~ T O K ~  ESI IPPCIRT S T )  (PUT  ST  :SUPPORTRY ~ 0 ~ 1 ) )(1 NTLH) )( O N  (hArrlBOA'(b) h 2 )(CBND ( [NOT (EFT N l  3PICT) ) N I L )( ( ~ ~ ( S F T C  J ( G E f  h 1  N ~ ) ) - ( G F T  T O Y ) .
E $ ~ U P P C R T ) )(PUT T 0 K 1  ~ F I J ~ P O Q ~ P T  J) )(J (PU' I  .
T O K l  ZBALPT 2 . )
)( ( G E T  h 2  3PICT) ( Q P ~ ~ G ~ ( P I J T  ST.SSCIPPOF?T Tf lK1)(PUT T 0 ~ 1  SSUPPCRTRY S T )  )( f  ~ T L )> 1PREPOSITIONS Akb THEIR APRUMENT!
?~ TO ~ E T E R M ~ N E  WHICH WORDRFsT'  Q U A L J F I F ~  A S  THE F E A ~ )  T H A T  -1s TO RE t.300IpIEQ JI+ ( P  CAND N )  15  THE CALL W H T C H  EVPLS*  P W I T H  tnE ARGUMENTSCAN0 AN0 Ne ~ k f 9  MnDE 1 A L S ~ ~ ~ I J S E D  Tc) CALL A VERBI N  THE G ~ ?
A M M .
A P ~(PREPMATCH ( L A M R O ~  ( S T  L S T )  (PPOr?
( N  CANn 0 T O K 1  T O M 2 1(cOND([SE~TQ.
,  P ( G E T  S T  ?
P R E P ) )  ( S E T Q  P ( C A Q  P I )  I )t SETB N ( O F T  S T  = T Q K )  )P (cOND ( (NULL L S T )  (RETUQN NIL) I~ s E T Q  C ~ h n  ( C A R  L s I )  )(SETP ToKI,(C-AR(GFT C a ' h l ~  :UjI)r)R ( ~ 0 6 0 ' (  ( A N C  (GET  ~ b k ' n  = v )  (WEMBER P (GET  CAhn ?PREPS)  1I R E T U R N  (PUT T O U ~  ~ P M O D  (CONS s f  ( G E T  TOul 5 ~ ~ 0 0 )  ) ) )( (EG S f  T C K l t l  ( s E T C  " r ~ 1  ( C A o R  (GET CAN0 3 L / I )  ) ( G O  R )( ( P  CahO N)  C f iE t l l ~h !
7 0 ~ 1 )  1 &DO S E M A N T I C S  OF PRFP.L ( f  (sVC t S T ( C D A  I C T I )  (Gn A )  1 )1 ) )+ T H I ~  USE OF HCLC AND IJNNflLR IS A P P R O X I M A T E L Y  E o U I V A I -  E N 1T O  THE Moons VERT A R C  4(UNHOLD C L A M R n A  ( )  (PHOO ( J )A ~CONO( (N IJLL ,  POLO)  ( R E T U ~ N  @XI,))( ( G E T K A R  HOLD) EDREP)  (GQ P I ) )( (N1Jl.I- (cFT ( C A R  FOl-h) E s U ~  J) ) (PI IT  .
( C A R  H O I - C l  ZcIJRJ( G F t P - ?
S U R J )+DO VB S E M A R T ~ C S ~( - (= .T (CAR HOLr) )  Z T Q K )  ( C A R  H O L D ) ) - ( Q O  P 2 )  1( (hULL ( G E T  ( C A R  hCILn) ZQRJ) 1 ( P U T  ( C 4 R  HCI,O) EOr.1 J( G E T P  = s I J H J ) )cD0 vF3 S E M A N T I C S 4Jd ( ( G E T  ( C A R  HoLnl = T O K )  ( C A R  W O L D )  ) * (Gc  P P )  1 )P I  (Ct')NC ( ( P F ?
?
F M A T C H ( C P R  H?LD) ( L I S T  ( G F T R  SUB,) ) T )'( ( P R E F M P T C H  ( C A R  HOLD) G L S T )  7)( f  K J ~ ) )P2 (SETQ HOLn(CDfi H b t D ) l  (Gr )  A )1 ) )( P ~ R ~ E  ( L P M B D ~  ( S N T C )  ( P R C G  (++ NnSEF Hp HnLD GLS?
LFV)+PARSE CPLLS A T N  BY S E T T I N G  LEV-EL T O  Z E R O  Ah0'PUSHING T O  C L A U S E +(cLEARRFGs R E G L I S T )R SET^ LFV 0)(9E7Q * ( C A R  S N T C ) )W R W T I p y S H  EClrPUSF!
)~ c ( ?
N D ( ( ~ E T -  * : D E T ) .
~ S E T ~  F O G  Q )  ( s E T Q  V B  I I S ) )( ( S E W  F O C ( G F T  4 =qUPJ)  1 ( S F T Q  vw a ) )( ( S E T 0  F,OC(GET @ = O P J ) )  ( s E T Q  V R  * ) )  1~ F T L R ~  ( C P R  r w ~ )  I1 1 )( S H Q M ~ L A M B ~ A  ( T C K S( c O ~ D  ( (NULL TOWS) f D r l h l p )( ( P R I N T ( C A ~  fob?$)) ( P R J ~ T ( P P R ~ ) P ( C A R  T O K S N )~ ~ H O N  ccna r o n s ) )  z l1 )( V R M f l T  CH (LAWRDP I V B  L S T )+FINDS ~ T E C E O E ) ~ ~ T S  FOR.
PU~NOUNS B Y  CHFCKING PERSONAND NUMBER,,.CLQ~NS ARE  EXL LESS 4( f iNTEC(Lf iM0DI (PRON C S T )  ( P R o O ( C A N U )(CON0 ( (NULL L S T )  (RETU9hl N 1  L )  1(sETQ CANE ( C A R  ' t s f )ICOND ( ( A ~ D  (?0 ( G E T  PRON SPERS) t GET C ~ N D  ZPERS)(MEMRER (BET CAhO ZNRQ) (GET P R O V  ~ N R R )  1(RETURN(CPR ( G E T  CANQ g u l l )  ) ) 1( T  (WTbF?IU (ANTEC PRON ('CnR LST)  ) 1 ) 11 I )+ L & X ~ C O N  AND L E X l  FORP P PROPFRTY LIST STRUCTURF FROPTHE FORM SHOWN I h  ( L F X I C q Y  ( , ) 1(LEXICON ( L A P P D ~ ~  ( L )[MAP L (FG1107F (CAhdeaA ( \ - I  ( P Q ~ ~ z(PUT ( C A ~ R  L-1 ( C A D A R  L )  ( C A A H  L )( L E X ~ ~ C A A R  L )  ( C D C A R  ' I-)) 1 ) )1 1 1( L E x ~  I L A P ~ ~ O A .
( W  L P )(cQND((NUIJ- L P ) T )( (PUT k ( C A P R  LP ) (_CAr)AR L P )  1 ( ~ k r l  W ( C D R  L P ) )  ) )1 )) , ) ) Ic THIS F I L E  Is A SET OF L I S P  FUNCTIONS T O  SIMULATFSOHE 0 THE P R I M I T J V E  FUNcTIOhlS OF THE M .
I a T .
L O G OLANGUAGE AND I ~ T E R F P C E  ~b THE GFSYS S O F T W A R L  FOQ THEI w n c   ISP PLAY TERMINAL.~ ~ R T T T E Y  i 3  G M C O N  NOVAN mj.2.9 Y A Y  7 4 *  4J(G L O B ~ L  I ~ I T T A , L I Z P T I Q ~ .
FNTER (I,CGO) TO S T A R T  TMESYSTEM  AN^ RETURN TQ HAINCnOP c( L O G O  ( L ~ M B C I L  0 (PRO6 lTPFy THETA STHEJA C T C F T AGLOBALS J.ZE SSCALE C ~ C A L E  X ~ a f  kL Y T O T A LT H E ~ A ~  SCREENXPAX ~ ~ R E E N Y M B X  CSXZE P$IZE- I T E M A D~ X T O T A L  T Y T O T A L  P I I R OU N l V O O  P ICSCC * T R A ~ E *  M A S ~ $ C L1(LTNTT)(MAXWLOQP) 1 ) )4I N ~ T J A L Z ~ A T X Q N ~  ENTER (LINIT) TO R E ~ I N I T I A L ~ ?
E  ANDSTART A NEW PI[CTURE, .L( L I N l T  (LAMBDA 0 ( P R O G  o( S E T 0  OL70RhLST2E 1 3 )(CSETQ P 1 1 ~ t )  ( Q U O T I E A T  3,34159265,3SR98 1 .80c0) )( S E ~ Q  CSTZF  l a d )($E*TQ P S 1 Z E  '"h J L )  ( s?Ta  SCREENXMAX 1 0 2 3 .
0 )t?aETa SCREENYMAA 1023.0)r t E R ?
A o )(PENUP)[ W E A D I R G  Ct,W( R E T  l ~ R k )  1 1- 14NEWFRAME -SE&DS COMMAhDS T O  THE TPLAC TO ERASE THE SCREENANn P E c R E A T F ~  THE F-RPME = L O G O .
JI(NEWFRAME., ( L A M B D A  ( (PRIIC; 1W"wT EER NXL)CSETQ ITADDER 2048)1 ) )J1E IS A SHQRT k OF E R M E  T O  ERASE  YE s C A E ~ N .
J,(E  ( L A M B D A  (ERASE)  1 )4ERASE THE SCREEN A W ~  ALL-TMENS IN UNIVERSE C F ' O I S C O I J R S E  s(ERASE (L 'AYBDA ( 1  ( P R O C ~ J A T P ~A (~c0Nr-j (: (NULL IlhIVQT!)
(60 P) 1 )SET^ h y ~  (CAR U N I V O D I I(PUT 'ATM - ~ ~ M L A C I T E P  h LI,)(DELTTEM A T * )[ G O  A )R (NEWFRAME)( RYTIJRhc) ) I+L I S T  PROPERTY L I S T  R E L P T T o v S  flF AN A 7 W r  EXCEPT P N A M F ~T-NFO, 4WD EXPR.
JC( t 1 $ T R f L  ( ~ 4 L 4 9 b 4  ( A T W  (PRQC; ( X  Y )( P R ~ N T  ~ L A ~ K )( P R t W Y  A f M )( S E T Q  X ( C S R  B T M ) )A (CONO ( ( N U L L  X I  ( R E ~ L R ~ ) )( S E T B  y ( C S R(CONt) ( ( O R  ( E Q  Y E P N P M F )  (EQ Y : INFO) (EQ Y % X P f ? )
)( G O  R ) ) )t P R I N l  B L ~ N K )  ( P R I h l  A (PR-EN1 Y )  ( P R I h l  COLON)'(PRIw1 BLANK)(PRIhdf ( C A R  X ) )R (CDR X I )  (en A )1 ) )$ITURN TURTLE HEPDING Td THE R I G H T .
A( R ~ G H ~  (LAMBDA (N) (H64DTNG (PLUS N T H E T A ) ) ) )J,TURN TURTLE HEADING T O  TwF LEFT, 4(LFFT * ( L A M B D A  (N )  O t E P C  I ~ I G  (DIFFERENCE THETA N )  ) 1 )JcG S T A R L T S H  TURTLE H E A D I ~ G - ,  AROUYENT T S  H E A O I ~ G  1hOEBREES CCOC((IWI$F FROM 4 N Q R T M ~  + (nFaorNo ~ L A M R D A  (TH)  ( P R ~ G  ( I(CONU* '(pa (oREATERP TH 360Qr01 (LFssP TH -36h0 0 0 )  )~ E ~ R O R .
(ARG OF H E A ~ ~ N C  100 RIO) ) ) 1~ $ E T Q - T H E P A  TH1b (CONI) t (QREA,TERP T H E M  - 0 .
0 0 0 6 0 0 0 1 ~  ( G o  0 )  1 )  (SETQ THE74 -(PLUS T H E T a  7 6 0 .
0 i )(GO' A )B ( C O N D  ( (LEssP T W f P  3 6 0 .
0 )  (Gn C ) ) )  (srTn W E T h  (D IFFERE~GE THETA 360.0)~ S E T D  $THETA.
(SIN T H E T W I[SET0 CTHETA (C0S T H F T h 7 1 )csda S C A L E  (-TIMES STHE.TA' c'S!ZE)tstrn C S C A L E  ( T I M E S  CTHFTA C S T Z E ~ )( R E T U R ~ ' ~+P I C K  THE l u R ~ , b , ~ r , S  PEb UP, J,IPFNIJP ( L A Y R o A  0 ( S E T G  TPFN N I L )  )+PUT THC T U R T L E ~ S  PEN B-Owy a J,( P E N D O W N  ( L P M R O A  t ( S E T 6  TPEN T I ) )CMOVE WE TURTLE BACKNARD$ JIrRnCN (LAMBDA ( W )  ( P O R N  ~ M T V L &  w )  1 1  )JtMOVE THE TURTLE B Y  A S f G h ~ E n .
A ~ O l J h T  4VWVE ( L A M R D A  ( W )  W O R M  w )  1 )JIGENERATE OUTPUT COMM4NCS T q  THE I M L A C  Q I v E ~  THE COMMbNDwa~b  a ~ o  A LIST OF A I G L M F N T S .
4rmu7 ~ L P M B O A  (COMMAND P C ~ , S T )  ( P G O G  I 1(PR f ~l D A R P Q ~  1c ~ R 1 ~ 1  C n v ~ a h o lA rcaNn ~-(NUL'L PLXSTA ( T E R P R ~  1 (RETURN) \IPRINI B L A ~ K ) '( P R X N I  ICdR FLTSf ) I(SET0 P L I ~ T  (C09  P L I S T ) )[GO A )  V lCFORW W V E S  ~ H F  TURTLE B Y  A SIGNED PYOURT IN THE CURRFNT0IpECTLOhv I F  TFE p?h Ic TIOWN ( I P E N  = T I  r A VECTOR WILLeE DRAWN.
i(FQRW (LAMBDA ( W )  (PPOG [ x  Y T X  1 Y  XP Y P )rsETp X ( T I M E S  CSCPLE w ) )I % E ~ U  Y I T P E 5  SSCPLE k r ) )(SET0 XP (PC%S X .
T Q T f i t  Y ) )(SET$ YP ( P L L S  Y T O T A L  Y ) J( C O N !
{(OR t L F f S P  XP 0).
(LESSP YP n l  (oREATERP XP S C R E E N Y ~ A X )( ~ G ~ E A ~ E R P  ;P ,SCREENYMAX) ) (ERROR 5 (WOVE WOuLn no OFF$-GREEN)) ( R E T U R N ) ) )~ S E ~ Q  1% ( IROYhO ~DIFFERENCF XP I X T Q T A L I  ) 1(%TO IY ( I R C U R D  (DIFFFRENCF YP 1 ' I~nf  AL)  1 1~ S E ~ T P  ~ X T O T A L  (PLUS I %  X X T ~ T P ~ )  ) ( ~ E T Q  SYToTaL (PLUS Iv r Y T 0 t A t )  1I$.ETQ ~ T O T ~ L  XP)~ E T O  Y ~ O T ~ L  YPI~ C Q N D  ( P P E ~  (GOUT ZLI ( L I S T  I X  1 ~ ) ) )(1 (GOUT EM0 (LIqT 1% 1 ~ ) ) ) )11)TRfiUND ROUNOS A hUMRER T O  THE CLCSEST TNfEGEP- 4( T R O U N ~  rL -hpPv~a ( X I(CQND ( (MINUSPI  X I  !
F I X  (l7lFFERENCE )r 0 .
5 )  1 )(1 ( F I X  (PLclS % n , W )  1 1 )4PO$I?I%N S F T S  THE CYRRENT P O S I T T O N  OF THE TURTLF T O  A SPECl rTEDVECTCR POSIT TO^, SUBJECT O Y L Y  TO TttE SIZE F A C T O R  GLoRBLsTZF.A VECTOR IS A L I S T  OF THE ( X  Y )  C O O R O T N A T E S *  4( P o ~ I T I u N  (LAMBDA ( V )  (PQflfi ( t X  I Y )(sETQ T X  (TrtQF:S ( C A R  V 1  RLORAI.SIZE!
j( S E T O  i~ ( T I Y E S  ( C P D P  v j  Q L O B A L S ~ Z E ) )tCOND ( ( O R  (LESSP I X  0 1  (LESSP T Y  0) (skEAT?f?p I x  s C R E E N ~ Q A X )[ G R E A T E R P  T Y  ~ C R E E ~ I Y M A X )  )(ERROR i ( P q S f T 1 O h  I $  nFFS C R E E M )  ( Q F T U R N ) ) )( S E T f l  X f f l T b ~  1 x 1(SETQ Y T O T R L  I Y ?
( S E T 6  I X T O T A L  ( I R O U N D  7 x 1 )( S E T Q  I Y T O T A L  ( I R O L h D  T Y ) )toout ZMT (LIFT f x 7 0 7 u i  Y Y T ~ T A L )  1 ) )CSCALE SETS A L C C D L  SCALE ( T N  b O n l T 1 0 N  T O - G ~ O B A L S I Z E ) ~  AND M A YBEm USED SFY THE S I Z E  O F  S O M E T ~ J N G  T o  RE D R A W N  ~ ' ~ T H O U TMULTIPLYIN@ F V F R Y T H I ~ G  C)ljT, c(SCALE m w W m ~  ( $ 1  ( P R c G  0(SFTO CSIZF '(TIMES S ~ I .
~ M A L ~ X ~ E ~  1( S E ~ O  SSCACE ( f  I M F S .
S T H E T ~  CSJZC)')( S F T O  CSCALF ( T I M E S  C T v F T A  C S T Z F ) )1 ) )CPUsHSC4LE PUSHES OQWh THE c U R R E ~ I T  sCALF AND SET$ THE CURRFbJTSCALE F A C T O R  T C  THE S P E C I F I E D  VnLUE.
HE COCPLFCENTARYROUTINE POPSCALE J I L L  RESTOPE THE S C N F  7 0  TkE P A E ~ I O U SVALUF rlr( P U S H S C ~ L E  (LAWBDA ( S )  ( ~ R Q G  0(SETQ P S I Z F  (CONS ~ $ 1 2 ~  P S I ~ E ) )  (ecdLE S )  ) I )CPOPSCA1.5: WILL RESTORE TH'F +CAI-?
F A C T O R  T O  THE P Q E V I O U SVALUE ~ A V E D  a v  PUSHSCALE.
4P POP SCALE ( L b M @ D b  '0 ( P R f i 6  ( 1(CONr) ( (NbLL P S I I E )  ($CALF 1 1 ( R E T U R N )  ) ($~rf3 C S X Z F  (CAR P S I Z F )  )tsE.Ta S S C A L F  ( 7 1 ~ c f  S T r C T b  C S ~ Z E )  )SET^ C S C ~ L E  ( T I M E S  CTuFTA C S l Z E ) )( S F T O ~ ' P S I Z F  ( C o d  PPSIZEl) ) )CA VECTORI F O R  FURPOSES OF THE FDLLOWINC vECTCR  ROUTINE^^IS a LfST OF: ? '
V A t U E S r  TUE x a h 0  Y C O O R D ~ N ~ T E ~ ; ~VSUM FORMS THE SUM O f  TWO YECTOPS AS A &  O N P U T  vEcTan.
4rvruu (LaMeCa r v l  V Z )  ( L y q T  (PLUS ( C A R  V ~ I  ( C A R  ~ 2 1 )( P C I ~ C  (CAOR V 1 )  ( c A O R - V Z ) )  1 1 1GVDIFF FORMS THE O 'LFFCR?N~F:~~ ,F  Twc ,VECrnRs  9[VnI.FF ( L A M B D A  ( V 1  V 2 )  ( la l$ 'T  ~ D ~ F F E R E N C E  ( C 4 A  V I )  ( C A R  V 2 )  1~ ~ X F F E R F ~ C F  ( C a n R  V i )  (CAnR v 2 ) I  ) ) )eVSCALE S C A L E y b  V E C T C R  R V  A SCAl-bf?, JI( 3 5 ~ 4 L ~  (LAWRDA ( V  S )  ( L f q T  ( T I M E S  ( C A B  V )  S )( T T P F S  (C4DR \ I )  s ) )  1 ){ V R Q ?
(LAMBDA ( V  TH) t?F?flG_(STH CTH)(CoND ~ ( L E $ s P <  {AHS T P )  ~ .
O Q ~ O ~ ] * ( R E T U P N  V ) ) )I S E T Q  S ~ H  ( S I N  '(JfPEs TH P r 1 8 m r~ S F ~ Q  b rq  lcos ~ T T H E S  TH ?I1861 1 )(RETURk .
~ C T S ~(DIFFERENCF.
( f  I V E S  (CAR V )  E f H )  ( T I M E S  (CADR w ) '  S T H )  )(PLUS (TxWES ( C A R  V )  S.TH).
[ ~ I M E ~  ( C A ~ H  V )  ~ T t i l ) , ,) ) I.I.pECt DRAYS A RECTANGLE Fanr THE CURRENT o R I E ~ T P T I O N -  ANDP n $ f T I O N p  T-HF ~ R G U M E N T ~  A ~ E :  THEd NU&RFR hF UhJTf FORWARDAND THE ~ V M B E R  OF UNI'TS sn THE a I e ~ f  10 BE McvEn I N  M'AKINGTHE ~ ?
E ~ ~ @ N G L F .CRECT I L A M ~ D A  fFW *RT?
(PRO(; ( '14FCsRU FW) ( R l G P T  SO) tF0sw R T )  ( R I G H T  9 0 1  ( F C R W  FW)RIGHT 90) ( F O R M  A T )  ( R I G H T  9 0 7  1 1  1QbPoS P051TIOhsh THE TURTLE R F C A T l V E  T O  I T S  PRESENT POSTTI[ONW T T H C ~ T  DRAWING P L I h c .
.
TME ARGUMENTS ARE T H E  NUMBER OFUNITS TO MOVE FOCidARO P N q  THE* NLJPRER OF u N ~ T S  T O  MOVF T O  THp R I G N T ,THE O R X E N T A T I ~ ~  I3 LEFT 65 REFQDE THE CALL.
+i P 0 S  (LAWBOA (FW.
A T )  (CRO'G ( S D E ' ~ J )c s ~ l a  SPEN  PEW (FEhUp)( S E ~ Q  A N F  ( V I N G  (L IST  FN R T !
h~ P I G H T  ANGItrow ~ V M B ~  (LIST F W  R T ) ) )[LEFT 4NblI S E T Q ~ P E N  $ P E N )  1 ) ).LrVECT ' O R A ~ S  CI VECTOR NHICbl- WILL GO FROM THE ,CC'f?RFhT Pr)SITTOP'awh O R I E N T ~ T J O ~  B Y  A S P E C .
~ F I E ~  AVOUNT fqRWARC &NO A S P E C I F T F OA M ~ U S T  T O  TPE R L G ~ T .
T H T S  IS NFEOED RECAUSF I F  IS U'SUPLLYT H ~ c A s E  THAT E I T H E R  TPE LFNGTH C R  THE ANGLE IS b N b 5 T YNUMBER, 4tvEC7 (CAMBOA (FW R T )  (PRO6 4 b N 6 1(SETO AN6 ( V A N G  (LIST F W  R T )  ) I~ R ~ G H T  ANG)(FORM, (WMAG ( L I S T  FW a 7 t )  1(LEFT 4 ~ 3 1  ) I )&PTSPLAY CLOSFS THE c L ' R F ~ R T  ITEM P N O  AnnS I t  70 THE CIJRFIENTFRAME SO I T  WILL BE D I S P C A Y E O ,  +cnrSPLnYA ILbMf lCa WRdq I 1 ,4 SEN0 4 COMMAND ?
'n THE  LAC TC CLOSE THE C~JRPEMTI T E M *  cteou?
Ecc MIL)( RETuR?~ 1 1 )+D E L I ~ L M  DELETES A N  TfEv R O T H  FRfW THE L I S P  D d T A  STRUCTURE A M 7FROM THE o r s ~ t r v .
+(DELITEM ( L P ~ R O A  ( T O k l r r b M ~ )  (PRDq ((GONO c (GET TdKNlrE f I v L o c 1 T E WtPA1~1 EDI) (PRINI B L A ~ K ) :  - ( ~ R ?
h j  E+JIJIV) ( S P I N 1  TOKNAME)r T E R P R I J  1 1 (DELREL (OFT 'FOHNAPE Z T Q K J  ZTfiKENS TOKN4ME)( S E T O  UNf V O D  (REMLIST T ~ K L I A H E  U N I V O D )  )REM MOB TQKNAVEJ( R E f  URk) 1 ) )CDELREL M M O V E S  A A  ENTRY I J N ~ E R  d PROPERTY L I S T  ~ N O I C A ~ Q RVHI)SE -LEFTMO?T ATOM 15 b 5  ZPECIFIEO.
c(DELREk (LbMflDA ( A T O P  REL VALUE) (PRO6 (PROPS Itdo~n t (NULL, (sera  PROP$ (GFT  A T O M  RFL)  ) 1 (RETURN)  1 )CPb(7 ATON REL ( R E M L I S T  VALUE P R O P S ) )(RFTl lRN I1 1 )4REMOVE A SPECIFIEO fT.EP F Q ~ M  THF TOP LFVFL OF A L I S T  +EMLIST t L A M B U A ' ( V A L  b\$T) (PRQG ~ T M P ].
(CON0 ( (NU-LL LST) (PFTURh') 1( ((EQ ( C A R  L S T )  VAL) (RETL'Rhl  ( C O Q  I- S T )  1 1 )(SETQ TMP LST( ~ c N D  I (NULL (CDR CSF) 1 (f?ETL;Rh TuP) l( ( E Q  (CPr>R LST)  V A L 1  ( R P L A c ~ )  LS\t (CDOR 1,571)l pEf \ lRW TV,P 1 1CSETQ L S T  (CDR C S T )  )(,GC A )) ) I$.C A R A T O M   KEEP^ T I R I N G  TNE C A R  nF THE ThlPUT ONTTL I T  FTND$ b hA T O M  4( C A Q A T ~ @ ( L A P R O A  ( X )  (Cbhn ( ( A T O F  X )  10( T  D ( ' ?
4 ~ ~ ~ n u  ( C A R  x ) ) I ) ) )+A'BsUAL R E T U R ~ I ~  TNE AeSCClr7F P Q S T T I O M  OF, A POINT I N  QFLATlvTC O O R D I N A T E S  Oh1 Ah OBdECT W T C H  HAS B E F ~ I  - P O S t t f O h l E b  R YQ R T E ~ T I  4V V l S V A L  (LAk9OA ( O B J E C T  W C P 7 )  (PROG (MODEL bnEl APT)SET^ WOOFL ( G E T  O R J E C T  Z T O K )  )( S E T  0 UDEL (VSCALE ( V O T P F  RELPT (GFT  MODEL  STARTP PI) )(I'JE,T O'BJECT sS17E1 1(CCND ( ~ S E T O  R C T  (GET ~ R J E C T  5 ~ ~ i E ~ ~ d ~  1 0 ~ )  I(SET0  VDEL N P O T  WDEt R C T ) ) ,  ) I( R E T u R ~  (VZUb'  ( G E T  ORJstT ~ S T V P L )  VDEL)1 ) )4 ,PUTRELS PUTS 4 ( i b ?
L N C .
C F  ~ w l N c ; S  CN A V  A T o W + S  ~F?nPFf l ty  ~ 1 5 ~ ~THE ARR~~HEIJT  15 4 Lt lST OF THE A T O M ,  FOLLOWED R Y  I N ~ I c A T D D~ N D  VALUE P P T R S ,  +(PwTAELS,  ( L ~ , P P O A  1 (PRnr ,  ( A T O M  REL VILUE)c s V a  A T O W  ( C A R  L 1 )A (CON0 ( (NULL (SETQ L ( S D R  L )  1 I (.RETURN) 1 )( S E T Q  MI, I C P ~ R  L )tcowg ( ( N U L L  ( S E T Q  L ( cna  t111 ( F ?
E 7 ~ ?
l u ) ) )(SET0 V A L U F  ( C A R  1-1)( P U T  ATOM PFL VALUE)( O C  A )  1 ) )J. A~JSOLIJTE .VALIJE 4(48'5 ( 1 A ~ ~ D A  ( 1  CCQ'hD .
( ~ P T N U S P  X )  ( Y T N U S  X I )  ( T  X )  1 ) )) ) ) d )&DISKOUT IS TME FUNCTICN R Y  M ~ R A Y  TYSnh THAT G I V E S  UqV I R T U A L  M E M O R Y  F ~ R  FbhCTrncS.k aw- - >CnS rrwo r- +A =  - LnW Y+ U  W J+ A  3 -u 4  1- 3W X u Xa m  - > -C -  - -aa!
Cz--C-ZOd I c ~ ~ n a aw ~ J W D Jw5)  P. w J c ~ hZ J  --a-LiO:e a a-> - Z d -O C  W O W  zk S+Cr:--U~a Y XI + + &  Z3k->+ C J Wd WF a CLA r J C E Q > 'W -> a  n e--P O  X 3 X -F L L  e .A L d - 0 a - aW i Q F F  UCLF C 3 4 t d Z O b -w z e - v ,  - - d J A I0 -5 -q-W F C 3 4  P A  .aX 4 W Q J I r U J K K -&- 0 4  3-a 214 D* l ~ J 0 ~ 3 ~ 0 - 3 UV t X Q Q f  W Z uoe J' --r;l t L w -  - - K-k td CC LL C- c tCC 4.
C + * * ze m  m LLF ~na-a vr r LF W *C 111 a x k  w e  F>d]-- 3 C r w I m  O X  + Y tA + v ,  aa x m ca -  o a Z I I t  U Q L'- o - Z O L  aY a- t +  &.!
UDH rn a = WOL O +  w w  2 a u O W -  Z L L ~o a a  r r w n  J o ~ V I O W ~ Z  o3 2 Irb-- 4 ff k k t U W  ct->F- 3 4  LL - > a V ~ U U * O  rusen W w a  -- 3rna.n~ c3zL f11 III r a Q V) k d r  A w w ,  L Wr 0 0 0  a - 0 o w 4  O I T 3CI u x e  - 1 1 1 0  w d z m ,  cn' ow t C R  0 N - tf * Z W  L 1 2  * * Jl- t Y :  @ P N 3 W e  J W O  d t W'Z k O l - 0  0 a A 3 W J W mC u 8- w u - l x ,  u a nvmkx+ L L ' ~  u o mL C P *  Cha- x -  - 0 IT > i Y Q 3 : B - a  + *LCtd 0 C %  U Y w c ?
i .
e n -  CL a c A a w 2V) - kQ  3 k F C f ~ -  W W U l - l n m k t d  a3-t I ~ k a ~ w ~ : r ; - a  t I- I Y-w wa: m 3-W V 3  k + C W Z W C 3  + 3 V) t +  Q k O Z X  tl I WI ( I k O  G , u u V I Q Q  P L vlF4b-xa wF Y cnn; I - P I I I  m a c  Y w c  z w  E. ~ 2 - z  c z cC I t  V)V) - k 4  V , W - - O t  E J Z L  i d =  1 W O ~r a - W Y F & - Z  UI n1 uz  c w I.S v;.
**0 V) DOC-- JJb-kH 0 -  A a W ( 3 W  kkd W * t  a k(r Y was -- a -  LD o a Y r m m t p  u a  1 ~ -lL * llf a 4 ~ - u > e + w  a --  a C C~b.eIrc~aC,frYX J *3 q  O O W ~ ~ W L J U  Y a b  F ~ ( 3 I 0 ' 3  O W -u Y W C T  C O C : I ~ ~  i-++ - r  w X L + Q U + W  u a tz o + rtr I ~ I  J 4 - m a p  V, a 0 4  7 a - 0 ~ ~  oc0 0  +I- x e  w a  L a a o  r F ~ ; ) ~ ~ ~ ( L % U I Y  - w *w a ;up w w b c a 3 u o  cr ooa i n  r a ~ o w a a x  m r ae a n W k W  W ( 3 0  > W g U  9 LEO:& + -  WLT O Ut-Qa - -13 ~ t r f ~ t a + - - - - c -  ao.
w r x w iL n - C - + P  id 141 W* - m w a  r o + w+ C - ~ Z U V ~ W Z ~  a w aw - x A A + C C ~ C ~ O A  UI h: + + m  tn J e e  r 3 3P: -he* 3 33 Q W V I  w-,*- X-X W V I  0 w #  W t-W W Q Q U - u W  O--F-t- LC + w@- * Q V  ee U Ak + Q Y W  L I L Y J 2 W U W -  fL 3 ULT W 0 - k  U L O H  A *2 D O U O k i w Q  u Y V  7 k c  O + C ~ W Q  z a m *  .am t - tL Q:+L+CCZ Q 2 2 k  Q)CO?C- 3 3  3, ' W W  U?r a Y W - - - Y : e o c .
-0 %a w  auzzwb otm P - W A Z  T-&1 q ~ h  w b UJ a, -tn a--w 0 Z O  W H ~ Q :  U Z w r 4 V 1 W W  E ~ Z  mq=' tea.U J Y Z -V- vrsraaY d m - b - e -  a Q~- JZ O W  a ) c a s ~ c p w a m*PI X k * O  o r  3 3 -MeP.W%5w a r nI- a d o n  c Q do - ~4-0 W + X P Z  e wuzeck-z z 2 c ~ j -  5c z a m a v ~  o w 4  a* r L ) I m W O  a U W f L M  0 5  - W 2 3 ~ j a U W -  > jE:w ~ x m w o  u u O ~ L  ~ o .
.
r a m a + t  a m  w oC Y Q - - -  --tL Q W  UP L W e Q X .
L 3 6 P Q :  3-Jsox --a0 O X  ~ w o a r ' f w  w z w+ X t U w  a - +  - = P k + 0 b & + 0 0 4 4 3  + Z C PWITH LEF'TOP ANC R I G H T O F  TO PRODIJCE A PTCTURE W I T H  BOTHR E L A T I O N S  SATXSFIEDrNOTE'THAT T H I s ' V E R S I O N  DOE5 NOT USE THE PROQPPM - D I A G R A M - ,4( C O M P I c S  (L.CLPESCA 0 (PnOfl  (AFRAME BIFFRAME T K S  T K  PFA PFBETWAS" TK8 T K C  A t T P  ATTPOR Y A  Y B  TMP)9 MAKE A PF F O R  'EACH TnKEN A k O  PUT ON THE PROPERTY L I S TUNDER T H ~  A N F  PF JI( M A P  TOKS (FGUQTE ( 4 P M q n A(PUT [ C A R '  X )  ~ P F  (MAKEPF ( C A R  X I ) )  ) ) I& G O  THRQpOH,AND SEE W H A T  WF CAN c ~ M B I N E .
CA ( S E T 0  T&S ~ O K S )( S E T Q  O ~ F F P ~ W ' E  N I L )($?f 'g EfWAs MU-( s ~ T Q  P F R A M E ,  (GET  ( C A R  T d K S )  Z P F )  )R ( S E T 0  f K  ( C A R  T K S ) )[ S E T Q ,  PFA (GET T K  E P F )  )(cAND ( ( N O T ,  (EQ P f  b P ~ R A M E )  ) (SETQ O T F F R A M E  TI ) )~r TEST F O R  U ~ ~ A T I S F I E ~ ) .
RELATIONS JItcnwn ( ( ~ J ~ S .
A T R  TK ' ?LEFTOF)  G o  i) )( ( l d N S A T R  TK Z R 1 9 ~ T r ) f )  (GO R ) )( [ I lNsATf?
TK.4SL'PpnRT) (60 S )  1( L u k ~ n t ~  1~~ Z B E L ~ W )  m a  k )  1 3JI END OF TeE #INNER LPOP 41K (COND ( ( S E T 0  T K S  ( C D R  T K 5 ) )  ( G O  9 ) )( (NULL nIF,FRAF(E) (nRAwPyCS ( G F T  {CAR T O K S )  EPF)  )( RETURh) )(ETWAS lea  A M )(PRINT E ( C V M P Y C S  F-~ILE:~))(RETtlRh ,4 I lNSAT' IsFIED LEFTOF- PF'LATLO~ JIL ~ S E T O  TKO ( G E T  T K  ~ L , ~ F T ~ F )  )( s E T ~ J  PF9 ( G E T  TKB E P F ) )(c f lNo ( A N Y \ ~ ~ S B T  T K & '  = ( P T G H T Q F ) )  (131) K )  1 )tCCAl,E5CE ( L I S T .  "
( C A D A R  P F 4 )  (C~SQAFI PF!)
)( L I S T  ( C b A R  B F R )  ~ C A C D A R  RFR)  1 )( G O  K )J, L~NSA'TISFXEB R I G H T O F  Q E L ~ T T ~ N  +R ( S E ~ T S  TKP '(6'E.T T K  Z R f G w T q F ) )- , .
( S E T Q  PFR (GET T68 =PF)  )( C O N D  ( !
A h y U h $ b T  T K B  Z ( L F F T O F ) )  ( G O  K ) ) )~ C O A L E S C ~  (L IST ( ' C I P R  P F A )  ~ C A O D A R  PFA)( L I S T  ( C A O A R  PFB)  ( C P D D A Q  P F ~ !
1 )( G O  K )c U N S A T I S F I E D  SUPPORT PELATTOM JIs ( S F T O  T K p  - (OFT I K  ESUPr=lr)QT) r( s E T ~ J  PFB (GET TKB 'ZPF)  )ICQI'ID t ( AhyUhSAT T K B  5 ( s I J P P O R T ~ Y  1 1 (GO K )  1(SUB TMP ( C A R  ( G E T  7: =ATTACH-) 1 )t s ~ r r ~  P T T P  (EXECIOC t ~ n P  TMP)  I( s E T o  AfTPo8 (EXECLOC ~ C A D R  T M F ) ) )(Cobln t ( E Q  ( C A A R  T P P )  T K Q )  ( S F T Q  TMP AT-TP)( $ E T G  A T T P  A T T P ~ B )  ( S F T  Q ATTPOR T M P )  1 )~ C C A C E S C F  67f P A T T P O Q )( 6 0  K )J( u N S ~ T I S F J E O  BFLOM W F L A T T O N  JIW ( S F ~ Q  TKR ( G E T  T K  50ELqw) )( S E T 0  PFR ( G E T  ~ K R  3 P F ) )( S E T O  '?A ((PLUS ( C A D R  ( G E T  T K  Z S T V A L ) )(UIFFERFWCF ( C A Q D O R  (GET  T K  IORIGPF) 1( C P O Q  (GET T U  ~ O Q I G S T )  ) 1 )( S F T Q  YH ( P I - L ~  CCACR ( ~ c f  TKR ~ s T V A L )(DIFFERENCE (CADOR ( B E T  T K 8  S O R I Q ~ F ~ )(CAI"$!'
(GET TKB ~ C I R T G S ~ ) )  1 ) )(CON0 ( (ANYULSAT TKB kt4RQVE)) ( 0 0  U ) ) )4 $IMPCE RELOW* hO LFFT OR R I G H T ,  CENTER PFSI 4(COALESCE (LIST CTIMES (PLUS { C A A R  ?
F A )  (CAQ4Rm PFA) ) 0,51Y f i )  (L fST ( t r M E S  (PLUS ( c A A R  PFB)  (CADAF?
PFR) 10.5) ~ 0 )  1(GQ # )c BELOW WITH LEFT OR R I W T  +U ~ c o N o . '
( ( A N Y I J N S A ~  THB ~ ( A R Q V B  I-EFTOV R I G H T O F ) )  ( G O  101( ( U b i ~ b f  R TKB ELEFT9F 1 ( G C  V )  1 )4 RELOW'WITH R J G H T O ~  4rsrTa TKc ~ ~ ~ C T - ~ B Z B T  OHTOFTI[CONll ( ( N O T  (MEMBER TKc ( c D R  P F A ) ) )  ( G O  K ) ) )(COALESCE ( L I S T  (CAAP PF4 )  Y A )  (LIST ( C A D A R  PFB) Y B ) )(60 * K )4 BECQw WITH LEFTOF ILV ~ S E T Q  T K C  (GET TKB S L E F T ~ F ) )( C O N 0  ( ( N O T  (MEMBER TKc.
fCDR P F A ) ) )  (GO K )  1 )( C D A ~ , J ~ S C E  (C ' IST ( C P O A R  PFA) Y A )  ( L I S T  ( C A * d  beel  Y R )  1~ O C )  K ))'I)+TEQT F O R  UNSATISFIED RELptTdN 4(UNSATR (LAFBDA ( T O K  REC)(AND (GET ' T O &  REL) (hbT OAEME~FR (OFT T O K  RE\_)( C D R  (GET T O K  Z P F ) )  1 ) )  1 )4TEST FOR ANY U h S A T I S F I E p  R E L A T I O ~  EXCEPT FOR THE G I V E N  L I S T  +t AMYuNsAT (LAMBDA (.TON I T  (PROG (FL.0)( M b P  :(LEFTOF RIGHTOF A R ~ V E  BFLQW SUPPORT SUPPORTRY)(FQUOTE (LAYBOA o ( )c c O ~ g  (-tnhD (hOT (MEMBER ( C A R  x j  L S T )  I( U ~ S A T R  TOK ( C 6 R  X I  ) J  ( S E T G  FLG T I )  1 ) 1 )( R E T u R ~  FLe)9CO~LESCE TWO FRAPES, PFA AN9 PFR, AT THE G I V E N  POINT5  +(COALESCE (LAnBnb (PA P R )  (PRoG ( P F )f SETq ETdAs 1)t $ E l ~  PF (COFPFHM P F P  PA PFQ P B ) >( M b P  tCDR PF) (FQUGTE (LAMBDA ( x )(PUT ( C A R  X I  SPF PF) 1 )) ) ICs U B R O U T I ~ E  OF COPPIC5 TO SEE I F  THERE IS AN COJECT W 7 T rTHE d?&~Trohr REL AND SET PFB,-TO I T S  PICTURE FRllME SET s(FNDcPc I ~ A M R ~ ' ) ~  CREk) (PooG ( P F T ~G $EE I F  COB HAS SQMFTHING 1h THIs 'RELATIoN J(CON0 ( (ROLL (SETQ O@ (OFT CQR R E L ) ) )  ( R E T U R N ) ) )G SEE IF,OhE Of THE OTHER PF SETS HAS OB IN IT 4~ S E ~ Q  PFT PFS)A (CON0 ( (NULL (SET0 PFI (CDR PFT)  1 )  ( ~ E T U Q N )  )( ( W M R E R .
00 ( C D A n  PFT) 1 (SFTO PFQ ( C P P  P F T )  1(RETUHN I) 1(7 (60 4 ) ) )) 1 )GTEST WHETHER P A  PTOM OCCIJRS I N  A STRUCTURE ~1(OCCURS (LAw.~ae (ATM STRI(CON0 ( (NULL 5 T R )  ~ I L )(4EQ ATM'  S T R )  T')( ( A T O M  s T R )  NILb) 6 4  ( r  (OF,  (OCCURS A T M  (CAR S T R ) )  ( O C C U R S  AT# (CQR S T R ) )  1 )  1 )*MANE AN ATTACHVENT R E L A Y T ~ N  c ( M A K E A T T  (LAMBDA ( A  P P  R gP) (FROG (TMP A T T R S  A T t R  TMPB) (sETQ TMP .
( 'LIST ( L I S T  A PP) ( L I S T  R RP)  1 )(COND ( ~NUCI+' ( s E T Q  A T T A s  ( G E T  P  ATTACH)) ( 0 0  C ) ) )D ( S F T O  A ~ T R  tcnR A T T R S )  )tCQND ( ( N O T  (Eb ( C A R  (nTHER A ~ T R  A ) )  0 ) )  (IGO F ) ) )(CONn ( ( N O T  (EQ ( C b I R  PTTR)  A j )  JSETO T M P ~  AP)( S E N  PP R P )  (gETQ RP TMPB) )  )(CON0 ( ( A N n  PP ( O R  ( h O T  (EO 1cAR AP) ~ D E F A U L T L O C ~  )(MULL  (CADAR & ?
T R )  ) )~ P P L A C A  [COAR b T T R )  A @ )  1 )(CnNn UAkn ep (OR (hiof (?0 ( F A R  BPI IDEFAuLTLOC))(NULL (CADADR A T T R )  1 ) )( R p ~ 4 C .
4  (CDADR A T T R ) .
RP) 1 )E ccoNn ( ( ~ E T Q  A T T R S  ( c m  A T T R S ) )  (GO o)))c ( s ~ T R E L  A ~ A ' ~ T I C \ H  I M P )( s E ~ R E L  I3 EATTACH TMP)( R E T u R ~1 ) )SQPEW AN ITEM Oh THE l pLAC +(OPEhlTEM ( L A M B O P  (TOKhAMEI (PRQG ( 1( G O U T  ZIT (L IST  I T ~ D O E R  260  n 328311)G U T  ( L I S T  I ~ A D C I E ~ ) )( S F T ~ J  T T ~ O O E R  (PLUS I T A O ~ E Q  2 0 0 )  I( P U T  TOKNPME EIMLACXTEY T*)(AFT  \JRR 1 ) )J,COMRTNF TWO P I C T U R E  FRAMFs, a P I C T U R E  FRAME I S  -OF THE  FOR^( ( X M f N  X M ~ X  V M I N  Y P A X I  TOKEN TOKEN)?Fa IS C Q M R I P F C  I N T O  P F ~  $n THC\T~ THE P O I N T  P2 I N  PF2IS THE 'SbME A S  P I  ,IN P F 1 ,  9~ C O M P F Q M  (LAwRCh I P F ~  P I  P F ~  P Z )  ( P R O 6  ( ~ 4  Y e  X P  Y p  cTPTX H I N  X M A ~  Y M I N  Y H A X .
TMP PF2P S P )  ( s E ~ Q  X G  ( C A R  p .
1 ) )  ( s m n  Y A  ( C P D R  P I ) )~ Q E T ~  XP ( C A E  ~ 2 ) )  ( S F T O  Y P  ( G A D R  ~ 2 1 )( s ~ T Q  X ~ T N  ( C A P G ' P F - ~ ) * )  (SETQ X M A X  ( c A S A R  P F l - )  )SET^ YMXN (CAODAR P F 1 )  ) ( S F T O  YMAX ( C A O D D A ~ ~  P F 1 )  )( C O W )  ( (LEsSP   SET^ TMP (NEwX ( C A A R  P F ~ )  ) ) X M I F I )  ( s F T ~  X r T b l  THP)t c o ~ o  I W?FATERP ( S E T Q  TMP ( W k X  ( C ~ D A R  P F ~ )  I I X ~ A K )(<ETQ XHAX T M o ) ) )( C n N f )  ( ( L E $ S P  (SETQ T M P  (NEWY ( C A D O A R  ~ ~ 2 1 ) )  YWXN)(sFTQ YMIh  T M P ) ) )(CONn ( (GREATERP (SEJQ TMB (NEMY ( C A D Q D A R  P F 2 )  ) Y M ~ X )t t F f Q  Y w A x  T M P ) ) )LRPLACII P F I  ( L I S T  XMIN  % M A X  YMIN Y M A Y ) )( S E T Q  PF2P (CDR P F ~ ) ]A ( ~ ?
1 9  P C 2  ( c O R  PF2)  1(CO"+df3 ( (MULL PF2) (REfllRhl (NFOhC PF1 PF2P)I)) ( S E T O  T M P  ( c P R  P F 2 ) )( S ~ ' h l  SP tqET TMP 2 $ T V a \ - k )~ s E T Q  S T P T  ( L I S T  (hEkX ( C A R  S F ) )  (NFWY ( C A D R  1 ) a )(PI!?
TPP S ~ T ~ A L  S T P T )( G O  4 )1 1 )+ COCRDINATE T R A ~ S F O R M A T I O N  FOR COMPFRM 4(NFWX ( L P M A O I  ( X )  (PLUS Y A  (DTFFERENCE % X P I  1 )(NFwY (LAMBDA C v )  (PCU$ Y A  (DTFFERENCE Y v p ) ) ) )DRAW A PICTURE F R A M ~  ,SET c (DQAMPTCS (LAMBDA (PF) (PROB ( $ 7 2 ~  TFIP X M I N  Y M I N  BAsFV$ T P t  ORJECT ROT H O D F L )t NEWFRAME)JI COMPUTE P A X  F R O M G  DJWENSIOL ANP SCALE T O  THE CRT 4( s E T o  ?3rZE {QIFCERENCE ( C A D A R  PF] (CAAR P C ) ) )(SETQ, TMP t~ l f~P;Rekcg jCPDDDAR PF 1 (cPQOAR PF) 1t C o ~ o  T('QRElJ,ERP 7MPL S T ~ F I  (SFTO SITE I M P )  ) 1+ SAFETY' IN 'CASE WE TRY Tn nAnW A ZERO 3 t Z E  OBJECT 4tC6Sf2 ( (ZFROP SXZF.1 (SFTB, S T Z F  1 8 0 )  1 )  (sET;(J CLOQALSJZE ( T I P E s  0.9( f lLON6Nfl  S C R ~ F N X M A X  S I Z E )  1+ F I X  19 H P A C ~ ' ?
~  T O KEEP FROY INCREASING PICTURE S I Z E  +~ C O N ~ '  ( (GREATERP GLOBALSIZE 5 .
0  1 (SFTO Q L a e ~ ~ s x z E  s.01 I 1(SETO 8 M I N  (QSFF.EREIYCF: (CP,AP P F ) '  (T IYES 0 .05  S I Z E ) ) )(sETQ YMIF (OIFFERELCE (CADDAR PF)  (TIMES 0 .05  S I Z E )  ) I( S E T Q  BASEV ( L I s T .
X M I N  Y M I M I )b (SFTQ PF (20R PF) 1(COND 4 (NULL 'PF) (RETURN) 1~ S F ~ I  OBJECT ( C A R  P F 1 )  ( Q P ~ E N I T E M  OBJECT I(SFTQ STPT (VDZFF (OET OR JEcT ZSTVat . )
BASEU)~ S C T O  R O T  (GET OBJECT  ORIENTATION))SET^ SIZE ( 6 ?
7  ' O B ~ E C T  =cIZf?))
I~ P B S I T ~ Q N  Q T P T IccaNo ( R O T  (PEADING (MTNUS P O T ) )  1t,T (HEADING 6 ;6) 1 )4 ORAM THF OBJECT " J(SETQ -WOOEL (GET 00,JECT ~ T Q K )  I( ( G E T  MODEL ZDRAWPROGI  FTZE)(DISPLAY)(GQ n)1 ) )CP I C K  THE PART CF A P A I R  W H ~ S E  CAG IS NOT THE G I V E N  ATOM.
4( ~ T H E R  ( L A M ~ o A  ( P A I R  VALVE)(CUND ( (EQ C C A B R  P a m  VALUE) ~ A D R  PA'XFZ) )tr ( C A R  P A I P 1 9  1 14CIEFIRE O V E ~ P C L  PT,CTURE SCALE R Y  F I N O I Y G  THE LFNl i tH OFTHE Q ~ G G E S T  bE1JEC'T F O R  WHICH a .LENGTH IS S P E C I F l E D r  4(PICSCqLE (LAMBDA (UbO) t P 9 0 0  (sCL Am S~LP-ICSCL)A (COND won cco s+ I(CONO (SCC (.sETu PICSCL sCL) 1( T  W C S C L .
1 * 4 ) 1 , )(CONO (MsCL .
(SCT.IJ C P S S ~ ~ L  MSCL 1 I( T  (SETQ MASSSCL 1 .Q) ) )(RETUR~C (SET0 P7'M ( C d R  U801 1tsE'fQ UoD { C o R  U o b HtcaNo c cnpo (SETQ SGLP (CAR (GET ATM ELENGTH) 1 )taR (NULL.
S P ~  C ' A E A T E R P  SCLP SCL) ) )(SET0 SCC s C L P ) ) )ccaNn  AN^ (S1E70 ECLP f c A R  (GET  ATN Z M A S S )  1 )( O R  (NULL MSCC') (OREATERP SCLP MsCL) ) 1(SET8 MSCL S C L P )  ) )4G0 A )1 ) )4C D ~ J S T R U C ~  A D I ~ G ~ A M  FQR THE PHYSICS ~ R Q B L E M ~  THE ARGUMENTIS THE OBJECT fD S T A P T  TWE DIf iORbM W J T H ~  IL( O I A ~ R A M  ( L P M R C .
~  (OBJ)  W R O O  (OF~JL P J C ~ C L  PF OR ORPFI N P I C  ATTRS ATTP ATTPnR A T T R  TMP O B B )(SFTO OBJL  ( L I S T  084))( S E T Q  PF ( L I S T  ( L I S T  0.Q 010  0.0  Q * O 2 ) )A tCQNf7 ( ( N U L C .
~ B J L )  (RFTI IRF I  P F \ ) )cs&Ta QB ( c ~ R  OBJL) 1 ( s E T O  O B J L  ( C D R  O B J L ) )( S F T Q  I N P I C ' ( C O N S  ob INPIC) )~ S K T O  QBPF.
({PAKERF 0 8 )  (SETIT A T T R s  (BET 08 =ATTACH)B ( C O W  ( (NULL A T T R S )  T S F T  A T T P  (LIST o 0 )  1.
?t ( S E T Q  A T T P o B  ( L T S  o 0 1 )  (GO C )  1 )(CON0 ( ( Y E Y B E R  ( C A R  (OTHFH (-CAR A T T R S )  08) I N P I C )(GO C ) ) ,( S E T Q  ATTRs (CDR A T T R s ) )( G O  R )D E S E T O  A T T P  ( C A R  M T R S )  )6SETn R T T P  (EXECLO!
: ( F A R  A T T R )  )( 'SETQ A T T P O R  ( E X E C L O C  (cADR A T ?
@ )  1 )tCoNl3 ( ( E Q  ( C A A R  A T T R )  OF!)
( s E T Q  T W P  A T T P )- (SETQ A T T P  P T T P ~ R )  ( sETC A T T P O B  T M P ) . )
)C (POMPFRM, PF L T T P  OBPF A T T P O R )(SETC4 ~ T T P s  ( G E T  08 E A T T 4 C H )  1E ( C O W  ( ( E Q  ( C A P  A T T R S )  A T T R )  ( G O  GI)($?TO 7MP ( C b R  A T T R S )  1(SFTO Of3R ( C h R  ( O T F E R , T M P  O R ) ) )(CONp ( ( M E M R E R  OBR I h F T C I(PR'T.NT : (DRAWING ~ V E R S P E C I F I F ~ ) )  LGC 6 ) )( ( N Q T  B E  ORR O R J L ) )(SET0 QBJk ( C C N q  O B B - O R J L ) )  ) )G [ C O W  ( ( S E T Q  A T T R S  ( C D P  .
A T T R S ) )  ( 0  F ) ) )( G O  n)1 ) )CM A K E  A PICT.URE FRAME F O R  A S I ~ G I - E  O R J E C T  4( M ~ K E P F  ( L A P R D ~  (OBJ) ( ~ s b r .
( 1  NG SPT 512 BASFV PF ~ Q T  MBDFI 1(COND ( ( N U I , L ~ S E T Q  S'lZ ( ~ E T  O R J  ESIZF))] (SETC SIZ 5 .
0 1 ) )(SFTO VOOEJ_ (GET -0BJ f T n K )  )( S E T Q  P f  ( G E T  MODEL E P p R A M E ) )( S E T Q  BASE\ /  (VSCALE-  ( L J V  ( C A R  PF)  ( C A D O R  P F ) )  $ 1 ~ ) )(CO94n I (SETQ R O T  *('GET O P , ~  EC~RIFNTATION)~ ~ , E T Q  PF ( R C T P F  PP 'rlnT) ) 1( s F T ~  PF ( M A F L I S T  PF (FQIJQTF ( [ A f l H n ~  ( X I( T I M E S  t C m  % S 5 2 )  ) ) ) 1(PUT 083 5 n R X G P F  P F )~ S F T Q  SPT  (VgCbLE (GET ~ o b ~ l  - =STARTpT) - SIZ) )[CoNn (ROT,  ( s E ~ Q  S F 1  ( V $ U M  ( V R O T  ( V R I F F  SPT  B A S E V )R C T )  R A S ~ V ) ~  )( P U T   OR^ 5 5 1 2 ~  S I Z )(Pl:T O B J .
Z 5 T V P L  S P T )(PUT OBJ = 0 R f G S T  ?
P T )( P F T U R ~  Y PF O B J ) )) 1 )3,COMPUTE FRAME FnR A WQTATEn PICTURE 1 4  J A N 7 5  44 THE ARRUVENTS ARE I X ~ I N  XMPX Y M T N  Y M A X )  AND THF ANGLF 4(RoTPF (LAYBOA (PF T H E T A )  tRRnG ( D X  QY STH C T W  X S  y $ )(SET0  O X  (0IFFERE.NCE ( C A ~ R  PF) (C49  PF) 1 )(SETQ O y  (OIFFEWENCE ( C ~ ~ Q D - F )  ( c ~ D D R  P F ) ] )( 5 ~ ~ 6  S ~ H  (SIN ( T I V E S  THFTA P T ~ ~ o ) ) )( S E T Q  C T H  ( C C S  ( T r P E S  THFTA Pji80) 1 )( S E T O  XS c ~ . '
f ~ f  ( V R X  0 O )  ( V Q X  c x  0) ( V R X  0 nv) r v ~ x  o x  n v W( S F T O  Y S  (L IST  ( V R Y  o Q )  ( V R Y  O X  0 )  ( V R Y  o D Y )  WRY D X  D Y ) ) )( R F T l I R h  ((LIST- (PLUS ( L ~ M Y F J  X S )  ( C A Q  P F ) )(PLW$ [LSHAX %S,l ( C A R  P F ) )  (PLUS (LSMIN Y S )  ( C A D B R  PF) ]I(PLUS (LSMAX Y S ~ '  (CADOR PF)  1 I )) ' I )4MSN ANn M A X  O V E R  LXSf S 19 MARCH 7 5  +(C$MIfrl (LwE3DP ( L )(CONTI N U  (CUB L ) )  ( C b R  L ) )If ( u I h  ( C A R  L )  ( L S M I N  (Con L ) )  ) 1 )  1 )  (.Lsvax ~ L A M P D A  I C )(CON!?
(,(NULL (CDR L ) )  (CAR L ) II T  ' ( M A X  ( C A R  .L) JLSMAX ( C D R  L ) )  ) .
I I )+ VECTOR f f Q T A T I O M S  FOR X 'AND Y USE0 IN ROTPF 4( V R X  ( L A M B D A  ()I Y )  (CIFFERE~ICE ( T I M E S  X c tn )  ( T T V E S  Y S T H )  ) I( V R Y  ( L A W ~ D A  o( ' Y )  &(PLUS ( T I M E S  X S T H )  .
(TIMES Y C T H ) ) ) ).I.EXECUTE THE F U ~ C T X O N  T0 GET A LOCATION 4(EXECLQC L A  tL) ( P R n G  0(sE,TQ L ( ADR L ) )(CONr) ( &on 4 )  ~ ~ E T U R N  ( ( C A R  L I  (COOR L I  [ C P D D R  L I  I . )
)( 1  (RETURN ( ( C P R  L I  ( C A O R  L ) ) ) )  11 ) )4DEFAULT LBCATTCN, SAvE AS 6ETLQC I N  E X E C U T I O ~  4(DFFAULTLBC (LAMBDA ( L )  (GETLOC L ) ) )+GET P LOCATION I N  OBJECT C D O R ~ I N A T E S  4(GETLOC ( ~ A P R W  (L )  - (PRQr: ( O R J ~  M C M L  LflC (SEW OBJ ( C A R  L ) )(SETQ MODEL (GET43?% 3 n r o(SETQ LOC tCPDR Lb)(RETURN ( P R S V A L  OBJ Lor ) l )4GET A R E L A T I V E  L O C A T f O h  I N  OBJECT C O O R D I N A T E S  J,(FROVLOC C L a w c ~  (L D )  (PROW ( Q R J  MOOFL LOC T M P )(SET0  OBJ ( C 4 R  L ) )~ S E T O  N O E L  ( G E T  QBJ Z T O K )  1c s ~ T n  LOC (VSUv ( G E T  MOOEL ( C n D R  I.)
)(VSCALE ( S F T O  TMP (UDIFF (GE-T PDDFL Z C G J( G E T  MODEL (CADR k) 1 )  1 ( R U O T I E ~ T  ( T I M E Q(aUOT.XENT ~ F L O P T  (CAR 0) ) P T C S C L J(GET MODEL ~ P s C A L E ) )(VNAG T M P ) ~ ~ ) )(PiTkIRh (Pf lsVAL OBJ L O C ) ]) I ,$.ERROR f a b p  R o U T X ~ E  crER@ k A M 0 O A  ( )WSG)  ( P ~ o G  (RFX)( P P I N I  ZEPROR:) ( P R I h l  MqG) tTERPS1)~ A ~ N L Q O P )  ) 1 14m ~ ~ f  ERROR hcESSA@E Ah13 S U R S T I T U ~ E  W Q D S  F O R  * S  4( P R I N T E R R  l L P M 0 O P  (MSG A R G S )  ( P R C G  0A ICOND ((EQ ( C A R  MSG) 3) ( P A I N I  ( C A R  A Q G S ) )  (PAINI  B L A h K )  tSETO PRGS (CDR A R G s ) )  1f T  ( P R I q l  (CAR klriq)) (PRIN-1  LANK)))(COND ( M S G  { C O R  M S ~ )  ) (GO A ) )( T  ( T F R P R I )  ~ R E ' T u R ~ J )  1 )1 ) )
