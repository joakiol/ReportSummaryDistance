Message-to-Speech: igh quality speech generation for messagingand dialogue systemsP.
Spyns (1), F. Deprez (1), L. Van T iche len  (1), B.
Van Co i le  (1,2)(1) Lernout ~ Hauspie Speech Products ,  Sint Kr isp i jnstraat  7, B-8900 Ieper, Belg iumtel.
: 32-57-22.88.88, fax: 32-57-20.84.89(2) E.L.I .S., Univers i ty of Gent,  S int -P ietersn ieuwstraat  41, B-9000 Gent,  Belg iumtel.
: 32-9-264.33.95, fax: 32-9-264.35.94{Peter .Spyns,F i l ip .Deprez,Luc.VanTichelen,Bert .VanCoi le}@lhs.beAbst rac tIn this paper, we present a Message-to-Speech (MTS) system that offers the lin-guistic flexibility desired for spoken di-alogue and message generating systems.The use of prosody transplantation andspecial purpose prosody models results inhighly natural prosody for the synthesisedspeech.1 Introduct ionMany of the Natural Language Generation (NLG)systems that produce flexible output, i.e.
sentenceswith variations on the syntactical and morphologicallevels, only aim at the production of written text anddo not deal with spoken language.
As a result, theimportant opic of generation of natural prosody isnot touched upon (see e.g.
(Elhadad, 1992; Reiteret al, 1995; Dalianis, 1996b; Somerset al, 1997)).Message generating systems (e.g.
announcementsystems, phone banking and voice mail applications)often combine fixed pieces of pre-recorded speechto provide speech of a natural quality.
In practicalapplications, the linguistic flexibility of the spokenmessages i usually kept very limited because of thehigh costs of recording and storing the fixed piecesof speech.The Message-to-Speech (MTS) system describedbelow is specifically designed to generate high qual-ity speech output with the flexibility desired for spo-ken dialogue and message generating systems.
Suchsystems typically generate speech for a predefinedset of messages that consist of fixed and variableparts.
High flexibility may be required for the vari-able parts in the messages only.Text-to-Speech (TTS) is an evident echnique forproviding speech output with nearly unlimited flex-ibility.
As full flexibility is only needed for the vari-able parts in the messages, the MTS system canmake use of special purpose prosody models for theactual set of messages of the application.
Thesemodels can lead to a prosodic quality that is su-perior to the one generated by TTS systems, whichapply general prosody models for unrestricted text(see also (Hovy, 1995, p.161)).For the fixed parts of a message, the prosodytransplantation technique (see section 2) is used tooverrule prosody generated by general models, asis done by TTS, with specific prosody copied fromnatural speech.
For the parts of a message whereflexibility is needed, prosody is obtained by either ageneral model or by a model that is specifically de-veloped for those parts.
The MTS system thus com-bines transplanted prosody with prosody by modelin order to achieve highly natural prosody for partlyvariable messages (Van Coile et al, 1995).The key concepts of the MTS system are presentedin section 3.1.
The system consists of two main mod-ules: a generation module and a prosodic integrationmodule.
The generation module (see section 3.2)is template driven (canned "text" interspersed withslots), and accounts for the flexibility, including thelinguistic variation, of the messages.
For a discus-sion of template driven systems ee (Reiter, 1995;van Deemter et al, 1994; van Deemter and Odijk,1997).
The prosodic integration module (see sec-tion 3.3) takes care of the prosodic integration ofthe slot fillers with the rest of the template.In section 4 the Message-to-Speech system isbriefly discussed, and section 5 compares the sys-tem with related research.
To conclude, an overviewof current developments to further enhance the MTSsystem is presented in section 6.2 P rosody  Transp lantat ionThe idea behind Prosody Transplantation is thatof copying intonation and duration values from arecorded onor message (human speech) to the pho-netic transcription of the same message.
The En-11viched Phonetic Transcription (EPT) obtained inthis manner can be fed to a TTS system whereby thenormal linguistic and prosodic modules (based ongeneral models) are by-passed (Phonetics-to-Speech- -  PTS).
Only the segmental synthesis and the syn-thesiser modules are used.# T\[104\] m\[74(0,98)\] N\[47\] k\[107(10,81)\] j\[14(0,106)\]u\[44\] f\[93(0,91)\] o\[47(0,102)\] r\[29\] j [68(0,98)(30,90)\]0\[50(0,96)\] r\[71\] $\[45(0,93)\]-t\[lOS\] E\[70(0,102)1 n\[68\]-S\[96\] $\[56\] n\[106(30,83)(100,83)\]Figure 1: textual representation f an EPT for thesentence "Thank you for your attention"An example of an EPT is provided by figure 1.The first value between square brackets is thephoneme duration (in ms), optionally followed byone or more intonation breakpoints.
Each break-point consists of a location value (in ms) relative tothe beginning of the phoneme, followed by a pitchvalue (in ST/4; reference 50 Hz).A major asset, of Prosody Transplantation is thecombination of natural sounding speech with a lowbit.
rate for storage (less than 300 bit per second).In addition, only the prosody and not the timbre ofthe speaker is retained.
New donor messages canbe recorded by new speakers and seamlessly inte-grated in existing applications.
Specific tools havebeen developed to speed up the prosody transplanta-tion process (Van Coile et al, 1994).
Although theEPTs as such do not support linguistic variation,the combination of PTS with a template driven sys-tern provides linguistic flexibility as well as naturalprosody.3 The  Message- to -Speech  SystemThe message-to-speech system described in this sec-t, ion takes as input a message specification and out-puts synthetic speech with highly natural prosody.Below, we first define the key concepts and then fo-cus on two main modules of the system: the gener-ation module and the prosodic module.3.1 Key  ConceptsA message can be seen as a complete sentence.
It isspecified as a concatenation of message units (build-ing blocks that constitute prosodic units).
The flex-ibility of a message unit is guaranteed by the pres-ence of slots.
A slot is a placeholder that can takean argument.
A carrier is a template containing theenriched phonetic transcription of the canned textpart, transplanted from an appropriate donor, andzero or more slots.
For each slot, the carrier containsmorpho-syntactic and prosodic information.
By fill-ing out a slot of a carrier with different arguments,several variants can be derived from the same mes-sage unit at run-time.Figure 2 shows the wave and the prosody corre-sponding to the donor "in four miles".
In order toobtain a flexible carrier, "four" is cut away and re-placed by a slot in which any argument of the type/number/ (see figure 3) can be filled out at run time.Figure 3 illustrates that the message "In fourmiles, bear left."
is realised as a concatenation oftwo message units: " in /number/mi le(s)"  and "bearleft".
The message unit " in /number /mi le (s ) "  hasone slot in which a numeric argument is to be filledout.
The message unit "bear left" has no slots.message In four miles, bear leftmessagespecificationmessage unitlmessage unit2carrier 1carrier 2(message unitl 4) (message unit2)in /number/milesbear leftin/number/miles#\[952(952,101)\]?\[18\]I\[66\]n\[92(4,98)\]/number: ... ON=CO ... /m\[138(10,103)(70,96)\]Y\[224(2,93)(132,92)\] 11173(58,82)\]z\[352\] #\[411(231,82)\]bear left# \[50(1,124)\] b [141(104,91)\]E\[228(211,119)\] r\[50\]- 1160(4,120)\]E\[205(156,82)\] f\[131\] t [151\]#\[800(800,79)\]Figure 3: example of message specification, messageunits and carriers for a message3.2 Message- to -Speech  Generat ion  Modu leThe generation module translates each message unitof the message specification into a carrier with op-tional arguments.
This translation is guided by atwo-fold mechanism:?
argument dependent carrier selection consists inselecting a carrier in function of (a characteris-tic of) an argument.
Figure 4 shows that themessage unit " in /number /mi le (s ) "  can be re-alised by one out of two carriers, depending onthe numeric argument that is filled out.
If theargument is "1", the message unit is mapped oncarrier la.
In the other cases, the message unitis mapped on carrier lb.?
carrier dependent argument realisation consistsin determining the correct surface realisation ofan argument, depending on properties of theslot in which it is inserted.
Figure 5 illustratesthat the argument 'T '  has a different surface12, , , s i i , i i, , , t , s i , | ii l  I I I I I i I;l;i l" i l; ; l" l; l; i donor.
.
.
.
.  '
' ' tenceI I : I I I I I II I I I I I I I I* M * i i J i g,, ,, ,, ~ ', ~ ', :I, , S IO I  , , , , ,, _ .
~  .
.
~an~lantedi l i i" i I i ...... .
.
.
.
.
i I onto  a carrieri i !
*?
i i !
* *i i  .
.
.
.
.
.
.
.
'o I7I n m 'Y 1 z #Figure 2: intonation contour for a carrier obtained from a donor sentencemessage unit"in ~,.,tuber/mile(s)"mapping conditionthe argument = "1"the argument ?
'T'carrier (represented orthographically)ta: " in/a/mile_lb: "in/number/ milesFigure 4: example of argument dependent carrier selectionrealisation ("a" versus "an") depending on thephonetic on-set of the word to the right of theslot.For the arguments filled out in the slot of a carrier,prosody is calculated at run-time (see section 3.3).As prosody derived from human recordings is pre-ferred over prosody calculated at run-time, we tryto keep the number of slots in a carrier as limitedas possible.
Therefore, the possibility is offered todelete arguments during the translation of messageunits into carriers.
This functionality is exploitedwhen the number of possible slot fillers is restricted.Figure 6 shows a message unit with one slot that istranslated into one out of four carriers without slot,depending on the message unit argument.3.3 Message- to -Speech  Prosod icIn tegrat ion  Modu leThe purpose of the prosodic integration module isto calculate appropriate prosody for the argumentsthat are filled out in a slot of a carrier.
Therefore,a phonetic transcription of the argument needs tobe available.
This transcription can be obtainedby a dictionary look-up or by using a grapheme-to-phoneme conversion routine.In a first step a duration is calculated for each ofthe phonemes in the argument.
In a second step, an?
appropriate intonation contour is calculated.3.3.1 Durat ion  modu leThe input of the duration module is a phonetictranscription i  which primary and secondary stressare indicated.
The duration module has access toone or more duration models in order to produce aduration value for each phoneme in a phonetic tran-scription.A duration model is a rule-based system calculat-ing durations, taking into account parameters suchas lexical stress, position of phonemes (word initial,word medial, word final, sentence final), length of theargument, phonetic ontext of phonemes (left/rightneighbour, consonant cluster), etc.
As speech ratecan vary from one message to another, a slot spe-cific speech rate coefficient, provided by the carrier,is also taken into account.Two major strategies with respect to durationmodelling can be discriminated:?
As the most natural prosody is the one derivedfrom human speech, the possibility is offered tofeed the duration module with phonetic tran-scriptions enriched with duration informationcopied from natural speech.
When customis-ing the MTS system, an argument dictionarycontaining this information can be built off-line13message unit"in/number/mite(s)""in/number/hour(s)"argument surfacerealisation1 a1 anconditionword to the right of the slot has a consonantic on-setword to the right of the slot has a vocalic on-setFigure 5: example of carrier dependent argument realisationmessage unit withone slot"go to the/direction/"mapping conditionthe argument = "west"the argument = "east"the argument = "north"the argument = "south"carrier (represented orthographically).without slotgo to the westgo to the eastgo to the northgo to the southFigure 6: example of message unit argument deletionby making use of the prosody transplantationtools (see section 2).
If transplanted durationsare available in the argument, they are takenover by the duration module and only modifiedin specific cases - -  e.g.
change a duration inorder to cope with a phenomenon such as finallengthening.?
For arguments without transplanted durations,a general purpose duration module is activated.It consists of a cascade of different durationrnodels each having a decreasing specificity.Specific duration models exist for particular ar-guments uch as numbers or date and time in-dications.
The general purpose model is onlyused if a more specific model is not available.Special tools have been developed to speed upthe creation of general and special purpose du-ration models.3.3.2 In tonat ion  modu leThe input of the intonation module is a phonetictranscription enriched with phoneme duration infor-mation.
The output is a phonetic transcription de-scribing both duration and intonation.
After tak-ing care of assimilation, this enriched phonetic tran-scription can be inserted without further action intothe carrier.There are two ways to model the intonation onarguments:?
The most natural intonation is obtained bytransplanting part of an intonation contour asobverved in a donor sentence onto the argumentthat is to be filled out in a carrier.
It is indeedpossible to reuse the intonation as realised on"4.6" in the donor phrase "in 4.6 miles" for theargument "9.5" that is to be inserted in the car-rier " in /number/mi les" .?
If no appropriate donor contour is available, theintonation module calculates a piecewise linearintonation contour based on slot specific intona-tion models.
Slot specific intonation parametersthat are taken into account are among othersthe begin pitch, the end pitch, the declinationrate and the intonation context (final fall, con-tinuation rise, etc.
).4 DiscussionThe Message-to-Speech system is designed to gen-erate high quality speech output with the flexibil-ity desired for spoken dialogue and message gener-ating systems.
It produces high quality speech whilemorpho-syntactic variations are taken into account.More specifically, as the message units and under-lying carriers can take arguments, it is possible togenerate several variants of the same basic message.?
variations on the level of a carrier slot can beparadigmatic: a message ranges over all the ele-ments belonging to a certain semantic ategory(e.g.
product name, cardinality, direction - seefigure 6) but the actual message is not knownon beforehand.?
variations on the level of a carrier slot can besyntagmatic: agreement of all kinds, liaison,contraction, etcetera (see figures 4 & 5).?
variations on the level of the message units canbe semantic: new combinations ofmessage unitslead to the creation of new messages.
E.g.
themessage unit "in /number/ mile(s)" can notonly be combined with a message unit "drive/slowly_fastp but also with the message unit"bear fleft_rightp.Highly natural prosody for the carriers is obtainedthanks to the prosody transplantation technique.The prosody transplantation technique can be used14for the slot arguments as well.
However, if no donorprosody is available for an argument, prosody is cal-culated at run-time on the basis of specific durationand intonation models.5 Re la ted  ResearchIn what follows we try to relate the MTS systemto the levels that are generally recognised to formpart of a NLG system.
A well known architecturalscheme outlining the three basic levels of an NLGsystem has been proposed by Reiter (Reiter, 1994,p.164) 1:1. content determination and text planning: Thecontent of the message to be communicated ismapped onto a semantic form, possibly anno-tated with rhetorical relations.
On this level,reasoning takes place about the communicativegoals of the text or message and the rhetoricalrelations between these goals.2.
sentence planning: The information of the se-mantic form is distributed over sentences andparagraphs.
The sentences are linked together.3.
surface generation: The abstract specificationof the linguistic structure is mapped to a sur-face form that communicates the informationwhile syntactic and morphologic processing isdone in order to generate a grammatically cor-rect surface form.If we compare our strategy with the classificationproposed above, the mapping of a message unit ontocarriers is to be situated on the surface generationlevel.
The result of the mapping stage is a completesurface form (represented by an EPT): the precisewording of a message has been fixed in accordancewith syntactic and morphologic restrictions.
Theprosodic integration phase has no explicit place inReiter's architecture since he only studied text gen-eration systems.The content determination, text planning, andsentence planning levels are not provided by theMTS system.
In a number of practical messagegenerating systems, the content of a message cor-responds in a straightforward manner with the mes-sage units, which can therefore asily be generatedby the back-end application.6 Cur rent  Deve lopmentsWe are currently enhancing the functionality of theMTS system in the following areas:l A more recent and detailed escription can be foundin (Reiter and Dale, 1997).
* The MTS system in its current state only com-prises carriers with one slot or multiple non-related slots.
The slots of a carrier are filledin a fixed sequential way (left to right), so thatthe linguistic restrictions are also applied in thesame order.
This entails that no restrictionsbetween related slots can be applied.
There-fore, the selection mechanism risks entering adeadlock situation.
E.g.
consider the car-rier "you have bought /number / / i tem/ '  where/number/indicates the number of i tems/ i tem/./number/could be realised as "no, a(n), two,three" etc.
In the case that "num= 1", thesystem blocks since the argument "1" cannotbe realised as long as the phonetic on-set of thefollowing word is not known.
But that wordcannot be realised (singular vs. plural) eithersince the number slot is not yet filled in.?
The MTS system in its current state only dealswith atomic arguments.
For some applications,it is also useful to support lists as arguments.
Aback-end application then could use the samemessage unit to have the MTS system gen-erate e.g.
"You have new mail from Tom"(atomic argument) or "You have new mail fromTom, Paul and John" (list argument).
In orderto achieve this, the MTS system will have todeal with syntactic aggregation (Dalianis andHovy, 1996; Dalianis, 1996a).Re ferencesHercules Dalianis and Eduard Hovy.
1996.
Aggrega-tion in natural anguage generation.
In GiovanniAdorni and Michael Zock, editors, Trends in Nat-ural Language Generation: An Artificial Intelli-gence Perspective, pages 88-105.
Springer-Verlag.Hercules Dalianis.
1996a.
Aggregation as a sub-task of text and sentence planning.
In J.H.
Stew-man, editor, Proceedings of the Artificial Intelli-gence Research Symposium.Hercules Dalianis.
1996b.
Concise Natural Lan-guage Generation from Formal Specifications.Ph.D.
thesis, The Royal Institute of Technologyand Stockholm University, Department of Com-puter and Systems Science, Stockholm, Sweden.Michael Elhadad.
1992.
Using argumentation tocontrol lexical choice: A functional unification-based approach.
Ph.D. thesis, Computer ScienceDepartment, Columbia University.Eduard Hovy.
1995.
Overview.
In Ronald Cole,Joseph Mariani, Hans Uszkoreit, Annie Zaenen,15and Victor Zue, editors, Survey of the State of theArt in Human Language Technology, pages 161 -169.
Cambridge University Press (in press).Ehud Reiter and Robert Dale.
1997.
Building ap-plied natural anguage generation systems.
Jour-nal of Natural Language Engineering, pages 1-38(submitted).Ehud Reiter, Chris Mellish, and John Levine.
1995.Automatic generation of techical documentation.Applied Artificial Intelligence, 9(3):259-287.Ehud Reiter.
1994.
Has a consensus nl generationarchitecture appeared, and is it psycholinguisti-cally plausible?
In Proceedings of the Seventh In-ternational Workshop on Natural Language Gen-eration, pages 163-170, Nonantum Inn, Kenneb-unkport, Maine, June 21-24,Ehud Reiter.
1995.
NLG vs. templates.
In Proceed-ings of the European NLG Workshop 95, pages 95- 106.Harold Somers, Bill Black, Joakim Nivre, Torbjon Lager, Annarosa Multari, Luca Gilardoni, ,Jeremy Ellman, and Alex Rogers.
1997.
Multilin-gum generation and summarization f job adverts:the TREE project.
In Proceedings of the FifthConference on Applied Natural Language Process-ing, pages 269 - 276, Washington D.C. MorganKaufmann Publishers.B.
Van Coile, L. Van Tichelen, A. Vorstermans,J.W.
Jang, and M. Staessen.
1994.
Protran: Aprosody transplantation tool for Text-to-Speechapplications.
In Proceedings of the 1994 Interna-tional Conference on Spoken Language Processing(ICSLP-9~), pages 423-426, Yokohama, Japan.B.
Van Coile, H. Riihl, L. Vogten, M. Thoone,S.
Goss, D. Delaey, E. Moons, J. Terken, J. de Pi-jper, M. Kugler, P. Kauflmlz, R. Krfiger, S. Leys,and S Willems.
1995.
Speech synthesis for thenew pan-european traffic message control systemRDS-TMC.
In Proceedings of Eurospeech 1995,pages 145-148.K.
van Deemter and J. Odijk.
1997.
Context model-ing and the generation ofspoken discourse.
SpeechCommunication, 21:101 - 121.K.
van Deemter, J. Landsbergen, R. Leermakers,and .l.
Odijk.
1994.
Generation of spokenmonologues by means of templates.
In L. Bovesand A. Nijholt, editors, Proceedings of the EightTwente Workshop on Language Technology, pages87 - 96, Twente.16
